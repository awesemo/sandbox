function UserAuthBlock(a){this.graph=a.graph;this.tab=a.tab;this.list=a.list;this.init()}UserAuthBlock.prototype={init:function(){if(jQuery(this.graph.id).length>0){this.generateChart()}if(jQuery(this.list.id).length>0){this.generateSparklink(this)}},generateSparklink:function(b){var a=null;jQuery("."+this.tab.id).on("shown.bs.tab",function(c){if(a===null){console.log("here");a=jQuery(b.list.id).sparkline("html",{type:"pie",height:"20px",width:"20px",sliceColors:[b.list.dataU.color,b.list.dataM.color,b.list.dataF.color]})}})},generateChart:function(){var a=this.graph.total;var b=c3.generate({bindto:this.graph.id,data:{x:"x",json:this.graph.data,type:"bar",names:{dataU:this.graph.dataU.label,dataM:this.graph.dataM.label,dataF:this.graph.dataF.label},groups:[["dataU","dataM","dataF","total"]],colors:{dataU:this.graph.dataU.color,dataM:this.graph.dataM.color,dataF:this.graph.dataF.color}},axis:{x:{type:"category",tick:{fit:true},label:this.graph.axis.x.label},y:{tick:{format:d3.format("d")},label:this.graph.axis.y.label}},tooltip:{contents:function(s,r,m,p){var h=this,t=h.config,k=t.tooltip_format_title||r,f=t.tooltip_format_name||function(d){return d},g=t.tooltip_format_value||m,j,q,u,n,v,c,l=h.isOrderAsc();if(t.data_groups.length===0){s.sort(function(i,d){var x=i?i.value:null,w=d?d.value:null;return l?x-w:w-x})}else{var o=h.orderTargets(h.data.targets).map(function(d){return d.id});s.sort(function(i,d){var x=i?i.value:null,w=d?d.value:null;if(x>0&&w>0){x=i?o.indexOf(i.id):null;w=d?o.indexOf(d.id):null}return l?x-w:w-x})}var e=0;for(q=0;q<s.length;q++){if(!(s[q]&&(s[q].value||s[q].value===0))){continue}if(!j){u=k?k(s[q].x):s[q].x;j="<table class='"+h.CLASS.tooltip+"'>"+(u||u===0?"<tr><th colspan='2'>"+u+"</th></tr>":"")}n=g(s[q].value,s[q].ratio,s[q].id,s[q].index,s);e+=s[q].value;if(n!==undefined){if(s[q].name===null){continue}v=f(s[q].name,s[q].ratio,s[q].id,s[q].index);c=h.levelColor?h.levelColor(s[q].value):p(s[q].id);j+="<tr class='"+h.CLASS.tooltipName+"-"+h.getTargetSelectorSuffix(s[q].id)+"'>";j+="<td class='name'><span style='background-color:"+c+"'></span>"+v+"</td>";j+="<td class='value'>"+n+"</td>";j+="</tr>"}}j+="<tr class='"+h.CLASS.tooltipName+"-total'>";j+="<td class='name'><b>"+a.label+"</b></td>";j+="<td class='value'>"+e+"</td>";j+="</tr>";return j+"</table>"}}})}};
function UserGenderBlock(a){this.graph=a.graph;this.tab=a.tab;this.list=a.list;this.init()}UserGenderBlock.prototype={init:function(){if(jQuery(this.graph.id).length>0){this.generateChart()}if(jQuery(this.list.id).length>0){this.generateSparklink(this)}},generateSparklink:function(b){var a=null;jQuery("."+this.tab.id).on("shown.bs.tab",function(c){if(a===null){a=jQuery(b.list.id).sparkline("html",{type:"pie",height:"20px",width:"20px",sliceColors:[b.list.dataGender.color,b.list.dataTotal.color]})}})},generateChart:function(){var a=c3.generate({bindto:this.graph.id,data:{json:this.graph.data,type:"pie",colors:{unknown:this.graph.colors.unknown,male:this.graph.colors.male,female:this.graph.colors.female}}})}};
function UserAgeDemographicsBlock(a){this.pie=a.pie;this.bar=a.bar;this.tab=a.tab;this.list=a.list;this.init()}UserAgeDemographicsBlock.prototype={init:function(){if(jQuery(this.pie.id).length>0){this.generatePieChart()}if(jQuery(this.bar.id).length>0){this.generateBarChart(this)}if(jQuery(this.list.id).length>0){this.generateSparklink(this)}},generateSparklink:function(b){var a=null;jQuery("."+this.tab.id).on("shown.bs.tab",function(c){if(a===null){a=jQuery(b.list.id).sparkline("html",{type:"pie",height:"20px",width:"20px",sliceColors:[b.list.dataGender.color,b.list.dataTotal.color]})}})},generatePieChart:function(){var a=c3.generate({bindto:this.pie.id,data:{json:this.pie.data,type:"pie",colors:this.pie.colors}})},generateBarChart:function(){var b=this.bar.total;var a=c3.generate({bindto:this.bar.id,data:{x:"x",json:this.bar.data,type:"bar",names:this.bar.names,groups:this.bar.groups,colors:this.bar.colors},axis:{rotated:true,x:{type:"category",tick:{fit:true},label:this.bar.axis.x.label},y:{tick:{format:d3.format("d")},label:this.bar.axis.y.label}},tooltip:{contents:function(s,r,m,p){var h=this,t=h.config,k=t.tooltip_format_title||r,f=t.tooltip_format_name||function(d){return d},g=t.tooltip_format_value||m,j,q,u,n,v,c,l=h.isOrderAsc();if(t.data_groups.length===0){s.sort(function(i,d){var x=i?i.value:null,w=d?d.value:null;return l?x-w:w-x})}else{var o=h.orderTargets(h.data.targets).map(function(d){return d.id});s.sort(function(i,d){var x=i?i.value:null,w=d?d.value:null;if(x>0&&w>0){x=i?o.indexOf(i.id):null;w=d?o.indexOf(d.id):null}return l?x-w:w-x})}var e=0;for(q=0;q<s.length;q++){if(!(s[q]&&(s[q].value||s[q].value===0))){continue}if(!j){u=k?k(s[q].x):s[q].x;j="<table class='"+h.CLASS.tooltip+"'>"+(u||u===0?"<tr><th colspan='2'>"+u+"</th></tr>":"")}n=g(s[q].value,s[q].ratio,s[q].id,s[q].index,s);e+=s[q].value;if(n!==undefined){if(s[q].name===null){continue}v=f(s[q].name,s[q].ratio,s[q].id,s[q].index);c=h.levelColor?h.levelColor(s[q].value):p(s[q].id);j+="<tr class='"+h.CLASS.tooltipName+"-"+h.getTargetSelectorSuffix(s[q].id)+"'>";j+="<td class='name'><span style='background-color:"+c+"'></span>"+v+"</td>";j+="<td class='value'>"+n+"</td>";j+="</tr>"}}j+="<tr class='"+h.CLASS.tooltipName+"-total'>";j+="<td class='name'><b>"+b.label+"</b></td>";j+="<td class='value'>"+e+"</td>";j+="</tr>";return j+"</table>"}}})}};