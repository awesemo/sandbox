!function(){function id(a){return a&&(a.ownerDocument||a.document||a).documentElement}function h2(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function iE(b,a){return a>b?-1:b>a?1:b>=a?0:NaN}function h5(a){return null===a?NaN:+a}function iw(a){return !isNaN(a)}function h0(a){return{left:function(d,g,f,c){for(arguments.length<3&&(f=0),arguments.length<4&&(c=d.length);c>f;){var b=f+c>>>1;a(d[b],g)<0?f=b+1:c=b}return f},right:function(d,g,f,c){for(arguments.length<3&&(f=0),arguments.length<4&&(c=d.length);c>f;){var b=f+c>>>1;a(d[b],g)>0?c=b:f=b+1}return f}}}function h9(a){return a.length}function iK(b){for(var a=1;b*a%1;){a*=10}return a}function ik(c,a){for(var b in a){Object.defineProperty(c.prototype,b,{value:a[b],enumerable:!1})}}function iG(){this._=Object.create(null)}function iB(a){return(a+="")===i0||a[0]===ap?ap+a:a}function h3(a){return(a+="")[0]===ap?a.slice(1):a}function iy(a){return iB(a) in this._}function h8(a){return(a=iB(a)) in this._&&delete this._[a]}function iz(){var b=[];for(var a in this._){b.push(h3(a))}return b}function hZ(){var b=0;for(var a in this._){++b}return b}function iF(){for(var a in this._){return !1}return !0}function hV(){this._=Object.create(null)}function ih(a){return a}function i9(c,a,b){return function(){var d=b.apply(a,arguments);return d===a?c:d}}function hW(f,b){if(b in f){return b}b=b.charAt(0).toUpperCase()+b.slice(1);for(var d=0,c=aN.length;c>d;++d){var a=aN[d]+b;if(a in f){return a}}}function iJ(){}function iL(){}function hX(d){function a(){for(var g,h=c,f=-1,e=h.length;++f<e;){(g=h[f].on)&&g.apply(this,arguments)}return d}var c=[],b=new iG;return a.on=function(g,f){var e,h=b.get(g);return arguments.length<2?h&&h.on:(h&&(h.on=null,c=c.slice(0,e=c.indexOf(h)).concat(c.slice(e+1)),b.remove(g)),f&&c.push(b.set(g,{on:f})),d)},a}function iY(){jP.event.preventDefault()}function im(){for(var b,a=jP.event;b=a.sourceEvent;){a=b}return a}function i7(d){for(var a=new iL,c=0,b=arguments.length;++c<b;){a[arguments[c]]=hX(a)}return a.of=function(g,f){return function(h){try{var e=h.sourceEvent=jP.event;h.target=d,jP.event=h,a[h.type].apply(g,f)}finally{jP.event=e}}},a}function jw(a){return ff(a,bF),a}function jC(a){return"function"==typeof a?a:function(){return gL(a,this)}}function jA(a){return"function"==typeof a?a:function(){return aW(a,this)}}function hT(k,f){function h(){this.removeAttribute(k)}function g(){this.removeAttributeNS(k.space,k.local)}function d(){this.setAttribute(k,f)}function c(){this.setAttributeNS(k.space,k.local,f)}function j(){var a=f.apply(this,arguments);null==a?this.removeAttribute(k):this.setAttribute(k,a)}function b(){var a=f.apply(this,arguments);null==a?this.removeAttributeNS(k.space,k.local):this.setAttributeNS(k.space,k.local,a)}return k=jP.ns.qualify(k),null==f?k.local?g:h:"function"==typeof f?k.local?b:j:k.local?c:d}function jb(a){return a.trim().replace(/\s+/g," ")}function h6(a){return new RegExp("(?:^|\\s+)"+jP.requote(a)+"(?:\\s+|$)","g")}function iW(a){return(a+"").trim().split(/^|\s+/)}function iZ(f,b){function d(){for(var g=-1;++g<a;){f[g](this,b)}}function c(){for(var h=-1,g=b.apply(this,arguments);++h<a;){f[h](this,g)}}f=iW(f).map(jx);var a=f.length;return"function"==typeof b?c:d}function jx(b){var a=h6(b);return function(f,d){if(c=f.classList){return d?c.add(b):c.remove(b)}var c=f.getAttribute("class")||"";d?(a.lastIndex=0,a.test(c)||f.setAttribute("class",jb(c+" "+b))):f.setAttribute("class",jb(c.replace(a," ")))}}function i2(g,c,f){function d(){this.style.removeProperty(g)}function b(){this.style.setProperty(g,c,f)}function a(){var e=c.apply(this,arguments);null==e?this.style.removeProperty(g):this.style.setProperty(g,e,f)}return null==c?d:"function"==typeof c?a:b}function iV(f,b){function d(){delete this[f]}function c(){this[f]=b}function a(){var g=b.apply(this,arguments);null==g?delete this[f]:this[f]=g}return null==b?d:"function"==typeof b?a:c}function iq(c){function a(){var d=this.ownerDocument,f=this.namespaceURI;return f===jI&&d.documentElement.namespaceURI===jI?d.createElement(c):d.createElementNS(f,c)}function b(){return this.ownerDocument.createElementNS(c.space,c.local)}return"function"==typeof c?c:(c=jP.ns.qualify(c)).local?b:a}function jv(){var a=this.parentNode;a&&a.removeChild(this)}function jk(a){return{__data__:a}}function i5(a){return function(){return cw(this,a)}}function jj(a){return arguments.length||(a=iE),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function iP(k,f){for(var h=0,g=k.length;g>h;h++){for(var d,c=k[h],j=0,b=c.length;b>j;j++){(d=c[j])&&f(d,j,h)}}return k}function iO(a){return ff(a,c0),a}function iT(c){var a,b;return function(h,g,f){var j,e=c[f].update,d=e.length;for(f!=b&&(b=f,a=0),g>=a&&(a=g+1);!(j=e[a])&&++a<d;){}return j}}function iQ(f,q,j){function b(){var a=this[d];a&&(this.removeEventListener(f,a,a.$),delete this[d])}function h(){var a=g(q,h7(arguments));b.call(this),this.addEventListener(f,this[d]=a,a.$=j),a._=q}function p(){var c,n=new RegExp("^__on([^.]+)"+jP.requote(f)+"$");for(var l in this){if(c=l.match(n)){var a=this[l];this.removeEventListener(c[1],a,a.$),delete this[l]}}}var d="__on"+f,m=f.indexOf("."),g=j4;m>0&&(f=f.slice(0,m));var k=eK.get(f);return k&&(f=k,g=jB),m?q?h:b:q?iJ:p}function j4(b,a){return function(d){var c=jP.event;jP.event=d,a[0]=this.__data__;try{b.apply(this,a)}finally{jP.event=c}}}function jB(c,a){var b=j4(c,a);return function(f){var d=this,e=f.relatedTarget;e&&(e===d||8&e.compareDocumentPosition(d))||b.call(d,f)}}function iS(g){var f=".dragsuppress-"+ ++bg,d="click"+f,c=jP.select(h2(g)).on("touchmove"+f,iY).on("dragstart"+f,iY).on("selectstart"+f,iY);if(null==fq&&(fq="onselectstart" in g?!1:hW(g.style,"userSelect")),fq){var h=id(g).style,b=h[fq];h[fq]="none"}return function(e){if(c.on(f,null),fq&&(h[fq]=b),e){var a=function(){c.on(d,null)};c.on(d,function(){iY(),a()},!0),setTimeout(a,0)}}}function jg(j,g){g.changedTouches&&(g=g.changedTouches[0]);var f=j.ownerSVGElement||j;if(f.createSVGPoint){var d=f.createSVGPoint();if(0>f2){var c=h2(j);if(c.scrollX||c.scrollY){f=jP.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var h=f[0][0].getScreenCTM();f2=!(h.f||h.e),f.remove()}}return f2?(d.x=g.pageX,d.y=g.pageY):(d.x=g.clientX,d.y=g.clientY),d=d.matrixTransform(j.getScreenCTM().inverse()),[d.x,d.y]}var b=j.getBoundingClientRect();return[g.clientX-b.left-j.clientLeft,g.clientY-b.top-j.clientTop]}function jp(){return jP.event.changedTouches[0].identifier}function jf(a){return a>0?1:0>a?-1:0}function i1(c,a,b){return(a[0]-c[0])*(b[1]-c[1])-(a[1]-c[1])*(b[0]-c[0])}function d9(a){return a>1?0:-1>a?aC:Math.acos(a)}function bP(a){return a>1?jh:-1>a?-jh:Math.asin(a)}function hh(a){return((a=Math.exp(a))-1/a)/2}function cI(a){return((a=Math.exp(a))+1/a)/2}function bx(a){return((a=Math.exp(2*a))-1)/(a+1)}function dK(a){return(a=Math.sin(a/2))*a}function jQ(){}function eW(c,a,b){return this instanceof eW?(this.h=+c,this.s=+a,void (this.l=+b)):arguments.length<2?c instanceof eW?new eW(c.h,c.s,c.l):aq(""+c,aO,eW):new eW(c,a,b)}function ib(h,c,f){function d(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(g-a)*e/60:180>e?g:240>e?a+(g-a)*(240-e)/60:a}function b(e){return Math.round(255*d(e))}var a,g;return h=isNaN(h)?0:(h%=360)<0?h+360:h,c=isNaN(c)?0:0>c?0:c>1?1:c,f=0>f?0:f>1?1:f,g=0.5>=f?f*(1+c):f+c-f*c,a=2*f-g,new eE(b(h+120),b(h),b(h-120))}function gX(c,a,b){return this instanceof gX?(this.h=+c,this.c=+a,void (this.l=+b)):arguments.length<2?c instanceof gX?new gX(c.h,c.c,c.l):c instanceof gg?gF(c.l,c.a,c.b):gF((c=e3((c=jP.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new gX(c,a,b)}function b8(c,a,b){return isNaN(c)&&(c=0),isNaN(a)&&(a=0),new gg(b,Math.cos(c*=cO)*a,Math.sin(c)*a)}function gg(c,a,b){return this instanceof gg?(this.l=+c,this.a=+a,void (this.b=+b)):arguments.length<2?c instanceof gg?new gg(c.l,c.a,c.b):c instanceof gX?b8(c.h,c.c,c.l):e3((c=eE(c)).r,c.g,c.b):new gg(c,a,b)}function dp(g,c,f){var d=(g+16)/116,b=d+c/500,a=d-f/200;return b=a6(b)*ew,d=a6(d)*bX,a=a6(a)*hz,new eE(kc(3.2404542*b-1.5371385*d-0.4985314*a),kc(-0.969266*b+1.8760108*d+0.041556*a),kc(0.0556434*b-0.2040259*d+1.0572252*a))}function gF(c,a,b){return c>0?new gX(Math.atan2(b,a)*cg,Math.sqrt(a*a+b*b),c):new gX(NaN,NaN,c)}function a6(a){return a>0.206893034?a*a*a:(a-4/29)/7.787037}function hG(a){return a>0.008856?Math.pow(a,1/3):7.787037*a+4/29}function kc(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function eE(c,a,b){return this instanceof eE?(this.r=~~c,this.g=~~a,void (this.b=~~b)):arguments.length<2?c instanceof eE?new eE(c.r,c.g,c.b):aq(""+c,eE,ib):new eE(c,a,b)}function g4(a){return new eE(a>>16,a>>8&255,255&a)}function af(a){return g4(a)+""}function i3(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function aq(d,m,h){var b,g,k,c=0,j=0,f=0;if(b=/([a-z]+)\((.*)\)/.exec(d=d.toLowerCase())){switch(g=b[2].split(","),b[1]){case"hsl":return h(parseFloat(g[0]),parseFloat(g[1])/100,parseFloat(g[2])/100);case"rgb":return m(gM(g[0]),gM(g[1]),gM(g[2]))}}return(k=bE.get(d))?m(k.r,k.g,k.b):(null==d||"#"!==d.charAt(0)||isNaN(k=parseInt(d.slice(1),16))||(4===d.length?(c=(3840&k)>>4,c=c>>4|c,j=240&k,j=j>>4|j,f=15&k,f=f<<4|f):7===d.length&&(c=(16711680&k)>>16,j=(65280&k)>>8,f=255&k)),m(c,j,f))}function aO(d,m,h){var b,g,k=Math.min(d/=255,m/=255,h/=255),c=Math.max(d,m,h),j=c-k,f=(c+k)/2;return j?(g=0.5>f?j/(c+k):j/(2-c-k),b=d==c?(m-h)/j+(h>m?6:0):m==c?(h-d)/j+2:(d-m)/j+4,b*=60):(b=NaN,g=f>0&&1>f?0:b),new eW(b,g,f)}function e3(g,c,f){g=fg(g),c=fg(c),f=fg(f);var d=hG((0.4124564*g+0.3575761*c+0.1804375*f)/ew),b=hG((0.2126729*g+0.7151522*c+0.072175*f)/bX),a=hG((0.0193339*g+0.119192*c+0.9503041*f)/hz);return gg(116*b-16,500*(d-b),200*(b-a))}function fg(a){return(a/=255)<=0.04045?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function gM(b){var a=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*a):a}function aX(a){return"function"==typeof a?a:function(){return a}}function cx(a){return function(b,d,c){return 2===arguments.length&&"function"==typeof d&&(c=d,d=null),bG(b,d,a,c)}}function bG(f,q,j,b){function h(){var e,a=g.status;if(!a&&hv(g)||a>=200&&300>a||304===a){try{e=j.call(p,g)}catch(c){return void d.error.call(p,c)}d.load.call(p,e)}else{d.error.call(p,g)}}var p={},d=jP.dispatch("beforesend","progress","load","error"),m={},g=new XMLHttpRequest,k=null;return !this.XDomainRequest||"withCredentials" in g||!/^(http(s)?:)?\/\//.test(f)||(g=new XDomainRequest),"onload" in g?g.onload=g.onerror=h:g.onreadystatechange=function(){g.readyState>3&&h()},g.onprogress=function(c){var a=jP.event;jP.event=c;try{d.progress.call(p,g)}finally{jP.event=a}},p.header=function(c,a){return c=(c+"").toLowerCase(),arguments.length<2?m[c]:(null==a?delete m[c]:m[c]=a+"",p)},p.mimeType=function(a){return arguments.length?(q=null==a?null:a+"",p):q},p.responseType=function(a){return arguments.length?(k=a,p):k},p.response=function(a){return j=a,p},["get","post"].forEach(function(a){p[a]=function(){return p.send.apply(p,[a].concat(h7(arguments)))}}),p.send=function(n,c,a){if(2===arguments.length&&"function"==typeof c&&(a=c,c=null),g.open(n,f,!0),null==q||"accept" in m||(m.accept=q+",*/*"),g.setRequestHeader){for(var l in m){g.setRequestHeader(l,m[l])}}return null!=q&&g.overrideMimeType&&g.overrideMimeType(q),null!=k&&(g.responseType=k),null!=a&&p.on("error",a).on("load",function(e){a(null,e)}),d.beforesend.call(p,g),g.send(null==c?null:c),p},p.abort=function(){return g.abort(),p},jP.rebind(p,d,"on"),null==b?p:p.get(jJ(b))}function jJ(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function hv(b){var a=b.responseType;return a&&"text"!==a?b.response:b.responseText}function c1(g,c,f){var d=arguments.length;2>d&&(c=0),3>d&&(f=Date.now());var b=f+c,a={c:g,t:b,n:null};return j2?j2.n=a:dU=a,j2=a,e6||(iH=clearTimeout(iH),e6=1,g7(eL)),a}function eL(){var b=fs(),a=bh()-b;a>24?(isFinite(a)&&(clearTimeout(iH),iH=setTimeout(eL,a)),e6=0):(e6=1,g7(eL))}function fs(){for(var b=Date.now(),a=dU;a;){b>=a.t&&a.c(b-a.t)&&(a.c=null),a=a.n}return b}function bh(){for(var c,a=dU,b=1/0;a;){a.c?(a.t<b&&(b=a.t),a=(c=a).n):a=c?c.n=a.n:dU=a.n}return j2=c,b}function f3(b,a){return a-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function ep(c,a){var b=Math.pow(10,3*ad(8-a));return{scale:a>8?function(d){return d/b}:function(d){return d*b},symbol:c}}function fF(g){var c=g.decimal,f=g.thousands,d=g.grouping,b=g.currency,a=d&&f?function(q,m){for(var k=q.length,j=[],p=0,h=d[0],e=0;k>0&&h>0&&(e+h+1>m&&(h=Math.max(1,m-e)),j.push(q.substring(k-=h,k+h)),!((e+=h+1)>m));){h=d[p=(p+1)%d.length]}return j.reverse().join(f)}:ih;return function(q){var A=gx.exec(q),i=A[1]||" ",k=A[2]||">",F=A[3]||"-",u=A[4]||"",D=A[5],z=+A[6],H=A[7],w=A[8],j=A[9],x=1,G="",C="",E=!1,t=!0;switch(w&&(w=+w.substring(1)),(D||"0"===i&&"="===k)&&(D=i="0",k="="),j){case"n":H=!0,j="g";break;case"%":x=100,C="%",j="f";break;case"p":x=100,C="%",j="r";break;case"b":case"o":case"x":case"X":"#"===u&&(G="0"+j.toLowerCase());case"c":t=!1;case"d":E=!0,w=0;break;case"s":x=-1,j="r"}"$"===u&&(G=b[0],C=b[1]),"r"!=j||w||(j="g"),null!=w&&("g"==j?w=Math.max(1,Math.min(21,w)):"e"!=j&&"f"!=j||(w=Math.max(0,Math.min(20,w)))),j=dC.get(j)||aD;var B=D&&H;return function(h){var s=C;if(E&&h%1){return""}var r=0>h||0===h&&0>1/h?(h=-h,"-"):"-"===F?"":F;if(0>x){var m=jP.formatPrefix(h,w);h=m.scale(h),s=m.symbol+C}else{h*=x}h=j(h,w);var y,v,J=h.lastIndexOf(".");if(0>J){var I=t?h.lastIndexOf("e"):-1;0>I?(y=h,v=""):(y=h.substring(0,I),v=h.substring(I))}else{y=h.substring(0,J),v=c+h.substring(J+1)}!D&&H&&(y=a(y,1/0));var p=G.length+y.length+v.length+(B?0:r.length),o=z>p?new Array(p=z-p+1).join(i):"";return B&&(y=a(o+y,o.length?z-v.length:1/0)),r+=G,h=y+v,("<"===k?r+h+o:">"===k?o+r+h:"^"===k?o.substring(0,p>>=1)+r+h+o.substring(p):r+(B?h:o+h))+s}}}function aD(a){return a+""}function jZ(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function gs(d,m,h){function b(a){var l=d(a),i=k(l,1);return i-a>a-l?l:i}function g(a){return m(a=d(new bf(a-1)),1),a}function k(i,a){return m(i=new bf(+i),a),i}function c(q,l,i){var p=g(q),e=[];if(i>1){for(;l>p;){h(p)%i||e.push(new Date(+p)),m(p,1)}}else{for(;l>p;){e.push(new Date(+p)),m(p,1)}}return e}function j(o,a,l){try{bf=jZ;var i=new jZ;return i._=o,c(i,a,l)}finally{bf=Date}}d.floor=d,d.round=b,d.ceil=g,d.offset=k,d.range=c;var f=d.utc=jm(d);return f.floor=f,f.round=jm(b),f.ceil=jm(g),f.offset=jm(k),f.range=j,d}function jm(a){return function(b,d){try{bf=jZ;var c=new jZ;return c._=b,a(c,d)._}finally{bf=Date}}}function cP(T){function J(c){function a(k){for(var m,h,g,n=[],f=-1,d=0;++f<b;){37===c.charCodeAt(f)&&(n.push(c.slice(d,f)),null!=(h=km[m=c.charAt(++f)])&&(m=c.charAt(++f)),(g=P[m])&&(m=g(k,null==h?"e"===m?" ":"0":h)),n.push(m),d=f+1)}return n.push(c.slice(d,f)),n.join("")}var b=c.length;return a.parse=function(f){var g={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=ae(g,c,f,0);if(e!=f.length){return null}"p" in g&&(g.H=g.H%12+12*g.p);var d=null!=g.Z&&bf!==jZ,h=new (d?jZ:bf);return"j" in g?h.setFullYear(g.y,0,g.j):"W" in g||"U" in g?("w" in g||(g.w="W" in g?1:0),h.setFullYear(g.y,0,1),h.setFullYear(g.y,0,"W" in g?(g.w+6)%7+7*g.W-(h.getDay()+5)%7:g.w+7*g.U-(h.getDay()+6)%7)):h.setFullYear(g.y,g.m,g.d),h.setHours(g.H+(g.Z/100|0),g.M+g.Z%100,g.S,g.L),d?h._:h},a.toString=function(){return c},a}function ae(f,v,k,b){for(var h,s,d,p=0,g=v.length,m=k.length;g>p;){if(b>=m){return -1}if(h=v.charCodeAt(p++),37===h){if(d=v.charAt(p++),s=L[d in km?v.charAt(p++):d],!s||(b=s(f,k,b))<0){return -1}}else{if(h!=k.charCodeAt(b++)){return -1}}}return b}function O(d,a,c){ar.lastIndex=0;var b=ar.exec(a.slice(c));return b?(d.w=F.get(b[0].toLowerCase()),c+b[0].length):-1}function X(d,a,c){D.lastIndex=0;var b=D.exec(a.slice(c));return b?(d.w=an.get(b[0].toLowerCase()),c+b[0].length):-1}function H(d,a,c){q.lastIndex=0;var b=q.exec(a.slice(c));return b?(d.m=I.get(b[0].toLowerCase()),c+b[0].length):-1}function R(d,a,c){j.lastIndex=0;var b=j.exec(a.slice(c));return b?(d.m=W.get(b[0].toLowerCase()),c+b[0].length):-1}function ao(c,a,b){return ae(c,P.c.toString(),a,b)}function V(c,a,b){return ae(c,P.x.toString(),a,b)}function al(c,a,b){return ae(c,P.X.toString(),a,b)}function aa(d,a,c){var b=z.get(a.slice(c,c+=2).toLowerCase());return null==b?-1:(d.p=b,c)}var K=T.dateTime,Y=T.date,Q=T.time,Z=T.periods,G=T.days,ai=T.shortDays,B=T.months,U=T.shortMonths;J.utc=function(c){function b(e){try{bf=jZ;var d=new bf;return d._=e,a(d)}finally{bf=Date}}var a=J(c);return b.parse=function(e){try{bf=jZ;var d=a.parse(e);return d&&d._}finally{bf=Date}},b.toString=a.toString,b},J.multi=J.utc.multi=h1;var z=jP.map(),D=dR(G),an=c8(G),ar=dR(ai),F=c8(ai),j=dR(B),W=c8(B),q=dR(U),I=c8(U);Z.forEach(function(b,a){z.set(b.toLowerCase(),a)});var P={a:function(a){return ai[a.getDay()]},A:function(a){return G[a.getDay()]},b:function(a){return U[a.getMonth()]},B:function(a){return B[a.getMonth()]},c:J(K),d:function(b,a){return ch(b.getDate(),a,2)},e:function(b,a){return ch(b.getDate(),a,2)},H:function(b,a){return ch(b.getHours(),a,2)},I:function(b,a){return ch(b.getHours()%12||12,a,2)},j:function(b,a){return ch(1+gP.dayOfYear(b),a,3)},L:function(b,a){return ch(b.getMilliseconds(),a,3)},m:function(b,a){return ch(b.getMonth()+1,a,2)},M:function(b,a){return ch(b.getMinutes(),a,2)},p:function(a){return Z[+(a.getHours()>=12)]},S:function(b,a){return ch(b.getSeconds(),a,2)},U:function(b,a){return ch(gP.sundayOfYear(b),a,2)},w:function(a){return a.getDay()},W:function(b,a){return ch(gP.mondayOfYear(b),a,2)},x:J(Y),X:J(Q),y:function(b,a){return ch(b.getFullYear()%100,a,2)},Y:function(b,a){return ch(b.getFullYear()%10000,a,4)},Z:jM,"%":function(){return"%"}},L={a:O,A:X,b:H,B:R,c:ao,d:bL,e:bL,H:cE,I:cE,j:hd,L:dH,m:d4,M:fU,p:aa,S:bq,U:bZ,w:d3,W:dz,x:V,X:al,y:kq,Y:iA,Z:hN,"%":eT};return J}function ch(g,c,f){var d=0>g?"-":"",b=(d?-g:g)+"",a=b.length;return d+(f>a?new Array(f-a+1).join(c)+b:b)}function dR(a){return new RegExp("^(?:"+a.map(jP.requote).join("|")+")","i")}function c8(d){for(var a=new iG,c=-1,b=d.length;++c<b;){a.set(d[c].toLowerCase(),c)}return a}function d3(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+1));return b?(d.w=+b[0],c+b[0].length):-1}function bZ(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c));return b?(d.U=+b[0],c+b[0].length):-1}function dz(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c));return b?(d.W=+b[0],c+b[0].length):-1}function iA(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+4));return b?(d.y=+b[0],c+b[0].length):-1}function kq(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+2));return b?(d.y=fM(+b[0]),c+b[0].length):-1}function hN(c,a,b){return/^[+-]\d{4}$/.test(a=a.slice(b,b+5))?(c.Z=-a,b+5):-1}function fM(a){return a+(a>68?1900:2000)}function d4(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+2));return b?(d.m=b[0]-1,c+b[0].length):-1}function bL(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+2));return b?(d.d=+b[0],c+b[0].length):-1}function hd(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+3));return b?(d.j=+b[0],c+b[0].length):-1}function cE(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+2));return b?(d.H=+b[0],c+b[0].length):-1}function fU(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+2));return b?(d.M=+b[0],c+b[0].length):-1}function bq(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+2));return b?(d.S=+b[0],c+b[0].length):-1}function dH(d,a,c){eO.lastIndex=0;var b=eO.exec(a.slice(c,c+3));return b?(d.L=+b[0],c+b[0].length):-1}function jM(f){var b=f.getTimezoneOffset(),d=b>0?"-":"+",c=ad(b)/60|0,a=ad(b)%60;return d+ch(c,"0",2)+ch(a,"0",2)}function eT(d,a,c){hb.lastIndex=0;var b=hb.exec(a.slice(c,c+1));return b?c+b[0].length:-1}function h1(c){for(var a=c.length,b=-1;++b<a;){c[b][0]=this(c[b][0])}return function(d){for(var g=0,f=c[g];!f[1](d);){f=c[++g]}return f[0](d)}}function gU(){}function b4(g,c,f){var d=f.s=g+c,b=d-g,a=d-b;f.t=g-a+(c-b)}function gc(b,a){b&&aV.hasOwnProperty(b.type)&&aV[b.type](b,a)}function dj(g,c,f){var d,b=-1,a=g.length-f;for(c.lineStart();++b<a;){d=g[b],c.point(d[0],d[1],d[2])}c.lineEnd()}function gC(d,a){var c=-1,b=d.length;for(a.polygonStart();++c<b;){dj(d[c],a,1)}a.polygonEnd()}function a2(){function g(j,v){j*=cO,v=v*cO/2+aC/4;var q=j-d,i=q>=0?1:-1,u=i*q,k=Math.cos(v),r=Math.sin(v),p=a*r,w=b*k+p*Math.cos(u),m=p*i*Math.sin(u);fx.add(Math.atan2(m,w)),d=j,b=k,a=r}var c,f,d,b,a;gS.point=function(h,e){gS.point=g,d=(c=h)*cO,b=Math.cos(e=(f=e)*cO/2+aC/4),a=Math.sin(e)},gS.lineEnd=function(){g(c,f)}}function hE(d){var a=d[0],c=d[1],b=Math.cos(c);return[b*Math.cos(a),b*Math.sin(a),Math.sin(c)]}function j7(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}function eB(b,a){return[b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]]}function g0(b,a){b[0]+=a[0],b[1]+=a[1],b[2]+=a[2]}function ky(b,a){return[b[0]*a,b[1]*a,b[2]*a]}function iU(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=a,b[1]/=a,b[2]/=a}function aj(a){return[Math.atan2(a[1],a[0]),bP(a[2])]}function aK(b,a){return ad(b[0]-a[0])<em&&ad(b[1]-a[1])<em}function eZ(c,a){c*=cO;var b=Math.cos(a*=cO);fc(b*Math.cos(c),b*Math.sin(c),Math.sin(a))}function fc(c,a,b){++a4,bN+=(c-bN)/a4,jW+=(a-jW)/a4,hC+=(b-hC)/a4}function gI(){function d(m,h){m*=cO;var g=Math.cos(h*=cO),j=g*Math.cos(m),f=g*Math.sin(m),e=Math.sin(h),k=Math.atan2(Math.sqrt((k=c*e-b*f)*k+(k=b*j-a*e)*k+(k=a*f-c*j)*k),a*j+c*f+b*e);cG+=k,dc+=k*(a+(a=j)),eR+=k*(c+(c=f)),fA+=k*(b+(b=e)),fc(a,c,b)}var a,c,b;fP.point=function(f,e){f*=cO;var g=Math.cos(e*=cO);a=g*Math.cos(f),c=g*Math.sin(f),b=Math.sin(e),fP.point=d,fc(a,c,b)}}function aT(){fP.point=eZ}function cp(){function g(k,A){k*=cO;var w=Math.cos(A*=cO),j=w*Math.cos(k),y=w*Math.sin(k),m=Math.sin(A),x=b*m-a*y,u=a*j-d*m,B=d*y-b*j,q=Math.sqrt(x*x+u*u+B*B),i=d*j+b*y+a*m,r=q&&-d9(i)/q,z=Math.atan2(q,i);bv+=r*x,f9+=r*u,ez+=r*B,cG+=z,dc+=z*(d+(d=j)),eR+=z*(b+(b=y)),fA+=z*(a+(a=m)),fc(d,b,a)}var c,f,d,b,a;fP.point=function(i,h){c=i,f=h,fP.point=g,i*=cO;var e=Math.cos(h*=cO);d=e*Math.cos(i),b=e*Math.sin(i),a=Math.sin(h),fc(d,b,a)},fP.lineEnd=function(){g(c,f),fP.lineEnd=aT,fP.point=eZ}}function bC(c,a){function b(f,d){return f=c(f,d),a(f[0],f[1])}return c.invert&&a.invert&&(b.invert=function(f,d){return f=a.invert(f,d),f&&c.invert(f[0],f[1])}),b}function jF(){return !0}function hm(k,C,y,b,q){var B=[],j=[];if(k.forEach(function(s){if(!((h=s.length-1)<=0)){var h,o=s[0],i=s[h];if(aK(o,i)){q.lineStart();for(var g=0;h>g;++g){q.point((o=s[g])[0],o[1])}return void q.lineEnd()}var f=new eH(o,s,null,!0),p=new eH(o,null,f,!1);f.o=p,B.push(f),j.push(p),f=new eH(i,s,null,!1),p=new eH(i,null,f,!0),f.o=p,B.push(f),j.push(p)}}),j.sort(C),cY(B),cY(j),B.length){for(var A=0,m=y,z=j.length;z>A;++A){j[A].e=m=!m}for(var x,D,v=B[0];;){for(var d=v,w=!0;d.v;){if((d=d.n)===v){return}}x=d.z,q.lineStart();do{if(d.v=d.o.v=!0,d.e){if(w){for(var A=0,z=x.length;z>A;++A){q.point((D=x[A])[0],D[1])}}else{b(d.x,d.n.x,1,q)}d=d.n}else{if(w){x=d.p.z;for(var A=x.length-1;A>=0;--A){q.point((D=x[A])[0],D[1])}}else{b(d.x,d.p.x,-1,q)}d=d.p}d=d.o,x=d.z,w=!w}while(!d.v);q.lineEnd()}}}function cY(f){if(b=f.length){for(var b,d,c=0,a=f[0];++c<b;){a.n=d=f[c],d.p=a,a=d}a.n=d=f[0],d.p=a}}function eH(d,a,c,b){this.x=d,this.z=a,this.o=c,this.e=b,this.v=!1,this.n=this.p=null}function fk(d,a,c,b){return function(B,q){function w(f,h){var g=B(f,h);d(f=g[0],h=g[1])&&q.point(f,h)}function I(h,f){var g=B(h,f);F.point(g[0],g[1])}function A(){z.point=I,F.lineStart()}function G(){z.point=w,F.lineEnd()}function E(h,f){n.push([h,f]);var g=B(h,f);k.point(g[0],g[1])}function r(){k.lineStart(),n=[]}function C(){E(n[0][0],n[0][1]),k.lineEnd();var p,g=k.clean(),l=e.buffer(),h=l.length;if(n.pop(),D.push(n),n=null,h){if(1&g){p=l[0];var f,h=p.length-1,m=-1;if(h>0){for(H||(q.polygonStart(),H=!0),q.lineStart();++m<h;){q.point((f=p[m])[0],f[1])}q.lineEnd()}}else{h>1&&2&g&&l.push(l.pop().concat(l.shift())),t.push(l.filter(bc))}}}var t,D,n,F=a(q),j=B.invert(b[0],b[1]),z={point:w,lineStart:A,lineEnd:G,polygonStart:function(){z.point=E,z.lineStart=r,z.lineEnd=C,t=[],D=[]},polygonEnd:function(){z.point=w,z.lineStart=A,z.lineEnd=G,t=jP.merge(t);var f=gk(j,D);t.length?(H||(q.polygonStart(),H=!0),hm(t,eg,f,c,q)):f&&(H||(q.polygonStart(),H=!0),q.lineStart(),c(null,null,1,q),q.lineEnd()),H&&(q.polygonEnd(),H=!1),t=D=null},sphere:function(){q.polygonStart(),q.lineStart(),c(null,null,1,q),q.lineEnd(),q.polygonEnd()}},e=fZ(),k=a(e),H=!1;return z}}function bc(a){return a.length>1}function fZ(){var b,a=[];return{lineStart:function(){a.push(b=[])},point:function(c,d){b.push([c,d])},lineEnd:iJ,buffer:function(){var c=a;return a=[],b=null,c},rejoin:function(){a.length>1&&a.push(a.pop().concat(a.shift()))}}}function eg(b,a){return((b=b.x)[0]<0?b[1]-jh-em:jh-b[1])-((a=a.x)[0]<0?a[1]-jh-em:jh-a[1])}function fC(f){var b,d=NaN,c=NaN,a=NaN;return{lineStart:function(){f.lineStart(),b=1},point:function(h,i){var g=h>0?aC:-aC,e=ad(h-d);ad(e-aC)<em?(f.point(d,c=(c+i)/2>0?jh:-jh),f.point(a,c),f.lineEnd(),f.lineStart(),f.point(g,c),f.point(h,c),b=0):a!==g&&e>=aC&&(ad(d-a)<em&&(d-=a*em),ad(h-g)<em&&(h-=g*em),c=ay(d,c,h,i),f.point(a,c),f.lineEnd(),f.lineStart(),f.point(g,c),b=0),f.point(d=h,c=i),a=g},lineEnd:function(){f.lineEnd(),d=c=NaN},clean:function(){return 2-b}}}function ay(h,c,f,d){var b,a,g=Math.sin(h-f);return ad(g)>em?Math.atan((Math.sin(c)*(a=Math.cos(d))*Math.sin(f)-Math.sin(d)*(b=Math.cos(c))*Math.sin(h))/(b*a*g)):(c+d)/2}function jU(g,c,f,d){var b;if(null==g){b=f*jh,d.point(-aC,b),d.point(0,b),d.point(aC,b),d.point(aC,0),d.point(aC,-b),d.point(0,-b),d.point(-aC,-b),d.point(-aC,0),d.point(-aC,b)}else{if(ad(g[0]-c[0])>em){var a=g[0]<c[0]?aC:-aC;b=f*a/2,d.point(-a,b),d.point(0,b),d.point(a,b)}else{d.point(c[0],c[1])}}}function gk(Q,I){var Z=Q[0],K=Q[1],V=[Math.sin(Z),-Math.cos(Z),0],G=0,P=0;fx.reset();for(var al=0,T=I.length;T>al;++al){var ae=I[al],Y=ae.length;if(Y){for(var J=ae[0],W=J[0],O=J[1]/2+aC/4,X=Math.sin(O),F=Math.cos(O),aa=1;;){aa===Y&&(aa=0),Q=ae[aa];var B=Q[0],R=Q[1]/2+aC/4,z=Math.sin(R),C=Math.cos(R),ai=B-W,an=ai>=0?1:-1,D=an*ai,j=D>aC,U=X*z;if(fx.add(Math.atan2(U*an*Math.sin(D),F*C+U*Math.cos(D))),G+=j?ai+an*jY:ai,j^W>=Z^B>=Z){var q=eB(hE(J),hE(Q));iU(q);var H=eB(V,q);iU(H);var L=(j^ai>=0?-1:1)*bP(H[2]);(K>L||K===L&&(q[0]||q[1]))&&(P+=j^ai>=0?1:-1)}if(!aa++){break}W=B,X=z,F=C,J=Q}}}return(-em>G||em>G&&-em>fx)^1&P}function i8(d){function m(e,a){return Math.cos(e)*Math.cos(a)>k}function h(r){var p,i,a,q,o;return{lineStart:function(){q=a=!1,o=1},point:function(n,l){var u,t=[n,l],e=m(n,l),w=c?e?0:g(n,l):e?g(n+(0>n?aC:-aC),l):0;if(!p&&(q=a=e)&&r.lineStart(),e!==a&&(u=b(p,t),(aK(p,u)||aK(t,u))&&(t[0]+=em,t[1]+=em,e=m(t[0],t[1]))),e!==a){o=0,e?(r.lineStart(),u=b(t,p),r.point(u[0],u[1])):(u=b(p,t),r.point(u[0],u[1]),r.lineEnd()),p=u}else{if(j&&p&&c^e){var x;w&i||!(x=b(t,p,!0))||(o=0,c?(r.lineStart(),r.point(x[0][0],x[0][1]),r.point(x[1][0],x[1][1]),r.lineEnd()):(r.point(x[1][0],x[1][1]),r.lineEnd(),r.lineStart(),r.point(x[0][0],x[0][1])))}}!e||p&&aK(p,t)||r.point(t[0],t[1]),p=t,a=e,i=w},lineEnd:function(){a&&r.lineEnd(),p=null},clean:function(){return o|(q&&a)<<1}}}function b(U,K,ai){var P=hE(U),Y=hE(K),T=[1,0,0],ar=eB(P,Y),W=j7(ar,ar),an=ar[0],ae=W-an*an;if(!ae){return !ai&&U}var L=k*W/ae,Z=-k*an/ae,R=eB(T,ar),aa=ky(T,L),I=ky(ar,Z);g0(aa,I);var al=R,F=j7(aa,al),V=j7(al,al),B=F*F-V*(j7(aa,aa)-1);if(!(0>B)){var G=Math.sqrt(B),ao=ky(al,(-F-G)/V);if(g0(ao,aa),ao=aj(ao),!ai){return ao}var at,H=U[0],q=K[0],X=U[1],u=K[1];H>q&&(at=H,H=q,q=at);var J=q-H,Q=ad(J-aC)<em,O=Q||em>J;if(!Q&&X>u&&(at=X,X=u,u=at),O?Q?X+u>0^ao[1]<(ad(ao[0]-H)<em?X:u):X<=ao[1]&&ao[1]<=u:J>aC^(H<=ao[0]&&ao[0]<=q)){var D=ky(al,(-F+G)/V);return g0(D,aa),[ao,aj(D)]}}}function g(l,o){var n=c?d:aC-d,a=0;return -n>l?a|=1:l>n&&(a|=2),-n>o?a|=4:o>n&&(a|=8),a}var k=Math.cos(d),c=k>0,j=ad(k)>em,f=bb(d,6*cO);return fk(m,h,f,c?[0,-d]:[-aC,d-aC])}function cL(d,a,c,b){return function(m){var y,j=m.a,w=m.b,k=j.x,t=j.y,r=w.x,z=w.y,n=0,e=1,q=r-k,x=z-t;if(y=d-k,q||!(y>0)){if(y/=q,0>q){if(n>y){return}e>y&&(e=y)}else{if(q>0){if(y>e){return}y>n&&(n=y)}}if(y=c-k,q||!(0>y)){if(y/=q,0>q){if(y>e){return}y>n&&(n=y)}else{if(q>0){if(n>y){return}e>y&&(e=y)}}if(y=a-t,x||!(y>0)){if(y/=x,0>x){if(n>y){return}e>y&&(e=y)}else{if(x>0){if(y>e){return}y>n&&(n=y)}}if(y=b-t,x||!(0>y)){if(y/=x,0>x){if(y>e){return}y>n&&(n=y)}else{if(x>0){if(n>y){return}e>y&&(e=y)}}return n>0&&(m.a={x:k+n*q,y:t+n*x}),1>e&&(m.b={x:k+e*q,y:t+e*x}),m}}}}}}function cc(h,c,f,d){function b(j,e){return ad(j[0]-h)<em?e>0?0:3:ad(j[0]-f)<em?e>0?2:1:ad(j[1]-c)<em?e>0?1:0:e>0?3:2}function a(i,e){return g(i.x,e.x)}function g(l,i){var k=b(l,1),j=b(i,1);return k!==j?k-j:0===k?i[1]-l[1]:1===k?l[0]-i[0]:2===k?l[1]-i[1]:i[0]-l[0]}return function(Q){function G(p){for(var C=0,w=L.length,k=p[1],v=0;w>v;++v){for(var A,m=1,y=L[v],s=y.length,x=y[0];s>m;++m){A=y[m],x[1]<=k?A[1]>k&&i1(x,A,p)>0&&++C:A[1]<=k&&i1(x,A,p)<0&&--C,x=A}}return 0!==C}function O(p,m,k,x){var w=0,v=0;if(null==p||(w=b(p,k))!==(v=b(m,k))||g(p,m)<0^k>0){do{x.point(0===w||3===w?h:f,w>1?d:c)}while((w=(w+k+4)%4)!==v)}else{x.point(m[0],m[1])}}function K(l,k){return l>=h&&f>=l&&k>=c&&d>=k}function u(l,k){K(l,k)&&Q.point(l,k)}function I(){z.point=J,L&&L.push(n=[]),e=!0,q=!1,P=R=NaN}function D(){r&&(J(F,j),o&&q&&t.rejoin(),r.push(t.buffer())),z.point=u,q&&Q.lineEnd()}function J(p,k){p=Math.max(-j9,Math.min(j9,p)),k=Math.max(-j9,Math.min(j9,k));var m=K(p,k);if(L&&n.push([p,k]),e){F=p,j=k,o=m,e=!1,m&&(Q.lineStart(),Q.point(p,k))}else{if(m&&q){Q.point(p,k)}else{var l={a:{x:P,y:R},b:{x:p,y:k}};B(l)?(q||(Q.lineStart(),Q.point(l.a.x,l.a.y)),Q.point(l.b.x,l.b.y),m||Q.lineEnd(),H=!1):m&&(Q.lineStart(),Q.point(p,k),H=!1)}}P=p,R=k,q=m}var r,L,n,F,j,o,P,R,q,e,H,i=Q,t=fZ(),B=cL(h,c,f,d),z={point:u,lineStart:I,lineEnd:D,polygonStart:function(){Q=t,r=[],L=[],H=!0},polygonEnd:function(){Q=i,r=jP.merge(r);var l=G([h,d]),m=H&&l,k=r.length;(m||k)&&(Q.polygonStart(),m&&(Q.lineStart(),O(null,null,1,Q),Q.lineEnd()),k&&hm(r,a,l,O,Q),Q.polygonEnd()),r=L=n=null}};return z}}function dN(f){var b=0,d=aC/3,c=j0(f),a=c(b,d);return a.parallels=function(e){return arguments.length?c(b=e[0]*aC/180,d=e[1]*aC/180):[b/aC*180,d/aC*180]},a}function c4(h,c){function f(k,i){var j=Math.sqrt(a-2*b*Math.sin(i))/b;return[j*Math.sin(k*=b),g-j*Math.cos(k)]}var d=Math.sin(h),b=(d+Math.sin(c))/2,a=1+d*(2*b-d),g=Math.sqrt(a)/b;return f.invert=function(k,i){var j=g-i;return[Math.atan2(k,j)/b,bP((a-(k*k+j*j)*b*b)/(2*b))]},f}function dY(){function f(g,e){jH+=a*g-c*e,c=g,a=e}var b,d,c,a;ek.point=function(e,g){ek.point=f,b=c=e,d=a=g},ek.lineEnd=function(){f(b,d)}}function bU(b,a){cW>b&&(cW=b),b>d0&&(d0=b),cA>a&&(cA=a),a>dg&&(dg=a)}function dv(){function k(e,a){j.push("M",e,",",a,c)}function f(e,a){j.push("M",e,",",a),b.point=h}function h(e,a){j.push("L",e,",",a)}function g(){b.point=k}function d(){j.push("Z")}var c=ij(4.5),j=[],b={point:k,lineStart:function(){b.point=f},lineEnd:g,polygonStart:function(){b.lineEnd=d},polygonEnd:function(){b.lineEnd=g,b.point=k},pointRadius:function(a){return c=ij(a),b},result:function(){if(j.length){var a=j.join("");return j=[],a}}};return b}function ij(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function kj(b,a){bN+=b,jW+=a,++hC}function hJ(){function c(h,f){var e=h-a,d=f-b,g=Math.sqrt(e*e+d*d);dc+=g*(a+h)/2,eR+=g*(b+f)/2,fA+=g,kj(a=h,b=f)}var a,b;dF.point=function(e,d){dF.point=c,kj(a=e,b=d)}}function fI(){dF.point=kj}function eq(){function f(k,h){var i=k-c,g=h-a,j=Math.sqrt(i*i+g*g);dc+=j*(c+k)/2,eR+=j*(a+h)/2,fA+=j,j=a*k-c*h,bv+=j*(c+k),f9+=j*(a+h),ez+=3*j,kj(c=k,a=h)}var b,d,c,a;dF.point=function(e,g){dF.point=f,kj(b=c=e,d=a=g)},dF.lineEnd=function(){f(b,d)}}function bT(k){function f(a,i){k.moveTo(a+j,i),k.arc(a,i,j,0,jY)}function h(a,i){k.moveTo(a,i),b.point=g}function g(a,i){k.lineTo(a,i)}function d(){b.point=f}function c(){k.closePath()}var j=4.5,b={point:f,lineStart:function(){b.point=h},lineEnd:d,polygonStart:function(){b.lineEnd=c},polygonEnd:function(){b.lineEnd=d,b.point=f},pointRadius:function(a){return j=a,b},result:iJ};return b}function hw(k){function f(a){return(b?g:h)(a)}function h(a){return bB(a,function(l,i){l=k(l,i),a.point(l[0],l[1])})}function g(C){function N(m,l){m=k(m,l),C.point(m[0],m[1])}function E(){i=NaN,a.point=B,C.lineStart()}function B(p,m){var l=hE([p,m]),s=k(p,m);d(i,q,H,Q,R,z,i=s[0],q=s[1],H=p,Q=l[0],R=l[1],z=l[2],b,C),C.point(i,q)}function G(){a.point=N,C.lineEnd()}function I(){E(),a.point=P,a.lineEnd=L}function P(l,e){B(D=l,J=e),F=i,K=q,A=Q,O=R,n=z,a.point=B}function L(){d(i,q,H,Q,R,z,F,K,D,A,O,n,b,C),a.lineEnd=G,G()}var D,J,F,K,A,O,n,H,i,q,Q,R,z,a={point:N,lineStart:E,lineEnd:G,polygonStart:function(){C.polygonStart(),a.lineStart=I},polygonEnd:function(){C.polygonEnd(),a.lineStart=E}};return a}function d(J,aa,P,an,V,ai,Z,K,X,T,Y,H,ae,D){var U=Z-J,o=K-aa,F=U*U+o*o;if(F>4*c&&ae--){var al=an+T,ao=V+Y,G=ai+H,i=Math.sqrt(al*al+ao*ao+G*G),W=Math.asin(G/=i),n=ad(ad(G)-1)<em||ad(P-X)<em?(P+X)/2:Math.atan2(ao,al),I=k(n,W),R=I[0],O=I[1],B=R-J,u=O-aa,Q=o*B-U*u;(Q*Q/F>c||ad((U*B+o*u)/F-0.5)>0.3||j>an*T+V*Y+ai*H)&&(d(J,aa,P,an,V,ai,R,O,n,al/=i,ao/=i,G,ae,D),D.point(R,O),d(R,O,n,al,ao,G,Z,K,X,T,Y,H,ae,D))}}var c=0.5,j=Math.cos(30*cO),b=16;return f.precision=function(a){return arguments.length?(b=(c=a*a)>0&&16,f):Math.sqrt(c)},f}function cQ(b){var a=hw(function(c,d){return b([c*cg,d*cg])});return function(c){return e4(a(c))}}function f4(a){this.stream=a}function bB(b,a){return{point:a,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function dS(a){return j0(function(){return a})()}function j0(H){function C(a){return a=T(a[0]*cO,a[1]*cO),[a[0]*K+I,Q-a[1]*K]}function O(a){return a=T.invert((a[0]-I)/K,(Q-a[1])/K),a&&[a[0]*cg,a[1]*cg]}function E(){T=bC(G=ck(m,k,q),B);var a=B(A,P);return I=F-a[0]*K,Q=L+a[1]*K,J()}function J(){return N&&(N.valid=!1,N=null),C}var B,G,T,I,Q,N,D=hw(function(b,a){return b=B(b,a),[b[0]*K+I,Q-b[1]*K]}),K=150,F=480,L=250,A=0,P=0,m=0,k=0,q=0,R=aM,U=ih,z=null,j=null;return C.stream=function(a){return N&&(N.valid=!1),N=e4(R(G,D(U(a)))),N.valid=!0,N},C.clipAngle=function(a){return arguments.length?(R=null==a?(z=a,aM):i8((z=+a)*cO),J()):z},C.clipExtent=function(a){return arguments.length?(j=a,U=a?cc(a[0][0],a[0][1],a[1][0],a[1][1]):ih,J()):j},C.scale=function(a){return arguments.length?(K=+a,E()):K},C.translate=function(a){return arguments.length?(F=+a[0],L=+a[1],E()):[F,L]},C.center=function(a){return arguments.length?(A=a[0]%360*cO,P=a[1]%360*cO,E()):[A*cg,P*cg]},C.rotate=function(a){return arguments.length?(m=a[0]%360*cO,k=a[1]%360*cO,q=a.length>2?a[2]%360*cO:0,E()):[m*cg,k*cg,q*cg]},jP.rebind(C,D,"precision"),function(){return B=H.apply(this,arguments),C.invert=B.invert&&O,E()}}function e4(a){return bB(a,function(b,c){a.point(b*cO,c*cO)})}function iC(b,a){return[b,a]}function g5(b,a){return[b>aC?b-jY:-aC>b?b+jY:b,a]}function ck(c,a,b){return c?a||b?bC(dA(c),gN(a,b)):dA(c):a||b?gN(a,b):g5}function gv(a){return function(b,c){return b+=a,[b>aC?b-jY:-aC>b?b+jY:b,c]}}function dA(b){var a=gv(b);return a.invert=gv(-b),a}function gN(h,c){function f(q,k){var o=Math.cos(k),j=Math.cos(q)*o,i=Math.sin(q)*o,p=Math.sin(k),m=p*d+j*b;return[Math.atan2(i*a-m*g,j*d-p*b),bP(m*a+i*g)]}var d=Math.cos(h),b=Math.sin(h),a=Math.cos(c),g=Math.sin(c);return f.invert=function(q,k){var o=Math.cos(k),j=Math.cos(q)*o,i=Math.sin(q)*o,p=Math.sin(k),m=p*a-i*g;return[Math.atan2(i*a+p*g,j*d+m*b),bP(m*d-j*b)]},f}function bb(d,a){var c=Math.cos(d),b=Math.sin(d);return function(j,h,m,g){var e=m*a;null!=j?(j=hO(c,j),h=hO(c,h),(m>0?h>j:j>h)&&(j+=m*jY)):(j=d+m*jY,h=d-0.5*e);for(var n,k=j;m>0?k>h:h>k;k-=e){g.point((n=aj([c,-b*Math.cos(k),-b*Math.sin(k)]))[0],n[1])}}}function hO(d,a){var c=hE(a);c[0]-=d,iU(c);var b=d9(-c[1]);return((-c[2]<0?-b:b)+2*Math.PI-em)%(2*Math.PI)}function kh(d,a,c){var b=jP.range(d,a-em,c).concat(a);return function(e){return b.map(function(f){return[e,f]})}}function eM(d,a,c){var b=jP.range(d,a-em,c).concat(a);return function(e){return b.map(function(f){return[f,e]})}}function g9(a){return a.source}function aw(a){return a.target}function jq(k,C,y,b){var q=Math.cos(C),B=Math.sin(C),j=Math.cos(b),A=Math.sin(b),m=q*Math.cos(k),z=q*Math.sin(k),x=j*Math.cos(y),D=j*Math.sin(y),v=2*Math.asin(Math.sqrt(dK(b-C)+q*j*dK(y-k))),d=1/Math.sin(v),w=v?function(l){var c=Math.sin(l*=v)*d,g=Math.sin(v-l)*d,f=g*m+c*x,a=g*z+c*D,h=g*B+c*A;return[Math.atan2(a,f)*cg,Math.atan2(h,Math.sqrt(f*f+a*a))*cg]}:function(){return[k*cg,C*cg]};return w.distance=v,w}function aE(){function d(k,h){var g=Math.sin(h*=cO),j=Math.cos(h),f=ad((k*=cO)-a),e=Math.cos(f);iN+=Math.atan2(Math.sqrt((f=j*Math.sin(f))*f+(f=b*g-c*j*e)*f),c*g+b*j*e),a=k,c=g,b=j}var a,c,b;ac.point=function(f,e){a=f*cO,c=Math.sin(e*=cO),b=Math.cos(e),ac.point=d},ac.lineEnd=function(){ac.point=ac.lineEnd=iJ}}function aS(c,a){function b(g,j){var h=Math.cos(g),f=Math.cos(j),d=c(h*f);return[d*f*Math.sin(g),d*Math.sin(j)]}return b.invert=function(k,h){var g=Math.sqrt(k*k+h*h),f=a(g),d=Math.sin(f),j=Math.cos(f);return[Math.atan2(k*d,g*j),Math.asin(g&&h*d/g)]},b}function e8(h,c){function f(k,i){g>0?-jh+em>i&&(i=-jh+em):i>jh-em&&(i=jh-em);var j=g/Math.pow(b(i),a);return[j*Math.sin(a*k),g-j*Math.cos(a*k)]}var d=Math.cos(h),b=function(e){return Math.tan(aC/4+e/2)},a=h===c?Math.sin(h):Math.log(d/Math.cos(c))/Math.log(b(c)/b(h)),g=d*Math.pow(b(h),a)/a;return a?(f.invert=function(l,i){var k=g-i,j=jf(a)*Math.sqrt(l*l+k*k);return[Math.atan2(l,k)/a,2*Math.atan(Math.pow(g/j,1/a))-jh]},f):gR}function fv(g,c){function f(j,h){var i=a-h;return[i*Math.sin(b*j),a-i*Math.cos(b*j)]}var d=Math.cos(g),b=g===c?Math.sin(g):(d-Math.cos(c))/(c-g),a=d/b+g;return ad(b)<em?iC:(f.invert=function(j,h){var i=a-h;return[Math.atan2(j,i)/b,a-jf(b)*Math.sqrt(j*j+i*i)]},f)}function gR(b,a){return[b,Math.log(Math.tan(aC/4+a/2))]}function a1(g){var c,f=dS(g),d=f.scale,b=f.translate,a=f.clipExtent;return f.scale=function(){var e=d.apply(f,arguments);return e===f?c?f.clipExtent(null):f:e},f.translate=function(){var e=b.apply(f,arguments);return e===f?c?f.clipExtent(null):f:e},f.clipExtent=function(j){var i=a.apply(f,arguments);if(i===f){if(c=null==j){var h=aC*d(),e=b();a([[e[0]-h,e[1]-h],[e[0]+h,e[1]+h]])}}else{c&&(i=null)}return i},f.clipExtent(null)}function cD(b,a){return[Math.log(Math.tan(aC/4+a/2)),-b]}function bK(a){return a[0]}function jS(a){return a[1]}function hB(f){for(var b=f.length,d=[0,1],c=2,a=2;b>a;a++){for(;c>1&&i1(f[d[c-2]],f[d[c-1]],f[a])<=0;){--c}d[c++]=a}return d.slice(0,c)}function c9(b,a){return b[0]-a[0]||b[1]-a[1]}function eQ(c,a,b){return(b[0]-a[0])*(c[1]-a[1])<(b[1]-a[1])*(c[0]-a[0])}function fz(g,y,q,b){var k=g[0],x=q[0],d=y[0]-k,w=b[0]-x,j=g[1],v=q[1],p=y[1]-j,z=b[1]-v,m=(w*(j-v)-z*(k-x))/(z*d-w*p);return[k+m*d,j+m*p]}function bp(c){var a=c[0],b=c[c.length-1];return !(a[0]-b[0]||a[1]-b[1])}function f8(){cF(this),this.edge=this.site=this.circle=null}function ey(b){var a=ig.pop()||new f8;return a.site=b,a}function fN(a){b3(a),dM.remove(a),ig.push(a),cF(a)}function aJ(g){var w=g.circle,m=w.x,b=w.cy,j={x:m,y:b},v=g.P,d=g.N,q=[g];fN(g);for(var h=v;h.circle&&ad(m-h.circle.x)<em&&ad(b-h.circle.cy)<em;){v=h.P,q.unshift(h),fN(h),h=v}q.unshift(h),b3(h);for(var p=d;p.circle&&ad(m-p.circle.x)<em&&ad(b-p.circle.cy)<em;){d=p.N,q.push(p),fN(p),p=d}q.push(p),b3(p);var k,x=q.length;for(k=1;x>k;++k){p=q[k],h=q[k-1],d6(p.edge,h.site,p.site,j)}h=q[0],p=q[x-1],p.edge=hS(h.site,p.site,null,j),ef(h),ef(p)}function j6(E){for(var z,L,B,H,w=E.x,D=E.y,P=dM._;P;){if(B=gz(P,D)-w,B>em){P=P.L}else{if(H=w-jE(P,D),!(H>em)){B>-em?(z=P.P,L=P):H>-em?(z=P,L=P.N):z=L=P;break}if(!P.R){z=P;break}P=P.R}}var G=ey(E);if(dM.insert(z,G),z||L){if(z===L){return b3(z),L=ey(z.site),dM.insert(G,L),G.edge=L.edge=hS(z.site,G.site),ef(z),void ef(L)}if(!L){return void (G.edge=hS(z.site,G.site))}b3(z),b3(L);var O=z.site,K=O.x,A=O.y,I=E.x-K,C=E.y-A,J=L.site,q=J.x-K,N=J.y-A,j=2*(I*N-C*q),F=I*I+C*C,b=q*q+N*N,k={x:(N*F-C*b)/j+K,y:(I*b-q*F)/j+A};d6(L.edge,O,J,k),G.edge=hS(O,E,null,k),L.edge=hS(E,J,null,k),ef(z),ef(L)}}function gz(g,y){var q=g.site,b=q.x,k=q.y,x=k-y;if(!x){return b}var d=g.P;if(!d){return -(1/0)}q=d.site;var w=q.x,j=q.y,v=j-y;if(!v){return w}var p=w-b,z=1/x-1/v,m=p/v;return z?(-m+Math.sqrt(m*m-2*z*(p*p/(-2*v)-j+v/2+k-x/2)))/z+b:(b+w)/2}function jE(d,a){var c=d.N;if(c){return gz(c,a)}var b=d.site;return b.y===a?b.x:1/0}function cV(a){this.site=a,this.edges=[]}function cy(m){for(var G,A,b,w,F,k,D,q,C,z,H=m[0][0],x=m[1][0],j=m[0][1],y=m[1][1],E=by,B=E.length;B--;){if(F=E[B],F&&F.prepare()){for(D=F.edges,q=D.length,k=0;q>k;){z=D[k].end(),b=z.x,w=z.y,C=D[++k%q].start(),G=C.x,A=C.y,(ad(b-G)>em||ad(w-A)>em)&&(D.splice(k,0,new bM(fR(F.site,z,ad(b-H)<em&&y-w>em?{x:H,y:ad(G-H)<em?A:y}:ad(w-y)<em&&x-b>em?{x:ad(A-y)<em?G:x,y:y}:ad(b-x)<em&&w-j>em?{x:x,y:ad(G-x)<em?A:j}:ad(w-j)<em&&b-H>em?{x:ad(A-j)<em?G:H,y:j}:null),F.site,null)),++q)}}}}function dX(b,a){return a.angle-b.angle}function df(){cF(this),this.x=this.y=this.arc=this.site=this.cy=null}function ef(C){var w=C.P,J=C.N;if(w&&J){var z=w.site,F=C.site,q=J.site;if(z!==q){var B=F.x,N=F.y,E=z.x-B,L=z.y-N,I=q.x-B,x=q.y-N,G=2*(E*x-L*I);if(!(G>=-fE)){var A=E*E+L*L,H=I*I+x*x,k=(x*A-L*H)/G,K=(E*H-I*A)/G,x=K+N,j=gZ.pop()||new df;j.arc=C,j.site=F,j.x=k+B,j.y=x+Math.sqrt(k*k+K*K),j.cy=x,C.circle=j;for(var D=null,b=eY._;b;){if(j.y<b.y||j.y===b.y&&j.x<=b.x){if(!b.L){D=b.P;break}b=b.L}else{if(!b.R){D=b;break}b=b.R}}eY.insert(D,j),D||(jT=j)}}}}function b3(b){var a=b.circle;a&&(a.P||(jT=a.N),eY.remove(a),gZ.push(a),cF(a),b.circle=null)}function dE(f){for(var b,d=fY,c=cL(f[0][0],f[0][1],f[1][0],f[1][1]),a=d.length;a--;){b=d[a],(!iM(b,f)||!c(b)||ad(b.a.x-b.b.x)<em&&ad(b.a.y-b.b.y)<em)&&(b.a=b.b=null,d.splice(a,1))}}function iM(A,m){var G=A.b;if(G){return !0}var w,C,k=A.a,z=m[0][0],J=m[1][0],B=m[0][1],I=m[1][1],F=A.l,q=A.r,D=F.x,x=F.y,E=q.x,j=q.y,H=(D+E)/2,b=(x+j)/2;if(j===x){if(z>H||H>=J){return}if(D>E){if(k){if(k.y>=I){return}}else{k={x:H,y:B}}G={x:H,y:I}}else{if(k){if(k.y<B){return}}else{k={x:H,y:I}}G={x:H,y:B}}}else{if(w=(D-E)/(j-x),C=b-w*H,-1>w||w>1){if(D>E){if(k){if(k.y>=I){return}}else{k={x:(B-C)/w,y:B}}G={x:(I-C)/w,y:I}}else{if(k){if(k.y<B){return}}else{k={x:(I-C)/w,y:I}}G={x:(B-C)/w,y:B}}}else{if(j>x){if(k){if(k.x>=J){return}}else{k={x:z,y:w*z+C}}G={x:J,y:w*J+C}}else{if(k){if(k.x<z){return}}else{k={x:J,y:w*J+C}}G={x:z,y:w*z+C}}}}return A.a=k,A.b=G,!0}function kx(b,a){this.l=b,this.r=a,this.a=this.b=null}function hS(f,b,d,c){var a=new kx(f,b);return fY.push(a),d&&d6(a,f,b,d),c&&d6(a,b,f,c),by[f.i].edges.push(new bM(a,f,b)),by[b.i].edges.push(new bM(a,b,f)),a}function fR(d,a,c){var b=new kx(d,null);return b.a=a,b.b=c,fY.push(b),b}function d6(d,a,c,b){d.a||d.b?d.l===c?d.b=b:d.a=b:(d.a=b,d.l=a,d.r=c)}function bM(f,b,d){var c=f.a,a=f.b;this.edge=f,this.site=b,this.angle=d?Math.atan2(d.y-b.y,d.x-b.x):f.l===b?Math.atan2(a.x-c.x,c.y-a.y):Math.atan2(c.x-a.x,a.y-c.y)}function hf(){this._=null}function cF(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function fV(f,b){var d=b,c=b.R,a=d.U;a?a.L===d?a.L=c:a.R=c:f._=c,c.U=a,d.U=c,d.R=c.L,d.R&&(d.R.U=d),c.L=d}function bs(f,b){var d=b,c=b.L,a=d.U;a?a.L===d?a.L=c:a.R=c:f._=c,c.U=a,d.U=c,d.L=c.R,d.L&&(d.L.U=d),c.R=d}function dI(a){for(;a.L;){a=a.L}return a}function jN(h,c){var f,d,b,a=h.sort(eU).pop();for(fY=[],by=new Array(h.length),dM=new hf,eY=new hf;;){if(b=jT,a&&(!b||a.y<b.y||a.y===b.y&&a.x<b.x)){a.x===f&&a.y===d||(by[a.i]=new cV(a),j6(a),f=a.x,d=a.y),a=h.pop()}else{if(!b){break}aJ(b.arc)}}c&&(dE(c),cy(c));var g={cells:by,edges:fY};return dM=eY=fY=by=null,g}function eU(b,a){return a.y-b.y||a.x-b.x}function h4(c,a,b){return(c.x-b.x)*(a.y-c.y)-(c.x-a.x)*(b.y-c.y)}function gV(a){return a.x}function b5(a){return a.y}function gd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dk(d,m,h,b,g,k){if(!d(m,h,b,g,k)){var c=0.5*(h+g),j=0.5*(b+k),f=m.nodes;f[0]&&dk(d,f[0],h,b,c,j),f[1]&&dk(d,f[1],c,b,g,j),f[2]&&dk(d,f[2],h,j,c,k),f[3]&&dk(d,f[3],c,j,g,k)}}function gD(f,q,j,b,h,p,d){var m,g=1/0;return function k(c,t,G,o,a){if(!(t>p||G>d||b>o||h>a)){if(r=c.point){var r,F=q-c.x,z=j-c.y,B=F*F+z*z;if(g>B){var e=Math.sqrt(g=B);b=q-e,h=j-e,p=q+e,d=j+e,m=r}}for(var u=c.nodes,C=0.5*(t+o),A=0.5*(G+a),E=q>=C,D=j>=A,l=D<<1|E,i=l+4;i>l;++l){if(c=u[3&l]){switch(3&l){case 0:k(c,t,G,C,A);break;case 1:k(c,C,G,o,A);break;case 2:k(c,t,A,C,a);break;case 3:k(c,C,A,o,a)}}}}}(f,b,h,p,d),m}function a3(k,f){k=jP.rgb(k),f=jP.rgb(f);var h=k.r,g=k.g,d=k.b,c=f.r-h,j=f.g-g,b=f.b-d;return function(a){return"#"+i3(Math.round(h+c*a))+i3(Math.round(g+j*a))+i3(Math.round(d+b*a))}}function hF(f,b){var d,c={},a={};for(d in f){d in b?c[d]=g1(f[d],b[d]):a[d]=f[d]}for(d in b){d in f||(a[d]=b[d])}return function(e){for(d in c){a[d]=c[d](e)}return a}}function j8(b,a){return b=+b,a=+a,function(c){return b*(1-c)+a*c}}function eC(d,m){var h,b,g,k=gj.lastIndex=ds.lastIndex=0,c=-1,j=[],f=[];for(d+="",m+="";(h=gj.exec(d))&&(b=ds.exec(m));){(g=b.index)>k&&(g=m.slice(k,g),j[c]?j[c]+=g:j[++c]=g),(h=h[0])===(b=b[0])?j[c]?j[c]+=b:j[++c]=b:(j[++c]=null,f.push({i:c,x:j8(h,b)})),k=ds.lastIndex}return k<m.length&&(g=m.slice(k),j[c]?j[c]+=g:j[++c]=g),j.length<2?f[0]?(m=f[0].x,function(a){return m(a)+""}):function(){return m}:(m=f.length,function(l){for(var i,a=0;m>a;++a){j[(i=f[a]).i]=i.x(l)}return j.join("")})}function g1(d,a){for(var c,b=jP.interpolators.length;--b>=0&&!(c=jP.interpolators[b](d,a));){}return c}function ab(k,f){var h,g=[],d=[],c=k.length,j=f.length,b=Math.min(k.length,f.length);for(h=0;b>h;++h){g.push(g1(k[h],f[h]))}for(;c>h;++h){d[h]=k[h]}for(;j>h;++h){d[h]=f[h]}return function(a){for(h=0;b>h;++h){d[h]=g[h](a)}return d}}function iX(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function ak(a){return function(b){return 1-a(1-b)}}function aL(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function e0(a){return a*a}function fd(a){return a*a*a}function gJ(c){if(0>=c){return 0}if(c>=1){return 1}var a=c*c,b=a*c;return 4*(0.5>c?b:3*(c-a)+b-0.75)}function aU(a){return function(b){return Math.pow(b,a)}}function cq(a){return 1-Math.cos(a*jh)}function bD(a){return Math.pow(2,10*(a-1))}function jG(a){return 1-Math.sqrt(1-a*a)}function hp(c,a){var b;return arguments.length<2&&(a=0.45),arguments.length?b=a/jY*Math.asin(1/c):(c=1,b=a/4),function(d){return 1+c*Math.pow(2,-10*d)*Math.sin((d-b)*jY/a)}}function cZ(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function eI(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function fm(k,f){k=jP.hcl(k),f=jP.hcl(f);var h=k.h,g=k.c,d=k.l,c=f.h-h,j=f.c-g,b=f.l-d;return isNaN(j)&&(j=0,g=isNaN(g)?f.c:g),isNaN(c)?(c=0,h=isNaN(h)?f.h:h):c>180?c-=360:-180>c&&(c+=360),function(a){return b8(h+c*a,g+j*a,d+b*a)+""}}function bd(k,f){k=jP.hsl(k),f=jP.hsl(f);var h=k.h,g=k.s,d=k.l,c=f.h-h,j=f.s-g,b=f.l-d;return isNaN(j)&&(j=0,g=isNaN(g)?f.s:g),isNaN(c)?(c=0,h=isNaN(h)?f.h:h):c>180?c-=360:-180>c&&(c+=360),function(a){return ib(h+c*a,g+j*a,d+b*a)+""}}function f0(k,f){k=jP.lab(k),f=jP.lab(f);var h=k.l,g=k.a,d=k.b,c=f.l-h,j=f.a-g,b=f.b-d;return function(a){return dp(h+c*a,g+j*a,d+b*a)+""}}function eh(b,a){return a-=b,function(c){return Math.round(b+a*c)}}function fD(g){var c=[g.a,g.b],f=[g.c,g.d],d=jV(c),b=az(c,f),a=jV(gm(f,c,-b))||0;c[0]*f[1]<f[0]*c[1]&&(c[0]*=-1,c[1]*=-1,d*=-1,b*=-1),this.rotate=(d?Math.atan2(c[1],c[0]):Math.atan2(-f[0],f[1]))*cg,this.translate=[g.e,g.f],this.scale=[d,a],this.skew=a?Math.atan2(b,a)*cg:0}function az(b,a){return b[0]*a[0]+b[1]*a[1]}function jV(b){var a=Math.sqrt(az(b,b));return a&&(b[0]/=a,b[1]/=a),a}function gm(c,a,b){return c[0]+=b*a[0],c[1]+=b*a[1],c}function jc(a){return a.length?a.pop()+",":""}function cM(f,b,d,c){if(f[0]!==b[0]||f[1]!==b[1]){var a=d.push("translate(",null,",",null,")");c.push({i:a-4,x:j8(f[0],b[0])},{i:a-2,x:j8(f[1],b[1])})}else{(b[0]||b[1])&&d.push("translate("+b+")")}}function cd(d,a,c,b){d!==a?(d-a>180?a+=360:a-d>180&&(d+=360),b.push({i:c.push(jc(c)+"rotate(",null,")")-2,x:j8(d,a)})):a&&c.push(jc(c)+"rotate("+a+")")}function dO(d,a,c,b){d!==a?b.push({i:c.push(jc(c)+"skewX(",null,")")-2,x:j8(d,a)}):a&&c.push(jc(c)+"skewX("+a+")")}function c5(f,b,d,c){if(f[0]!==b[0]||f[1]!==b[1]){var a=d.push(jc(d)+"scale(",null,",",null,")");c.push({i:a-4,x:j8(f[0],b[0])},{i:a-2,x:j8(f[1],b[1])})}else{1===b[0]&&1===b[1]||d.push(jc(d)+"scale("+b+")")}}function dZ(d,a){var c=[],b=[];return d=jP.transform(d),a=jP.transform(a),cM(d.translate,a.translate,c,b),cd(d.rotate,a.rotate,c,b),dO(d.skew,a.skew,c,b),c5(d.scale,a.scale,c,b),d=a=null,function(h){for(var g,f=-1,e=b.length;++f<e;){c[(g=b[f]).i]=g.x(h)}return c.join("")}}function bW(b,a){return a=(a-=b=+b)||1/a,function(c){return(c-b)/a}}function dw(b,a){return a=(a-=b=+b)||1/a,function(c){return Math.max(0,Math.min(1,(c-b)/a))}}function ip(g){for(var c=g.source,f=g.target,d=hK(c,f),b=[c];c!==d;){c=c.parent,b.push(c)}for(var a=b.length;f!==d;){b.splice(a,0,f),f=f.parent}return b}function kk(c){for(var a=[],b=c.parent;null!=b;){a.push(c),c=b,b=b.parent}return a.push(c),a}function hK(h,c){if(h===c){return h}for(var f=kk(h),d=kk(c),b=f.pop(),a=d.pop(),g=null;b===a;){g=b,b=f.pop(),a=d.pop()}return g}function fJ(a){a.fixed|=2}function ej(a){a.fixed&=-7}function bR(a){a.fixed|=4,a.px=a.x,a.py=a.y}function hq(a){a.fixed&=-5}function cN(f,q,j){var b=0,h=0;if(f.charge=0,!f.leaf){for(var p,d=f.nodes,m=d.length,g=-1;++g<m;){p=d[g],null!=p&&(cN(p,q,j),f.charge+=p.charge,b+=p.charge*p.cx,h+=p.charge*p.cy)}}if(f.point){f.leaf||(f.point.x+=Math.random()-0.5,f.point.y+=Math.random()-0.5);var k=q*j[f.point.index];f.charge+=f.pointCharge=k,b+=k*f.point.x,h+=k*f.point.y}f.cx=b/f.charge,f.cy=h/f.charge}function f1(b,a){return jP.rebind(b,a,"sort","children","value"),b.nodes=b,b.links=g2,b}function bz(f,b){for(var d=[f];null!=(f=d.pop());){if(b(f),(a=f.children)&&(c=a.length)){for(var c,a;--c>=0;){d.push(a[c])}}}}function dP(h,c){for(var f=[h],d=[];null!=(h=f.pop());){if(d.push(h),(a=h.children)&&(b=a.length)){for(var b,a,g=-1;++g<b;){f.push(a[g])}}}for(;null!=(h=d.pop());){c(h)}}function jX(a){return a.children}function e1(a){return a.value}function iv(b,a){return a.value-b.value}function g2(a){return jP.merge(a.map(function(b){return(b.children||[]).map(function(c){return{source:b,target:c}})}))}function cf(a){return a.x}function gp(a){return a.y}function dx(c,a,b){c.y0=a,c.y=b}function gK(a){return jP.range(a.length)}function a8(d){for(var a=-1,c=d[0].length,b=[];++a<c;){b[a]=0}return b}function hL(g){for(var c,f=1,d=0,b=g[0][1],a=g.length;a>f;++f){(c=g[f][1])>b&&(d=f,b=c)}return d}function kf(a){return a.reduce(eJ,0)}function eJ(b,a){return b+a[1]}function g8(b,a){return am(b,Math.ceil(Math.log(a.length)/Math.LN2+1))}function am(g,c){for(var f=-1,d=+g[0],b=(g[1]-d)/c,a=[];++f<=c;){a[f]=b*f+d}return a}function jd(a){return[jP.min(a),jP.max(a)]}function aB(b,a){return b.value-a.value}function aQ(c,a){var b=c._pack_next;c._pack_next=a,a._pack_prev=c,a._pack_next=b,b._pack_prev=a}function e7(b,a){b._pack_next=a,a._pack_prev=b}function fp(f,b){var d=b.x-f.x,c=b.y-f.y,a=f.r+b.r;return 0.999*a*a>d*d+c*c}function gQ(C){function w(a){I=Math.min(a.x-a.r,I),x=Math.max(a.x+a.r,x),G=Math.min(a.y-a.r,G),A=Math.max(a.y+a.r,A)}if((J=C.children)&&(L=J.length)){var J,z,F,q,B,N,E,L,I=1/0,x=-(1/0),G=1/0,A=-(1/0);if(J.forEach(aZ),z=J[0],z.x=-z.r,z.y=0,w(z),L>1&&(F=J[1],F.x=F.r,F.y=0,w(F),L>2)){for(q=J[2],jO(z,F,q),w(q),aQ(z,q),z._pack_prev=q,aQ(q,F),F=z._pack_next,B=3;L>B;B++){jO(z,F,q=J[B]);var H=0,k=1,K=1;for(N=F._pack_next;N!==F;N=N._pack_next,k++){if(fp(N,q)){H=1;break}}if(1==H){for(E=z._pack_prev;E!==N._pack_prev&&!fp(E,q);E=E._pack_prev,K++){}}H?(K>k||k==K&&F.r<z.r?e7(z,F=N):e7(z=E,F),B--):(aQ(z,q),F=q,w(q))}}var j=(I+x)/2,D=(G+A)/2,b=0;for(B=0;L>B;B++){q=J[B],q.x-=j,q.y-=D,b=Math.max(b,q.r+Math.sqrt(q.x*q.x+q.y*q.y))}C.r=b,J.forEach(cB)}}function aZ(a){a._pack_next=a._pack_prev=a}function cB(a){delete a._pack_next,delete a._pack_prev}function bI(h,c,f,d){var b=h.children;if(h.x=c+=d*h.x,h.y=f+=d*h.y,h.r*=d,b){for(var a=-1,g=b.length;++a<g;){bI(b[a],c,f,d)}}}function jO(f,q,j){var b=f.r+j.r,h=q.x-f.x,p=q.y-f.y;if(b&&(h||p)){var d=q.r+j.r,m=h*h+p*p;d*=d,b*=b;var g=0.5+(b-d)/(2*m),k=Math.sqrt(Math.max(0,2*d*(b+m)-(b-=m)*b-d*d))/(2*m);j.x=f.x+g*h+k*p,j.y=f.y+g*p-k*h}else{j.x=f.x+b,j.y=f.y}}function hA(b,a){return b.parent==a.parent?1:2}function c6(b){var a=b.children;return a.length?a[0]:b.t}function eP(c){var a,b=c.children;return(a=b.length)?b[a-1]:c.t}function fy(d,a,c){var b=c/(a.i-d.i);a.c-=b,a.s+=c,d.c+=b,a.z+=c,a.m+=c}function bk(g){for(var c,f=0,d=0,b=g.children,a=b.length;--a>=0;){c=b[a],c.z+=f,c.m+=f,f+=c.s+(d+=c.c)}}function f7(c,a,b){return c.a.parent===a.parent?c.a:b}function ex(a){return 1+jP.max(a,function(b){return b.y})}function fK(a){return a.reduce(function(c,b){return c+b.x},0)/a.length}function aH(b){var a=b.children;return a&&a.length?aH(a[0]):b}function j3(c){var a,b=c.children;return b&&(a=b.length)?j3(b[a-1]):c}function gy(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function jz(g,c){var f=g.x+c[3],d=g.y+c[0],b=g.dx-c[1]-c[3],a=g.dy-c[0]-c[2];return 0>b&&(f+=b/2,b=0),0>a&&(d+=a/2,a=0),{x:f,y:d,dx:b,dy:a}}function cU(c){var a=c[0],b=c[c.length-1];return b>a?[a,b]:[b,a]}function cv(a){return a.rangeExtent?a.rangeExtent():cU(a.range())}function dV(g,c,f,d){var b=f(g[0],g[1]),a=d(c[0],c[1]);return function(e){return a(b(e))}}function dd(h,c){var f,d=0,b=h.length-1,a=h[d],g=h[b];return a>g&&(f=d,d=b,b=f,f=a,a=g,g=f),h[d]=c.floor(a),h[b]=c.ceil(g),h}function d7(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:e5}function b1(k,f,h,g){var d=[],c=[],j=0,b=Math.min(k.length,f.length)-1;for(k[b]<k[0]&&(k=k.slice().reverse(),f=f.slice().reverse());++j<=b;){d.push(h(k[j-1],k[j])),c.push(g(f[j-1],f[j]))}return function(a){var i=jP.bisect(k,a,1,b)-1;return c[i](d[i](a))}}function dD(k,f,h,g){function d(){var e=Math.min(k.length,f.length)>2?b1:dV,a=g?dw:bW;return j=e(k,f,a,h),b=e(f,k,a,g1),c}function c(a){return j(a)}var j,b;return c.invert=function(a){return b(a)},c.domain=function(a){return arguments.length?(k=a.map(Number),d()):k},c.range=function(a){return arguments.length?(f=a,d()):f},c.rangeRound=function(a){return c.range(a).interpolate(eh)},c.clamp=function(a){return arguments.length?(g=a,d()):g},c.interpolate=function(a){return arguments.length?(h=a,d()):h},c.ticks=function(a){return fQ(k,a)},c.tickFormat=function(a,i){return d2(k,a,i)},c.nice=function(a){return kv(k,a),d()},c.copy=function(){return dD(k,f,h,g)},d()}function iI(b,a){return jP.rebind(b,a,"range","rangeRound","interpolate","clamp")}function kv(b,a){return dd(b,d7(hR(b,a)[2])),dd(b,d7(hR(b,a)[2])),b}function hR(g,c){null==c&&(c=10);var f=cU(g),d=f[1]-f[0],b=Math.pow(10,Math.floor(Math.log(d/c)/Math.LN10)),a=c/d*b;return 0.15>=a?b*=10:0.35>=a?b*=5:0.75>=a&&(b*=2),f[0]=Math.ceil(f[0]/b)*b,f[1]=Math.floor(f[1]/b)*b+0.5*b,f[2]=b,f}function fQ(b,a){return jP.range.apply(jP,hR(b,a))}function d2(g,c,f){var d=hR(g,c);if(f){var b=gx.exec(f);if(b.shift(),"s"===b[8]){var a=jP.formatPrefix(Math.max(ad(d[0]),ad(d[1])));return b[7]||(b[7]="."+bJ(a.scale(d[2]))),b[8]="f",f=jP.format(b.join("")),function(e){return f(a.scale(e))+a.symbol}}b[7]||(b[7]="."+hc(b[8],d)),f=b.join("")}else{f=",."+bJ(d[2])+"f"}return jP.format(f)}function bJ(a){return -Math.floor(Math.log(a)/Math.LN10+0.01)}function hc(c,a){var b=bJ(a[2]);return c in fj?Math.abs(b-bJ(Math.max(ad(a[0]),ad(a[1]))))+ +("e"!==c):b-2*("%"===c)}function cC(h,c,f,d){function b(e){return(f?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(c)}function a(e){return f?Math.pow(c,e):-Math.pow(c,-e)}function g(e){return h(b(e))}return g.invert=function(e){return a(h.invert(e))},g.domain=function(e){return arguments.length?(f=e[0]>=0,h.domain((d=e.map(Number)).map(b)),g):d},g.base=function(i){return arguments.length?(c=+i,h.domain(d.map(b)),g):c},g.nice=function(){var e=dd(d.map(b),f?Math:aY);return h.domain(e),d=e.map(a),g},g.ticks=function(){var r=cU(d),p=[],i=r[0],e=r[1],q=Math.floor(b(i)),m=Math.ceil(b(e)),k=c%1?2:c;if(isFinite(m-q)){if(f){for(;m>q;q++){for(var j=1;k>j;j++){p.push(a(q)*j)}}p.push(a(q))}else{for(p.push(a(q));q++<m;){for(var j=k-1;j>0;j--){p.push(a(q)*j)}}}for(q=0;p[q]<i;q++){}for(m=p.length;p[m-1]>e;m--){}p=p.slice(q,m)}return p},g.tickFormat=function(k,j){if(!arguments.length){return gO}arguments.length<2?j=gO:"function"!=typeof j&&(j=jP.format(j));var i=Math.max(1,c*k/g.ticks().length);return function(l){var e=l/a(Math.round(b(l)));return c-0.5>e*c&&(e*=c),i>=e?j(l):""}},g.copy=function(){return cC(h.copy(),c,f,d)},iI(g,h)}function fT(g,c,f){function d(e){return g(b(e))}var b=bm(c),a=bm(1/c);return d.invert=function(e){return a(g.invert(e))},d.domain=function(e){return arguments.length?(g.domain((f=e.map(Number)).map(b)),d):f},d.ticks=function(e){return fQ(f,e)},d.tickFormat=function(h,e){return d2(f,h,e)},d.nice=function(e){return d.domain(kv(f,e))},d.exponent=function(e){return arguments.length?(b=bm(c=e),a=bm(1/c),g.domain(f.map(b)),d):c},d.copy=function(){return fT(g.copy(),c,f)},iI(d,g)}function bm(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function dG(h,c){function f(i){return a[((b.get(i)||("range"===c.t?b.set(i,h.push(i)):NaN))-1)%a.length]}function d(i,j){return jP.range(h.length).map(function(e){return i+j*e})}var b,a,g;return f.domain=function(j){if(!arguments.length){return h}h=[],b=new iG;for(var i,k=-1,e=j.length;++k<e;){b.has(i=j[k])||b.set(i,h.push(i))}return f[c.t].apply(f,c.a)},f.range=function(e){return arguments.length?(a=e,g=0,c={t:"range",a:arguments},f):a},f.rangePoints=function(k,j){arguments.length<2&&(j=0);var e=k[0],n=k[1],m=h.length<2?(e=(e+n)/2,0):(n-e)/(h.length-1+j);return a=d(e+m*j/2,m),g=0,c={t:"rangePoints",a:arguments},f},f.rangeRoundPoints=function(k,j){arguments.length<2&&(j=0);var e=k[0],n=k[1],m=h.length<2?(e=n=Math.round((e+n)/2),0):(n-e)/(h.length-1+j)|0;return a=d(e+Math.round(m*j/2+(n-e-(h.length-1+j)*m)/2),m),g=0,c={t:"rangeRoundPoints",a:arguments},f},f.rangeBands=function(k,j,e){arguments.length<2&&(j=0),arguments.length<3&&(e=j);var p=k[1]<k[0],o=k[p-0],n=k[1-p],m=(n-o)/(h.length-j+2*e);return a=d(o+m*e,m),p&&a.reverse(),g=m*(1-j),c={t:"rangeBands",a:arguments},f},f.rangeRoundBands=function(k,j,e){arguments.length<2&&(j=0),arguments.length<3&&(e=j);var p=k[1]<k[0],o=k[p-0],n=k[1-p],m=Math.floor((n-o)/(h.length-j+2*e));return a=d(o+Math.round((n-o-(h.length-j)*m)/2),m),p&&a.reverse(),g=Math.round(m*(1-j)),c={t:"rangeRoundBands",a:arguments},f},f.rangeBand=function(){return g},f.rangeExtent=function(){return cU(c.a[0])},f.copy=function(){return dG(h,c)},f.domain(h)}function jK(f,d){function c(){var g=0,a=d.length;for(b=[];++g<a;){b[g-1]=jP.quantile(f,g/a)}return e}function e(a){return isNaN(a=+a)?void 0:d[jP.bisect(b,a)]}var b;return e.domain=function(a){return arguments.length?(f=a.map(h5).filter(iw).sort(iE),c()):f},e.range=function(a){return arguments.length?(d=a,c()):d},e.quantiles=function(){return b},e.invertExtent=function(a){return a=d.indexOf(a),0>a?[NaN,NaN]:[a>0?b[a-1]:f[0],a<b.length?b[a]:f[f.length-1]]},e.copy=function(){return jK(f,d)},c()}function eS(h,c,f){function d(e){return f[Math.max(0,Math.min(g,Math.floor(a*(e-h))))]}function b(){return a=f.length/(c-h),g=f.length-1,d}var a,g;return d.domain=function(i){return arguments.length?(h=+i[0],c=+i[i.length-1],b()):[h,c]},d.range=function(e){return arguments.length?(f=e,b()):f},d.invertExtent=function(e){return e=f.indexOf(e),e=0>e?NaN:e/a+h,[e,e+1/a]},d.copy=function(){return eS(h,c,f)},b()}function hY(c,a){function b(d){return d>=d?a[jP.bisect(c,d)]:void 0}return b.domain=function(d){return arguments.length?(c=d,b):c},b.range=function(d){return arguments.length?(a=d,b):a},b.invertExtent=function(d){return d=a.indexOf(d),[c[d-1],c[d]]},b.copy=function(){return hY(c,a)},b}function gT(b){function a(c){return +c}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(b=c.map(a),a):b},a.ticks=function(c){return fQ(b,c)},a.tickFormat=function(c,d){return d2(b,c,d)},a.copy=function(){return gT(b)},a}function b2(){return 0}function gb(a){return a.innerRadius}function dh(a){return a.outerRadius}function gB(a){return a.startAngle}function a0(a){return a.endAngle}function hD(a){return a&&a.padAngle}function j5(d,a,c,b){return(d-c)*a-(a-b)*d>0?0:1}function eA(T,J,ae,O,X){var H=T[0]-J[0],R=T[1]-J[1],ao=(X?O:-O)/Math.sqrt(H*H+R*R),V=ao*R,al=-ao*H,aa=T[0]+V,K=T[1]+al,Y=J[0]+V,Q=J[1]+al,Z=(aa+Y)/2,G=(K+Q)/2,ai=Y-aa,B=Q-K,U=ai*ai+B*B,z=ae-O,D=aa*Q-Y*K,an=(0>B?-1:1)*Math.sqrt(Math.max(0,z*z*U-D*D)),ar=(D*B-ai*an)/U,F=(-D*ai-B*an)/U,j=(D*B+ai*an)/U,W=(-D*ai+B*an)/U,q=ar-Z,I=F-G,P=j-Z,L=W-G;return q*q+I*I>P*P+L*L&&(ar=j,F=W),[[ar-V,F-al],[ar*ae/z,F*ae/z]]}function gY(k){function f(u){function e(){r.push("M",c(k(q),b))}for(var i,r=[],q=[],v=-1,m=u.length,a=aX(h),n=aX(g);++v<m;){d.call(this,i=u[v],v)?q.push([+a.call(this,i,v),+n.call(this,i,v)]):q.length&&(e(),q=[])}return q.length&&e(),r.length?r.join(""):null}var h=bK,g=jS,d=jF,c=kw,j=c.key,b=0.7;return f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(g=a,f):g},f.defined=function(a){return arguments.length?(d=a,f):d},f.interpolate=function(a){return arguments.length?(j="function"==typeof a?c=a:(c=eN.get(a)||kw).key,f):j},f.tension=function(a){return arguments.length?(b=a,f):b},f}function kw(a){return a.length>1?a.join("L"):a+"Z"}function iR(a){return a.join("L")+"Z"}function ag(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("H",(c[0]+(c=f[b])[0])/2,"V",c[1])}return d>1&&a.push("H",c[0]),a.join("")}function aI(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("V",(c=f[b])[1],"H",c[0])}return a.join("")}function eX(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("H",(c=f[b])[0],"V",c[1])}return a.join("")}function fb(b,a){return b.length<4?kw(b):b[1]+cj(b.slice(1,-1),bA(b,a))}function gG(b,a){return b.length<3?iR(b):b[0]+cj((b.push(b[0]),b),bA([b[b.length-2]].concat(b,[b[1]]),a))}function aR(b,a){return b.length<3?kw(b):b[0]+cj(b,bA(b,a))}function cj(g,v){if(v.length<1||g.length!=v.length&&g.length!=v.length+2){return kw(g)}var m=g.length!=v.length,b="",j=g[0],s=g[1],d=v[0],q=d,h=1;if(m&&(b+="Q"+(s[0]-2*d[0]/3)+","+(s[1]-2*d[1]/3)+","+s[0]+","+s[1],j=g[1],h=2),v.length>1){q=v[1],s=g[h],h++,b+="C"+(j[0]+d[0])+","+(j[1]+d[1])+","+(s[0]-q[0])+","+(s[1]-q[1])+","+s[0]+","+s[1];for(var p=2;p<v.length;p++,h++){s=g[h],q=v[p],b+="S"+(s[0]-q[0])+","+(s[1]-q[1])+","+s[0]+","+s[1]}}if(m){var k=g[h];b+="Q"+(s[0]+2*q[0]/3)+","+(s[1]+2*q[1]/3)+","+k[0]+","+k[1]}return b}function bA(d,m){for(var h,b=[],g=(1-m)/2,k=d[0],c=d[1],j=1,f=d.length;++j<f;){h=k,k=c,c=d[j],b.push([g*(c[0]-h[0]),g*(c[1]-h[1])])}return b}function jD(d){if(d.length<3){return kw(d)}var m=1,h=d.length,b=d[0],g=b[0],k=b[1],c=[g,g,g,(b=d[1])[0]],j=[k,k,k,b[1]],f=[g,",",k,"L",fh(f5,c),",",fh(f5,j)];for(d.push(d[h-1]);++m<=h;){b=d[m],c.shift(),c.push(b[0]),j.shift(),j.push(b[1]),a9(f,c,j)}return d.pop(),f.push("L",b),f.join("")}function hj(h){if(h.length<4){return kw(h)}for(var c,f=[],d=-1,b=h.length,a=[0],g=[0];++d<3;){c=h[d],a.push(c[0]),g.push(c[1])}for(f.push(fh(f5,a)+","+fh(f5,g)),--d;++d<b;){c=h[d],a.shift(),a.push(c[0]),g.shift(),g.push(c[1]),a9(f,a,g)}return f.join("")}function cX(k){for(var f,h,g=-1,d=k.length,c=d+4,j=[],b=[];++g<4;){h=k[g%d],j.push(h[0]),b.push(h[1])}for(f=[fh(f5,j),",",fh(f5,b)],--g;++g<c;){h=k[g%d],j.shift(),j.push(h[0]),b.shift(),b.push(h[1]),a9(f,j,b)}return f.join("")}function eF(f,q){var j=f.length-1;if(j){for(var b,h,p=f[0][0],d=f[0][1],m=f[j][0]-p,g=f[j][1]-d,k=-1;++k<=j;){b=f[k],h=k/j,b[0]=q*b[0]+(1-q)*(p+h*m),b[1]=q*b[1]+(1-q)*(d+h*g)}}return jD(f)}function fh(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]}function a9(c,a,b){c.push("C",fh(fw,a),",",fh(fw,b),",",fh(bj,a),",",fh(bj,b),",",fh(f5,a),",",fh(f5,b))}function fX(b,a){return(a[1]-b[1])/(a[0]-b[0])}function eb(h){for(var c=0,f=h.length-1,d=[],b=h[0],a=h[1],g=d[0]=fX(b,a);++c<f;){d[c]=(g+(g=fX(b=a,a=h[c+1])))/2}return d[c]=g,d}function fB(d){for(var m,h,b,g,k=[],c=eb(d),j=-1,f=d.length-1;++j<f;){m=fX(d[j],d[j+1]),ad(m)<em?c[j]=c[j+1]=0:(h=c[j]/m,b=c[j+1]/m,g=h*h+b*b,g>9&&(g=3*m/Math.sqrt(g),c[j]=g*h,c[j+1]=g*b))}for(j=-1;++j<=f;){g=(d[Math.min(f,j+1)][0]-d[Math.max(0,j-1)][0])/(6*(1+c[j]*c[j])),k.push([g||0,c[j]*g||0])}return k}function av(a){return a.length<3?kw(a):a[0]+cj(a,fB(a))}function jR(g){for(var c,f,d,b=-1,a=g.length;++b<a;){c=g[b],f=c[0],d=c[1]-jh,c[0]=f*Math.cos(d),c[1]=f*Math.sin(d)}return g}function gh(g){function w(C){function e(){B.push("M",q(g(s),x),k,p(g(o.reverse()),x),"Z")}for(var f,a,i,B=[],o=[],s=[],c=-1,n=C.length,u=aX(m),r=aX(j),A=m===b?function(){return a}:aX(b),z=j===v?function(){return i}:aX(v);++c<n;){d.call(this,f=C[c],c)?(o.push([a=+u.call(this,f,c),i=+r.call(this,f,c)]),s.push([+A.call(this,f,c),+z.call(this,f,c)])):o.length&&(e(),o=[],s=[])}return o.length&&e(),B.length?B.join(""):null}var m=bK,b=bK,j=0,v=jS,d=jF,q=kw,h=q.key,p=q,k="L",x=0.7;return w.x=function(a){return arguments.length?(m=b=a,w):b},w.x0=function(a){return arguments.length?(m=a,w):m},w.x1=function(a){return arguments.length?(b=a,w):b},w.y=function(a){return arguments.length?(j=v=a,w):v},w.y0=function(a){return arguments.length?(j=a,w):j},w.y1=function(a){return arguments.length?(v=a,w):v},w.defined=function(a){return arguments.length?(d=a,w):d},w.interpolate=function(a){return arguments.length?(h="function"==typeof a?q=a:(q=eN.get(a)||kw).key,p=q.reverse||q,k=q.closed?"M":"L",w):h},w.tension=function(a){return arguments.length?(x=a,w):x},w}function i4(a){return a.radius}function cJ(a){return[a.x,a.y]}function b9(a){return function(){var b=a.apply(this,arguments),d=b[0],c=b[1]-jh;return[d*Math.cos(c),d*Math.sin(c)]}}function dL(){return 64}function c2(){return"circle"}function dW(b){var a=Math.sqrt(b/aC);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function bS(a){return function(){var b,d,c;(b=this[a])&&(c=b[d=b.active])&&(c.timer.c=null,c.timer.t=NaN,--b.count?delete b[d]:delete this[a],b.active+=0.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function dq(c,a,b){return ff(c,cR),c.namespace=a,c.id=b,c}function ic(g,c,f,d){var b=g.id,a=g.namespace;return iP(g,"function"==typeof f?function(i,h,e){i[a][b].tween.set(c,d(f.call(i,i.__data__,h,e)))}:(f=d(f),function(e){e[a][b].tween.set(c,f)}))}function kg(a){return null==a&&(a=""),function(){this.textContent=a}}function hH(a){return null==a?"__transition__":"__transition_"+a+"__"}function fG(j,C,y,b,m){function B(e){var a=A.delay;return x.t=a+k,e>=a?d(e-a):void (x.c=d)}function d(g){var f=w.active,a=w[f];a&&(a.timer.c=null,a.timer.t=NaN,--w.count,delete w[f],a.event&&a.event.interrupt.call(j,j.__data__,a.index));for(var h in w){if(b>+h){var l=w[h];l.timer.c=null,l.timer.t=NaN,--w.count,delete w[h]}}x.c=z,c1(function(){return x.c&&z(g||1)&&(x.c=null,x.t=NaN),1},0,k),w.active=b,A.event&&A.event.start.call(j,j.__data__,C),c=[],A.tween.forEach(function(n,i){(i=i.call(j,j.__data__,C))&&c.push(i)}),q=A.ease,D=A.duration}function z(g){for(var f=g/D,h=q(f),e=c.length;e>0;){c[--e].call(j,h)}return f>=1?(A.event&&A.event.end.call(j,j.__data__,C),--w.count?delete w[b]:delete j[y],1):void 0}var k,x,D,q,c,w=j[y]||(j[y]={active:0,count:0}),A=w[b];A||(k=m.time,x=c1(B,0,k),A=w[b]={tween:new iG,time:k,timer:x,delay:m.delay,duration:m.duration,ease:m.ease,index:C},m=null,++w.count)}function d8(c,a,b){c.attr("transform",function(e){var d=a(e);return"translate("+(isFinite(d)?d:b(e))+",0)"})}function bO(c,a,b){c.attr("transform",function(e){var d=a(e);return"translate(0,"+(isFinite(d)?d:b(e))+")"})}function hg(a){return a.toISOString()}function cH(f,b,d){function c(e){return f(e)}function a(l,k){var j=l[1]-l[0],h=j/k,g=jP.bisect(hP,h);return g==hP.length?[b.year,hR(l.map(function(e){return e/31536000000}),k)[2]]:g?b[h/hP[g-1]<hP[g]/h?g-1:g]:[bV,hR(l,k)[2]]}return c.invert=function(e){return fW(f.invert(e))},c.domain=function(e){return arguments.length?(f.domain(e),c):f.domain().map(fW)},c.nice=function(l,i){function j(m){return !isNaN(m)&&!l.range(m,fW(+m+1),i).length}var h=c.domain(),k=cU(h),g=null==l?a(k,10):"number"==typeof l&&a(k,l);return g&&(l=g[0],i=g[1]),c.domain(dd(h,i>1?{floor:function(e){for(;j(e=l.floor(e));){e=fW(e-1)}return e},ceil:function(e){for(;j(e=l.ceil(e));){e=fW(+e+1)}return e}}:l))},c.ticks=function(j,h){var i=cU(c.domain()),g=null==j?a(i,10):"number"==typeof j?a(i,j):!j.range&&[{range:j},h];return g&&(j=g[0],h=g[1]),j.range(i[0],fW(+i[1]+1),1>h?1:h)},c.tickFormat=function(){return d},c.copy=function(){return cH(f.copy(),b,d)},iI(c,f)}function fW(a){return new Date(a)}function bw(a){return JSON.parse(a.responseText)}function dJ(b){var a=gW.createRange();return a.selectNode(gW.body),a.createContextualFragment(b.responseText)}var jP={version:"3.5.17"},eV=[].slice,h7=function(a){return eV.call(a)},gW=this.document;if(gW){try{h7(gW.documentElement.childNodes)[0].nodeType}catch(b7){h7=function(c){for(var a=c.length,b=new Array(a);a--;){b[a]=c[a]}return b}}}if(Date.now||(Date.now=function(){return +new Date}),gW){try{gW.createElement("DIV").style.setProperty("opacity",0,"")}catch(gf){var dm=this.Element.prototype,gE=dm.setAttribute,a5=dm.setAttributeNS,kb=this.CSSStyleDeclaration.prototype,eD=kb.setProperty;dm.setAttribute=function(b,a){gE.call(this,b,a+"")},dm.setAttributeNS=function(c,a,b){a5.call(this,c,a,b+"")},kb.setProperty=function(c,a,b){eD.call(this,c,a+"",b)}}}jP.ascending=iE,jP.descending=function(b,a){return b>a?-1:a>b?1:a>=b?0:NaN},jP.min=function(g,c){var f,d,b=-1,a=g.length;if(1===arguments.length){for(;++b<a;){if(null!=(d=g[b])&&d>=d){f=d;break}}for(;++b<a;){null!=(d=g[b])&&f>d&&(f=d)}}else{for(;++b<a;){if(null!=(d=c.call(g,g[b],b))&&d>=d){f=d;break}}for(;++b<a;){null!=(d=c.call(g,g[b],b))&&f>d&&(f=d)}}return f},jP.max=function(g,c){var f,d,b=-1,a=g.length;if(1===arguments.length){for(;++b<a;){if(null!=(d=g[b])&&d>=d){f=d;break}}for(;++b<a;){null!=(d=g[b])&&d>f&&(f=d)}}else{for(;++b<a;){if(null!=(d=c.call(g,g[b],b))&&d>=d){f=d;break}}for(;++b<a;){null!=(d=c.call(g,g[b],b))&&d>f&&(f=d)}}return f},jP.extent=function(h,c){var f,d,b,a=-1,g=h.length;if(1===arguments.length){for(;++a<g;){if(null!=(d=h[a])&&d>=d){f=b=d;break}}for(;++a<g;){null!=(d=h[a])&&(f>d&&(f=d),d>b&&(b=d))}}else{for(;++a<g;){if(null!=(d=c.call(h,h[a],a))&&d>=d){f=b=d;break}}for(;++a<g;){null!=(d=c.call(h,h[a],a))&&(f>d&&(f=d),d>b&&(b=d))}}return[f,b]},jP.sum=function(g,b){var d,c=0,a=g.length,f=-1;if(1===arguments.length){for(;++f<a;){iw(d=+g[f])&&(c+=d)}}else{for(;++f<a;){iw(d=+b.call(g,g[f],f))&&(c+=d)}}return c},jP.mean=function(i,f){var g,d=0,h=i.length,c=-1,b=h;if(1===arguments.length){for(;++c<h;){iw(g=h5(i[c]))?d+=g:--b}}else{for(;++c<h;){iw(g=h5(f.call(i,i[c],c)))?d+=g:--b}}return b?d/b:void 0},jP.quantile=function(g,c){var f=(g.length-1)*c+1,d=Math.floor(f),b=+g[d-1],a=f-d;return a?b+a*(g[d]-b):b},jP.median=function(g,e){var d,f=[],c=g.length,b=-1;if(1===arguments.length){for(;++b<c;){iw(d=h5(g[b]))&&f.push(d)}}else{for(;++b<c;){iw(d=h5(e.call(g,g[b],b)))&&f.push(d)}}return f.length?jP.quantile(f.sort(iE),0.5):void 0},jP.variance=function(d,p){var i,m,b=d.length,k=0,g=0,j=-1,h=0;if(1===arguments.length){for(;++j<b;){iw(i=h5(d[j]))&&(m=i-k,k+=m/++h,g+=m*(i-k))}}else{for(;++j<b;){iw(i=h5(p.call(d,d[j],j)))&&(m=i-k,k+=m/++h,g+=m*(i-k))}}return h>1?g/(h-1):void 0},jP.deviation=function(){var a=jP.variance.apply(this,arguments);return a?Math.sqrt(a):a};var g3=h0(iE);jP.bisectLeft=g3.left,jP.bisect=jP.bisectRight=g3.right,jP.bisector=function(a){return h0(1===a.length?function(b,c){return iE(a(b),c)}:a)},jP.shuffle=function(g,c,f){(a=arguments.length)<3&&(f=g.length,2>a&&(c=0));for(var d,b,a=f-c;a;){b=Math.random()*a--|0,d=g[a+c],g[a+c]=g[b+c],g[b+c]=d}return g},jP.permute=function(d,a){for(var c=a.length,b=new Array(c);c--;){b[c]=d[a[c]]}return b},jP.pairs=function(g){for(var c,f=0,d=g.length-1,b=g[0],a=new Array(0>d?0:d);d>f;){a[f]=[c=b,b=g[++f]]}return a},jP.transpose=function(j){if(!(d=j.length)){return[]}for(var f=-1,h=jP.min(j,h9),g=new Array(h);++f<h;){for(var d,c=-1,b=g[f]=new Array(d);++c<d;){b[c]=j[c][f]}}return g},jP.zip=function(){return jP.transpose(arguments)},jP.keys=function(c){var a=[];for(var b in c){a.push(b)}return a},jP.values=function(c){var a=[];for(var b in c){a.push(c[b])}return a},jP.entries=function(c){var a=[];for(var b in c){a.push({key:b,value:c[b]})}return a},jP.merge=function(h){for(var c,f,d,b=h.length,a=-1,g=0;++a<b;){g+=h[a].length}for(f=new Array(g);--b>=0;){for(d=h[b],c=d.length;--c>=0;){f[--g]=d[c]}}return f};var ad=Math.abs;jP.range=function(h,c,f){if(arguments.length<3&&(f=1,arguments.length<2&&(c=h,h=0)),(c-h)/f===1/0){throw new Error("infinite range")}var d,b=[],a=iK(ad(f)),g=-1;if(h*=a,c*=a,f*=a,0>f){for(;(d=h+f*++g)>c;){b.push(d/a)}}else{for(;(d=h+f*++g)<c;){b.push(d/a)}}return b},jP.map=function(h,c){var f=new iG;if(h instanceof iG){h.forEach(function(i,e){f.set(i,e)})}else{if(Array.isArray(h)){var d,b=-1,a=h.length;if(1===arguments.length){for(;++b<a;){f.set(b,h[b])}}else{for(;++b<a;){f.set(c.call(h,d=h[b],b),d)}}}else{for(var g in h){f.set(g,h[g])}}}return f};var i0="__proto__",ap="\x00";ik(iG,{has:iy,get:function(a){return this._[iB(a)]},set:function(b,a){return this._[iB(b)]=a},remove:h8,keys:iz,values:function(){var b=[];for(var a in this._){b.push(this._[a])}return b},entries:function(){var b=[];for(var a in this._){b.push({key:h3(a),value:this._[a]})}return b},size:hZ,empty:iF,forEach:function(b){for(var a in this._){b.call(this,h3(a),this._[a])}}}),jP.nest=function(){function h(w,i,r){if(r>=a.length){return d?d.call(b,i):f?i.sort(f):i}for(var j,n,x,k,e=-1,m=i.length,u=a[r++],q=new iG;++e<m;){(k=q.get(j=u(n=i[e])))?k.push(n):q.set(j,[n])}return w?(n=w(),x=function(o,l){n.set(o,h(w,l,r))}):(n={},x=function(o,l){n[o]=h(w,l,r)}),q.forEach(x),n}function c(m,l){if(l>=a.length){return m}var k=[],j=g[l++];return m.forEach(function(o,e){k.push({key:o,values:c(e,l)})}),j?k.sort(function(i,e){return j(i.key,e.key)}):k}var f,d,b={},a=[],g=[];return b.map=function(i,j){return h(j,i,0)},b.entries=function(i){return c(h(jP.map,i,0),0)},b.key=function(e){return a.push(e),b},b.sortKeys=function(e){return g[a.length-1]=e,b},b.sortValues=function(e){return f=e,b},b.rollup=function(e){return d=e,b},b},jP.set=function(d){var a=new hV;if(d){for(var c=0,b=d.length;b>c;++c){a.add(d[c])}}return a},ik(hV,{has:iy,add:function(a){return this._[iB(a+="")]=!0,a},remove:h8,values:iz,size:hZ,empty:iF,forEach:function(b){for(var a in this._){b.call(this,h3(a))}}}),jP.behavior={},jP.rebind=function(f,b){for(var d,c=1,a=arguments.length;++c<a;){f[d=arguments[c]]=i9(f,b,b[d])}return f};var aN=["webkit","ms","moz","Moz","o","O"];jP.dispatch=function(){for(var c=new iL,a=-1,b=arguments.length;++a<b;){c[arguments[a]]=hX(c)}return c},iL.prototype.on=function(d,a){var c=d.indexOf("."),b="";if(c>=0&&(b=d.slice(c+1),d=d.slice(0,c)),d){return arguments.length<2?this[d].on(b):this[d].on(b,a)}if(2===arguments.length){if(null==a){for(d in this){this.hasOwnProperty(d)&&this[d].on(b,null)}}return this}},jP.event=null,jP.requote=function(a){return a.replace(e2,"\\$&")};var e2=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ff={}.__proto__?function(b,a){b.__proto__=a}:function(c,a){for(var b in a){c[b]=a[b]}},gL=function(b,a){return a.querySelector(b)},aW=function(b,a){return a.querySelectorAll(b)},cw=function(c,a){var b=c.matches||c[hW(c,"matchesSelector")];return(cw=function(e,d){return b.call(e,d)})(c,a)};"function"==typeof Sizzle&&(gL=function(b,a){return Sizzle(b,a)[0]||null},aW=Sizzle,cw=Sizzle.matchesSelector),jP.selection=function(){return jP.select(gW.documentElement)};var bF=jP.selection.prototype=[];bF.select=function(f){var q,j,b,h,p=[];f=jC(f);for(var d=-1,m=this.length;++d<m;){p.push(q=[]),q.parentNode=(b=this[d]).parentNode;for(var g=-1,k=b.length;++g<k;){(h=b[g])?(q.push(j=f.call(h,h.__data__,g,d)),j&&"__data__" in h&&(j.__data__=h.__data__)):q.push(null)}}return jw(p)},bF.selectAll=function(d){var m,h,b=[];d=jA(d);for(var g=-1,k=this.length;++g<k;){for(var c=this[g],j=-1,f=c.length;++j<f;){(h=c[j])&&(b.push(m=h7(d.call(h,h.__data__,j,g))),m.parentNode=h)}}return jw(b)};var jI="http://www.w3.org/1999/xhtml",hs={svg:"http://www.w3.org/2000/svg",xhtml:jI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};jP.ns={prefix:hs,qualify:function(c){var a=c.indexOf(":"),b=c;return a>=0&&"xmlns"!==(b=c.slice(0,a))&&(c=c.slice(a+1)),hs.hasOwnProperty(b)?{space:hs[b],local:c}:c}},bF.attr=function(c,a){if(arguments.length<2){if("string"==typeof c){var b=this.node();return c=jP.ns.qualify(c),c.local?b.getAttributeNS(c.space,c.local):b.getAttribute(c)}for(a in c){this.each(hT(a,c[a]))}return this}return this.each(hT(c,a))},bF.classed=function(f,b){if(arguments.length<2){if("string"==typeof f){var d=this.node(),c=(f=iW(f)).length,a=-1;if(b=d.classList){for(;++a<c;){if(!b.contains(f[a])){return !1}}}else{for(b=d.getAttribute("class");++a<c;){if(!h6(f[a]).test(b)){return !1}}}return !0}for(b in f){this.each(iZ(b,f[b]))}return this}return this.each(iZ(f,b))},bF.style=function(f,d,c){var b=arguments.length;if(3>b){if("string"!=typeof f){2>b&&(d="");for(c in f){this.each(i2(c,f[c],d))}return this}if(2>b){var a=this.node();return h2(a).getComputedStyle(a,null).getPropertyValue(f)}c=""}return this.each(i2(f,d,c))},bF.property=function(b,a){if(arguments.length<2){if("string"==typeof b){return this.node()[b]}for(a in b){this.each(iV(a,b[a]))}return this}return this.each(iV(b,a))},bF.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},bF.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},bF.append=function(a){return a=iq(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},bF.insert=function(b,a){return b=iq(b),a=jC(a),this.select(function(){return this.insertBefore(b.apply(this,arguments),a.apply(this,arguments)||null)})},bF.remove=function(){return this.each(jv)},bF.data=function(d,q){function k(t,B){var a,x,F,l=t.length,G=B.length,z=Math.min(l,G),f=new Array(G),A=new Array(G),E=new Array(l);if(q){var C,D=new iG,w=new Array(l);for(a=-1;++a<l;){(x=t[a])&&(D.has(C=q.call(x,x.__data__,a))?E[a]=x:D.set(C,x),w[a]=C)}for(a=-1;++a<G;){(x=D.get(C=q.call(B,F=B[a],a)))?x!==!0&&(f[a]=x,x.__data__=F):A[a]=jk(F),D.set(C,!0)}for(a=-1;++a<l;){a in w&&D.get(w[a])!==!0&&(E[a]=t[a])}}else{for(a=-1;++a<z;){x=t[a],F=B[a],x?(x.__data__=F,f[a]=x):A[a]=jk(F)}for(;G>a;++a){A[a]=jk(B[a])}for(;l>a;++a){E[a]=t[a]}}A.update=f,A.parentNode=f.parentNode=E.parentNode=t.parentNode,m.push(A),g.push(f),j.push(E)}var b,h,p=-1,c=this.length;if(!arguments.length){for(d=new Array(c=(b=this[0]).length);++p<c;){(h=b[p])&&(d[p]=h.__data__)}return d}var m=iO([]),g=jw([]),j=jw([]);if("function"==typeof d){for(;++p<c;){k(b=this[p],d.call(b,b.parentNode.__data__,p))}}else{for(;++p<c;){k(b=this[p],d)}}return g.enter=function(){return m},g.exit=function(){return j},g},bF.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},bF.filter=function(d){var m,h,b,g=[];"function"!=typeof d&&(d=i5(d));for(var k=0,c=this.length;c>k;k++){g.push(m=[]),m.parentNode=(h=this[k]).parentNode;for(var j=0,f=h.length;f>j;j++){(b=h[j])&&d.call(b,b.__data__,j,k)&&m.push(b)}}return jw(g)},bF.order=function(){for(var g=-1,c=this.length;++g<c;){for(var f,d=this[g],b=d.length-1,a=d[b];--b>=0;){(f=d[b])&&(a&&a!==f.nextSibling&&a.parentNode.insertBefore(f,a),a=f)}}return this},bF.sort=function(c){c=jj.apply(this,arguments);for(var a=-1,b=this.length;++a<b;){this[a].sort(c)}return this.order()},bF.each=function(a){return iP(this,function(b,d,c){a.call(b,b.__data__,d,c)})},bF.call=function(b){var a=h7(arguments);return b.apply(a[0]=this,a),this},bF.empty=function(){return !this.node()},bF.node=function(){for(var g=0,c=this.length;c>g;g++){for(var f=this[g],d=0,b=f.length;b>d;d++){var a=f[d];if(a){return a}}}return null},bF.size=function(){var a=0;return iP(this,function(){++a}),a};var c0=[];jP.selection.enter=iO,jP.selection.enter.prototype=c0,c0.append=bF.append,c0.empty=bF.empty,c0.node=bF.node,c0.call=bF.call,c0.size=bF.size,c0.select=function(g){for(var v,m,b,j,s,d=[],q=-1,h=this.length;++q<h;){b=(j=this[q]).update,d.push(v=[]),v.parentNode=j.parentNode;for(var p=-1,k=j.length;++p<k;){(s=j[p])?(v.push(b[p]=m=g.call(j.parentNode,s.__data__,p,q)),m.__data__=s.__data__):v.push(null)}}return jw(d)},c0.insert=function(b,a){return arguments.length<2&&(a=iT(this)),bF.insert.call(this,b,a)},jP.select=function(a){var b;return"string"==typeof a?(b=[gL(a,gW)],b.parentNode=gW.documentElement):(b=[a],b.parentNode=id(a)),jw([b])},jP.selectAll=function(b){var a;return"string"==typeof b?(a=h7(aW(b,gW)),a.parentNode=gW.documentElement):(a=h7(b),a.parentNode=null),jw([a])},bF.on=function(d,a,c){var b=arguments.length;if(3>b){if("string"!=typeof d){2>b&&(a=!1);for(c in d){this.each(iQ(c,d[c],a))}return this}if(2>b){return(b=this.node()["__on"+d])&&b._}c=!1}return this.each(iQ(d,a,c))};var eK=jP.map({mouseenter:"mouseover",mouseleave:"mouseout"});gW&&eK.forEach(function(a){"on"+a in gW&&eK.remove(a)});var fq,bg=0;jP.mouse=function(a){return jg(a,im())};var f2=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;jP.touch=function(g,c,f){if(arguments.length<3&&(f=c,c=im().changedTouches),c){for(var d,b=0,a=c.length;a>b;++b){if((d=c[b]).identifier===f){return jg(g,d)}}}},jP.behavior.drag=function(){function g(){this.on("mousedown.drag",a).on("touchstart.drag",f)}function d(l,i,j,h,k){return function(){function A(){var s,p,m=i(q,B);m&&(s=m[0]-u[0],p=m[1]-u[1],r|=s|p,u=m,e({type:"drag",x:m[0]+x[0],y:m[1]+x[1],dx:s,dy:p}))}function o(){i(q,B)&&(z.on(h+w,null).on(k+w,null),n(r),e({type:"dragend"}))}var x,t=this,C=jP.event.target.correspondingElement||jP.event.target,q=t.parentNode,e=c.of(t,arguments),r=0,B=l(),w=".drag"+(null==B?"":"-"+B),z=jP.select(j(C)).on(h+w,A).on(k+w,o),n=iS(C),u=i(q,B);b?(x=b.apply(t,arguments),x=[x.x-u[0],x.y-u[1]]):x=[0,0],e({type:"dragstart"})}}var c=i7(g,"drag","dragstart","dragend"),b=null,a=d(iJ,jP.mouse,h2,"mousemove","mouseup"),f=d(jp,jP.touch,ih,"touchmove","touchend");return g.origin=function(e){return arguments.length?(b=e,g):b},jP.rebind(g,c,"on")},jP.touches=function(b,a){return arguments.length<2&&(a=im().touches),a?h7(a).map(function(c){var d=jg(b,c);return d.identifier=c.identifier,d}):[]};var em=0.000001,fE=em*em,aC=Math.PI,jY=2*aC,gq=jY-em,jh=aC/2,cO=aC/180,cg=180/aC,dQ=Math.SQRT2,c7=2,d1=4;jP.interpolateZoom=function(A,m){var G,w,C=A[0],k=A[1],z=A[2],J=m[0],B=m[1],I=m[2],F=J-C,q=B-k,D=F*F+q*q;if(fE>D){w=Math.log(I/z)/dQ,G=function(a){return[C+a*F,k+a*q,z*Math.exp(dQ*a*w)]}}else{var x=Math.sqrt(D),E=(I*I-z*z+d1*D)/(2*z*c7*x),j=(I*I-z*z-d1*D)/(2*I*c7*x),H=Math.log(Math.sqrt(E*E+1)-E),b=Math.log(Math.sqrt(j*j+1)-j);w=(b-H)/dQ,G=function(g){var d=g*w,f=cI(H),c=z/(c7*x)*(f*bx(dQ*d+H)-hh(H));return[C+c*F,k+c*q,z*f/cI(dQ*d+H)]}}return G.duration=1000*w,G},jP.behavior.zoom=function(){function Z(a){a.on(F,Q).on(dy+".zoom",X).on("dblclick.zoom",ao).on(t,an)}function at(a){return[(a[0]-ai.x)/ai.k,(a[1]-ai.y)/ai.k]}function U(a){return[a[0]*ai.k+ai.x,a[1]*ai.k+ai.y]}function al(a){ai.k=Math.max(W[0],Math.min(W[1],a))}function N(b,a){a=U(a),ai.x+=b[0]-a[0],ai.y+=b[1]-a[1]}function Y(a,c,b,d){a.__chart__={x:ai.x,y:ai.y,k:ai.k},al(Math.pow(2,d)),N(au=c,b),a=jP.select(a),S>0&&(a=a.transition().duration(S)),a.call(Z.event)}function bi(){be&&be.domain(I.range().map(function(a){return(a-ai.x)/ai.k}).map(I.invert)),J&&J.domain(bl.range().map(function(a){return(a-ai.y)/ai.k}).map(bl.invert))}function ae(a){G++||a({type:"zoomstart"})}function ba(a){bi(),a({type:"zoom",scale:ai.k,translate:[ai.x,ai.y]})}function ar(a){--G||(a({type:"zoomend"}),au=null)}function Q(){function l(){b=1,N(jP.mouse(c),d),ba(k)}function f(){e.on(V,null).on(j,null),g(b),ar(k)}var c=this,k=P.of(c,arguments),b=0,e=jP.select(h2(c)).on(V,l).on(j,f),d=at(jP.mouse(c)),g=iS(c);js.call(c),ae(k)}function an(){function f(){var a=jP.touches(i);return e=ai.k,a.forEach(function(b){b.identifier in l&&(l[b.identifier]=at(b))}),a}function D(){var w=jP.event.target;jP.select(w).on(s,c).on(o,u),A.push(w);for(var n=jP.event.changedTouches,d=0,v=n.length;v>d;++d){l[n[d].identifier]=null}var b=f(),r=Date.now();if(1===b.length){if(500>r-B){var m=b[0];Y(i,m,l[m.identifier],Math.floor(Math.log(ai.k)/Math.LN2)+1),iY()}B=r}else{if(b.length>1){var m=b[0],x=b[1],g=m[0]-x[0],a=m[1]-x[1];q=g*g+a*a}}}function c(){var g,x,v,b,d=jP.touches(i);js.call(i);for(var w=0,m=d.length;m>w;++w,b=null){if(v=d[w],b=l[v.identifier]){if(x){break}g=v,x=b}}if(b){var p=(p=v[0]-g[0])*p+(p=v[1]-g[1])*p,y=q&&Math.sqrt(p/q);g=[(g[0]+v[0])/2,(g[1]+v[1])/2],x=[(x[0]+b[0])/2,(x[1]+b[1])/2],al(y*e)}B=null,N(g,x),ba(C)}function u(){if(jP.event.touches.length){for(var b=jP.event.changedTouches,g=0,d=b.length;d>g;++g){delete l[b[g].identifier]}for(var a in l){return void f()}}jP.selectAll(A).on(h,null),z.on(F,Q).on(t,an),k(),ar(C)}var e,i=this,C=P.of(i,arguments),l={},q=0,h=".zoom-"+jP.event.changedTouches[0].identifier,s="touchmove"+h,o="touchend"+h,A=[],z=jP.select(i),k=iS(i);D(),ae(C),z.on(F,null).on(t,D)}function X(){var a=P.of(this,arguments);aa?clearTimeout(aa):(js.call(this),K=at(au=H||jP.mouse(this)),ae(a)),aa=setTimeout(function(){aa=null,ar(a)},50),iY(),al(Math.pow(2,0.002*bY())*ai.k),N(au,K),ba(a)}function ao(){var b=jP.mouse(this),a=Math.log(ai.k)/Math.LN2;Y(this,b,at(b),jP.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var K,au,H,aa,B,I,be,bl,J,ai={x:0,y:0,k:1},O=[960,500],W=ix,S=250,G=0,F="mousedown.zoom",V="mousemove.zoom",j="mouseup.zoom",t="touchstart.zoom",P=i7(Z,"zoomstart","zoom","zoomend");return dy||(dy="onwheel" in gW?(bY=function(){return -jP.event.deltaY*(jP.event.deltaMode?120:1)},"wheel"):"onmousewheel" in gW?(bY=function(){return jP.event.wheelDelta},"mousewheel"):(bY=function(){return -jP.event.detail},"MozMousePixelScroll")),Z.event=function(a){a.each(function(){var c=P.of(this,arguments),b=ai;j1?jP.select(this).transition().each("start.zoom",function(){ai=this.__chart__||{x:0,y:0,k:1},ae(c)}).tween("zoom:zoom",function(){var h=O[0],g=O[1],f=au?au[0]:h/2,d=au?au[1]:g/2,k=jP.interpolateZoom([(f-ai.x)/ai.k,(d-ai.y)/ai.k,h/ai.k],[(f-b.x)/b.k,(d-b.y)/b.k,h/b.k]);return function(i){var l=k(i),e=h/l[2];this.__chart__=ai={x:f-l[0]*e,y:d-l[1]*e,k:e},ba(c)}}).each("interrupt.zoom",function(){ar(c)}).each("end.zoom",function(){ar(c)}):(this.__chart__=ai,ae(c),ba(c),ar(c))})},Z.translate=function(a){return arguments.length?(ai={x:+a[0],y:+a[1],k:ai.k},bi(),Z):[ai.x,ai.y]},Z.scale=function(a){return arguments.length?(ai={x:ai.x,y:ai.y,k:null},al(+a),bi(),Z):ai.k},Z.scaleExtent=function(a){return arguments.length?(W=null==a?ix:[+a[0],+a[1]],Z):W},Z.center=function(a){return arguments.length?(H=a&&[+a[0],+a[1]],Z):H},Z.size=function(a){return arguments.length?(O=a&&[+a[0],+a[1]],Z):O},Z.duration=function(a){return arguments.length?(S=+a,Z):S},Z.x=function(a){return arguments.length?(be=a,I=a.copy(),ai={x:0,y:0,k:1},Z):be},Z.y=function(a){return arguments.length?(J=a,bl=a.copy(),ai={x:0,y:0,k:1},Z):J},jP.rebind(Z,P,"on")};var bY,dy,ix=[0,1/0];jP.color=jQ,jQ.prototype.toString=function(){return this.rgb()+""},jP.hsl=eW;var kp=eW.prototype=new jQ;kp.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),new eW(this.h,this.s,this.l/a)},kp.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),new eW(this.h,this.s,a*this.l)},kp.rgb=function(){return ib(this.h,this.s,this.l)},jP.hcl=gX;var hM=gX.prototype=new jQ;hM.brighter=function(a){return new gX(this.h,this.c,Math.min(100,this.l+fL*(arguments.length?a:1)))},hM.darker=function(a){return new gX(this.h,this.c,Math.max(0,this.l-fL*(arguments.length?a:1)))},hM.rgb=function(){return b8(this.h,this.c,this.l).rgb()},jP.lab=gg;var fL=18,ew=0.95047,bX=1,hz=1.08883,cT=gg.prototype=new jQ;cT.brighter=function(a){return new gg(Math.min(100,this.l+fL*(arguments.length?a:1)),this.a,this.b)},cT.darker=function(a){return new gg(Math.max(0,this.l-fL*(arguments.length?a:1)),this.a,this.b)},cT.rgb=function(){return dp(this.l,this.a,this.b)},jP.rgb=eE;var f6=eE.prototype=new jQ;f6.brighter=function(f){f=Math.pow(0.7,arguments.length?f:1);var b=this.r,d=this.g,c=this.b,a=30;return b||d||c?(b&&a>b&&(b=a),d&&a>d&&(d=a),c&&a>c&&(c=a),new eE(Math.min(255,b/f),Math.min(255,d/f),Math.min(255,c/f))):new eE(a,a,a)},f6.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),new eE(a*this.r,a*this.g,a*this.b)},f6.hsl=function(){return aO(this.r,this.g,this.b)},f6.toString=function(){return"#"+i3(this.r)+i3(this.g)+i3(this.b)};var bE=jP.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});bE.forEach(function(b,a){bE.set(b,g4(a))}),jP.functor=aX,jP.xhr=cx(ih),jP.dsv=function(d,m){function h(p,i,a){arguments.length<3&&(a=i,i=null);var l=bG(p,m,null==i?b:g(i),a);return l.row=function(e){return arguments.length?l.response(null==(i=e)?b:g(e)):i},l}function b(a){return h.parse(a.responseText)}function g(a){return function(e){return h.parse(e.responseText,a)}}function k(a){return a.map(c).join(d)}function c(a){return j.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var j=new RegExp('["'+d+"\n]"),f=d.charCodeAt(0);return h.parse=function(i,a){var e;return h.parseRows(i,function(p,o){if(e){return e(p,o-1)}var l=new Function("d","return {"+p.map(function(r,q){return JSON.stringify(r)+": d["+q+"]"}).join(",")+"}");e=a?function(r,q){return a(l(r),q)}:l})},h.parseRows=function(q,C){function y(){if(x>=z){return p}if(v){return v=!1,B}var n=x;if(34===q.charCodeAt(n)){for(var s=n;s++<z;){if(34===q.charCodeAt(s)){if(34!==q.charCodeAt(s+1)){break}++s}}x=s+2;var o=q.charCodeAt(s+1);return 13===o?(v=!0,10===q.charCodeAt(s+2)&&++x):10===o&&(v=!0),q.slice(n+1,s).replace(/""/g,'"')}for(;z>x;){var o=q.charCodeAt(x++),i=1;if(10===o){v=!0}else{if(13===o){v=!0,10===q.charCodeAt(x)&&(++x,++i)}else{if(o!==f){continue}}}return q.slice(n,x-i)}return q.slice(n)}for(var l,v,B={},p={},A=[],z=q.length,x=0,D=0;(l=y())!==p;){for(var w=[];l!==B&&l!==p;){w.push(l),l=y()}C&&null==(w=C(w,D++))||A.push(w)}return A},h.format=function(e){if(Array.isArray(e[0])){return h.formatRows(e)}var l=new hV,a=[];return e.forEach(function(o){for(var i in o){l.has(i)||a.push(l.add(i))}}),[a.map(c).join(d)].concat(e.map(function(i){return a.map(function(o){return c(i[o])}).join(d)})).join("\n")},h.formatRows=function(a){return a.map(k).join("\n")},h},jP.csv=jP.dsv(",","text/csv"),jP.tsv=jP.dsv("	","text/tab-separated-values");var dU,j2,e6,iH,g7=this[hW(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};jP.timer=function(){c1.apply(this,arguments)},jP.timer.flush=function(){fs(),bh()},jP.round=function(b,a){return a?Math.round(b*(a=Math.pow(10,a)))/a:Math.round(b)};var cs=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(ep);jP.formatPrefix=function(c,a){var b=0;return(c=+c)&&(0>c&&(c*=-1),a&&(c=jP.round(c,f3(c,a))),b=1+Math.floor(1e-12+Math.log(c)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((b-1)/3)))),cs[8+b/3]};var gx=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,dC=jP.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(b,a){return b.toPrecision(a)},e:function(b,a){return b.toExponential(a)},f:function(b,a){return b.toFixed(a)},r:function(b,a){return(b=jP.round(b,f3(b,a))).toFixed(Math.max(0,Math.min(20,f3(b*(1+1e-15),a))))}}),gP=jP.time={},bf=Date;jZ.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){hQ.setUTCDate.apply(this._,arguments)},setDay:function(){hQ.setUTCDay.apply(this._,arguments)},setFullYear:function(){hQ.setUTCFullYear.apply(this._,arguments)},setHours:function(){hQ.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){hQ.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){hQ.setUTCMinutes.apply(this._,arguments)},setMonth:function(){hQ.setUTCMonth.apply(this._,arguments)},setSeconds:function(){hQ.setUTCSeconds.apply(this._,arguments)},setTime:function(){hQ.setTime.apply(this._,arguments)}};var hQ=Date.prototype;gP.year=gs(function(a){return a=gP.day(a),a.setMonth(0,1),a},function(b,a){b.setFullYear(b.getFullYear()+a)},function(a){return a.getFullYear()}),gP.years=gP.year.range,gP.years.utc=gP.year.utc.range,gP.day=gs(function(b){var a=new bf(2000,0);return a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),a},function(b,a){b.setDate(b.getDate()+a)},function(a){return a.getDate()-1}),gP.days=gP.day.range,gP.days.utc=gP.day.utc.range,gP.dayOfYear=function(b){var a=gP.year(b);return Math.floor((b-a-60000*(b.getTimezoneOffset()-a.getTimezoneOffset()))/86400000)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(c,a){a=7-a;var b=gP[c]=gs(function(d){return(d=gP.day(d)).setDate(d.getDate()-(d.getDay()+a)%7),d},function(e,d){e.setDate(e.getDate()+7*Math.floor(d))},function(f){var d=gP.year(f).getDay();return Math.floor((gP.dayOfYear(f)+(d+a)%7)/7)-(d!==a)});gP[c+"s"]=b.range,gP[c+"s"].utc=b.utc.range,gP[c+"OfYear"]=function(f){var d=gP.year(f).getDay();return Math.floor((gP.dayOfYear(f)+(d+a)%7)/7)}}),gP.week=gP.sunday,gP.weeks=gP.sunday.range,gP.weeks.utc=gP.sunday.utc.range,gP.weekOfYear=gP.sundayOfYear;var km={"-":"",_:" ",0:"0"},eO=/^\s*\d+/,hb=/^%/;jP.locale=function(a){return{numberFormat:fF(a),timeFormat:cP(a)}};var aA=jP.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});jP.format=aA.numberFormat,jP.geo={},gU.prototype={s:0,t:0,add:function(a){b4(a,this.t,jy),b4(jy.s,this.s,this),this.s?this.t+=jy.t:this.s=jy.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var jy=new gU;jP.geo.stream=function(b,a){b&&aG.hasOwnProperty(b.type)?aG[b.type](b,a):gc(b,a)};var aG={Feature:function(b,a){gc(b.geometry,a)},FeatureCollection:function(f,b){for(var d=f.features,c=-1,a=d.length;++c<a;){gc(d[c].geometry,b)}}},aV={Sphere:function(b,a){a.sphere()},Point:function(b,a){b=b.coordinates,a.point(b[0],b[1],b[2])},MultiPoint:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){f=d[c],b.point(f[0],f[1],f[2])}},LineString:function(b,a){dj(b.coordinates,a,0)},MultiLineString:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){dj(d[c],b,0)}},Polygon:function(b,a){gC(b.coordinates,a)},MultiPolygon:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){gC(d[c],b)}},GeometryCollection:function(f,b){for(var d=f.geometries,c=-1,a=d.length;++c<a;){gc(d[c],b)}}};jP.geo.area=function(a){return e9=0,jP.geo.stream(a,gS),e9};var e9,fx=new gU,gS={sphere:function(){e9+=4*aC},point:iJ,lineStart:iJ,lineEnd:iJ,polygonStart:function(){fx.reset(),gS.lineStart=a2},polygonEnd:function(){var a=2*fx;e9+=0>a?4*aC+a:a,gS.lineStart=gS.lineEnd=gS.point=iJ}};jP.geo.bounds=function(){function F(b,a){j.push(q=[L=b,J=b]),B>a&&(B=a),a>D&&(D=a)}function A(M,n){var a=hE([M*cO,n*cO]);if(k){var h=eB(k,a),y=[h[1],-h[0],0],b=eB(y,h);iU(b),b=aj(b);var g=M-K,s=g>0?1:-1,x=b[0]*cg*s,p=ad(g)>180;if(p^(x>s*K&&s*M>x)){var f=b[1]*cg;f>D&&(D=f)}else{if(x=(x+360)%360-180,p^(x>s*K&&s*M>x)){var f=-b[1]*cg;B>f&&(B=f)}else{B>n&&(B=n),n>D&&(D=n)}}p?K>M?R(L,M)>R(L,J)&&(J=M):R(M,J)>R(L,J)&&(L=M):J>=L?(L>M&&(L=M),M>J&&(J=M)):M>K?R(L,M)>R(L,J)&&(J=M):R(M,J)>R(L,J)&&(L=M)}else{F(M,n)}k=a,K=M}function N(){Q.point=A}function C(){q[0]=L,q[1]=J,Q.point=F,k=null}function I(c,b){if(k){var a=c-K;G+=ad(a)>180?a+(a>0?360:-360):a}else{w=c,O=b}gS.point(c,b),A(c,b)}function z(){gS.lineStart()}function E(){I(w,O),gS.lineEnd(),ad(G)>em&&(L=-(J=180)),q[0]=L,q[1]=J,k=null}function R(b,a){return(a-=b)<0?a+360:a}function H(b,a){return b[0]-a[0]}function P(b,a){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}var L,B,J,D,K,w,O,k,G,j,q,Q={point:F,lineStart:N,lineEnd:C,polygonStart:function(){Q.point=I,Q.lineStart=z,Q.lineEnd=E,G=0,gS.polygonStart()},polygonEnd:function(){gS.polygonEnd(),Q.point=F,Q.lineStart=N,Q.lineEnd=C,0>fx?(L=-(J=180),B=-(D=90)):G>em?D=90:-em>G&&(B=-90),q[0]=L,q[1]=J}};return function(m){D=J=-(L=B=1/0),j=[],jP.geo.stream(m,Q);var c=j.length;if(c){j.sort(H);for(var h,f=1,b=j[0],a=[b];c>f;++f){h=j[f],P(h[0],b)||P(h[1],b)?(R(b[0],h[1])>R(b[0],b[1])&&(b[1]=h[1]),R(h[0],b[1])>R(b[0],b[1])&&(b[0]=h[0])):a.push(b=h)}for(var l,h,d=-(1/0),c=a.length-1,f=0,b=a[c];c>=f;b=h,++f){h=a[f],(l=R(b[1],h[0]))>d&&(d=l,L=h[0],J=b[1])}}return j=q=null,L===1/0||B===1/0?[[NaN,NaN],[NaN,NaN]]:[[L,B],[J,D]]}}(),jP.geo.centroid=function(f){a4=cG=bN=jW=hC=dc=eR=fA=bv=f9=ez=0,jP.geo.stream(f,fP);var b=bv,d=f9,c=ez,a=b*b+d*d+c*c;return fE>a&&(b=dc,d=eR,c=fA,em>cG&&(b=bN,d=jW,c=hC),a=b*b+d*d+c*c,fE>a)?[NaN,NaN]:[Math.atan2(d,b)*cg,bP(c/Math.sqrt(a))*cg]};var a4,cG,bN,jW,hC,dc,eR,fA,bv,f9,ez,fP={sphere:iJ,point:eZ,lineStart:gI,lineEnd:aT,polygonStart:function(){fP.lineStart=cp},polygonEnd:function(){fP.lineStart=gI}},aM=fk(jF,fC,jU,[-aC,-aC/2]),j9=1000000000;jP.geo.clipExtent=function(){var h,c,f,d,b,a,g={stream:function(e){return b&&(b.valid=!1),b=a(e),b.valid=!0,b},extent:function(e){return arguments.length?(a=cc(h=+e[0][0],c=+e[0][1],f=+e[1][0],d=+e[1][1]),b&&(b.valid=!1,b=null),g):[[h,c],[f,d]]}};return g.extent([[0,0],[960,500]])},(jP.geo.conicEqualArea=function(){return dN(c4)}).raw=c4,jP.geo.albers=function(){return jP.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},jP.geo.albersUsa=function(){function d(i){var a=i[0],e=i[1];return m=null,h(a,e),m||(b(a,e),m)||g(a,e),m}var m,h,b,g,k=jP.geo.albers(),c=jP.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),j=jP.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(i,a){m=[i,a]}};return d.invert=function(q){var l=k.scale(),p=k.translate(),o=(q[0]-p[0])/l,a=(q[1]-p[1])/l;return(a>=0.12&&0.234>a&&o>=-0.425&&-0.214>o?c:a>=0.166&&0.234>a&&o>=-0.214&&-0.115>o?j:k).invert(q)},d.stream=function(o){var a=k.stream(o),l=c.stream(o),i=j.stream(o);return{point:function(p,e){a.point(p,e),l.point(p,e),i.point(p,e)},sphere:function(){a.sphere(),l.sphere(),i.sphere()},lineStart:function(){a.lineStart(),l.lineStart(),i.lineStart()},lineEnd:function(){a.lineEnd(),l.lineEnd(),i.lineEnd()},polygonStart:function(){a.polygonStart(),l.polygonStart(),i.polygonStart()},polygonEnd:function(){a.polygonEnd(),l.polygonEnd(),i.polygonEnd()}}},d.precision=function(a){return arguments.length?(k.precision(a),c.precision(a),j.precision(a),d):k.precision()},d.scale=function(a){return arguments.length?(k.scale(a),c.scale(0.35*a),j.scale(a),d.translate(k.translate())):k.scale()},d.translate=function(a){if(!arguments.length){return k.translate()}var l=k.scale(),i=+a[0],e=+a[1];return h=k.translate(a).clipExtent([[i-0.455*l,e-0.238*l],[i+0.455*l,e+0.238*l]]).stream(f).point,b=c.translate([i-0.307*l,e+0.201*l]).clipExtent([[i-0.425*l+em,e+0.12*l+em],[i-0.214*l-em,e+0.234*l-em]]).stream(f).point,g=j.translate([i-0.205*l,e+0.212*l]).clipExtent([[i-0.214*l+em,e+0.166*l+em],[i-0.115*l-em,e+0.234*l-em]]).stream(f).point,d},d.scale(1070)};var gA,jH,cW,cA,d0,dg,ek={point:iJ,lineStart:iJ,lineEnd:iJ,polygonStart:function(){jH=0,ek.lineStart=dY},polygonEnd:function(){ek.lineStart=ek.lineEnd=ek.point=iJ,gA+=ad(jH/2)}},b6={point:bU,lineStart:iJ,lineEnd:iJ,polygonStart:iJ,polygonEnd:iJ},dF={point:kj,lineStart:hJ,lineEnd:fI,polygonStart:function(){dF.lineStart=eq},polygonEnd:function(){dF.point=kj,dF.lineStart=hJ,dF.lineEnd=fI}};jP.geo.path=function(){function k(a){return a&&("function"==typeof b&&c.pointRadius(+b.apply(this,arguments)),j&&j.valid||(j=d(c)),jP.geo.stream(a,j)),c.result()}function f(){return j=null,k}var h,g,d,c,j,b=4.5;return k.area=function(a){return gA=0,jP.geo.stream(a,d(ek)),gA},k.centroid=function(a){return bN=jW=hC=dc=eR=fA=bv=f9=ez=0,jP.geo.stream(a,d(dF)),ez?[bv/ez,f9/ez]:fA?[dc/fA,eR/fA]:hC?[bN/hC,jW/hC]:[NaN,NaN]},k.bounds=function(a){return d0=dg=-(cW=cA=1/0),jP.geo.stream(a,d(b6)),[[cW,cA],[d0,dg]]},k.projection=function(a){return arguments.length?(d=(h=a)?a.stream||cQ(a):ih,f()):h},k.context=function(a){return arguments.length?(c=null==(g=a)?new dv:new bT(a),"function"!=typeof b&&c.pointRadius(b),f()):g},k.pointRadius=function(a){return arguments.length?(b="function"==typeof a?a:(c.pointRadius(+a),+a),k):b},k.projection(jP.geo.albersUsa()).context(null)},jP.geo.transform=function(a){return{stream:function(b){var d=new f4(b);for(var c in a){d[c]=a[c]}return d}}},f4.prototype={point:function(b,a){this.stream.point(b,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},jP.geo.projection=dS,jP.geo.projectionMutator=j0,(jP.geo.equirectangular=function(){return dS(iC)}).raw=iC.invert=iC,jP.geo.rotation=function(b){function a(c){return c=b(c[0]*cO,c[1]*cO),c[0]*=cg,c[1]*=cg,c}return b=ck(b[0]%360*cO,b[1]*cO,b.length>2?b[2]*cO:0),a.invert=function(c){return c=b.invert(c[0]*cO,c[1]*cO),c[0]*=cg,c[1]*=cg,c},a},g5.invert=iC,jP.geo.circle=function(){function f(){var h="function"==typeof c?c.apply(this,arguments):c,g=ck(-h[0]*cO,-h[1]*cO,0).invert,e=[];return d(null,null,1,{point:function(j,i){e.push(j=g(j,i)),j[0]*=cg,j[1]*=cg}}),{type:"Polygon",coordinates:[e]}}var b,d,c=[0,0],a=6;return f.origin=function(e){return arguments.length?(c=e,f):c},f.angle=function(e){return arguments.length?(d=bb((b=+e)*cO,a*cO),f):b},f.precision=function(e){return arguments.length?(d=bb(b*cO,(a=+e)*cO),f):a},f.angle(90)},jP.geo.distance=function(g,w){var m,b=(w[0]-g[0])*cO,j=g[1]*cO,v=w[1]*cO,d=Math.sin(b),q=Math.cos(b),h=Math.sin(j),p=Math.cos(j),k=Math.sin(v),x=Math.cos(v);return Math.atan2(Math.sqrt((m=x*d)*m+(m=p*k-h*x*q)*m),h*k+p*x*q)},jP.geo.graticule=function(){function B(){return{type:"MultiLineString",coordinates:q()}}function q(){return jP.range(Math.ceil(k/J)*J,E,J).map(F).concat(jP.range(Math.ceil(K/b)*b,D,b).map(z)).concat(jP.range(Math.ceil(x/G)*G,I,G).filter(function(a){return ad(a%J)>em}).map(H)).concat(jP.range(Math.ceil(L/j)*j,A,j).filter(function(a){return ad(a%b)>em}).map(w))}var I,x,E,k,A,L,D,K,H,w,F,z,G=10,j=G,J=90,b=360,C=2.5;return B.lines=function(){return q().map(function(a){return{type:"LineString",coordinates:a}})},B.outline=function(){return{type:"Polygon",coordinates:[F(k).concat(z(D).slice(1),F(E).reverse().slice(1),z(K).reverse().slice(1))]}},B.extent=function(a){return arguments.length?B.majorExtent(a).minorExtent(a):B.minorExtent()},B.majorExtent=function(a){return arguments.length?(k=+a[0][0],E=+a[1][0],K=+a[0][1],D=+a[1][1],k>E&&(a=k,k=E,E=a),K>D&&(a=K,K=D,D=a),B.precision(C)):[[k,K],[E,D]]},B.minorExtent=function(a){return arguments.length?(x=+a[0][0],I=+a[1][0],L=+a[0][1],A=+a[1][1],x>I&&(a=x,x=I,I=a),L>A&&(a=L,L=A,A=a),B.precision(C)):[[x,L],[I,A]]},B.step=function(a){return arguments.length?B.majorStep(a).minorStep(a):B.minorStep()},B.majorStep=function(a){return arguments.length?(J=+a[0],b=+a[1],B):[J,b]},B.minorStep=function(a){return arguments.length?(G=+a[0],j=+a[1],B):[G,j]},B.precision=function(a){return arguments.length?(C=+a,H=kh(L,A,90),w=eM(x,I,C),F=kh(K,D,90),z=eM(k,E,C),B):C},B.majorExtent([[-180,-90+em],[180,90-em]]).minorExtent([[-180,-80-em],[180,80+em]])},jP.geo.greatArc=function(){function f(){return{type:"LineString",coordinates:[b||c.apply(this,arguments),d||a.apply(this,arguments)]}}var b,d,c=g9,a=aw;return f.distance=function(){return jP.geo.distance(b||c.apply(this,arguments),d||a.apply(this,arguments))},f.source=function(g){return arguments.length?(c=g,b="function"==typeof g?null:g,f):c},f.target=function(e){return arguments.length?(a=e,d="function"==typeof e?null:e,f):a},f.precision=function(){return arguments.length?f:0},f},jP.geo.interpolate=function(b,a){return jq(b[0]*cO,b[1]*cO,a[0]*cO,a[1]*cO)},jP.geo.length=function(a){return iN=0,jP.geo.stream(a,ac),iN};var iN,ac={sphere:iJ,point:iJ,lineStart:aE,lineEnd:iJ,polygonStart:iJ,polygonEnd:iJ},hU=aS(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(jP.geo.azimuthalEqualArea=function(){return dS(hU)}).raw=hU;var fS=aS(function(b){var a=Math.acos(b);return a&&a/Math.sin(a)},ih);(jP.geo.azimuthalEquidistant=function(){return dS(fS)}).raw=fS,(jP.geo.conicConformal=function(){return dN(e8)}).raw=e8,(jP.geo.conicEquidistant=function(){return dN(fv)}).raw=fv;var ed=aS(function(a){return 1/a},Math.atan);(jP.geo.gnomonic=function(){return dS(ed)}).raw=ed,gR.invert=function(b,a){return[b,2*Math.atan(Math.exp(a))-jh]},(jP.geo.mercator=function(){return a1(gR)}).raw=gR;var bQ=aS(function(){return 1},Math.asin);(jP.geo.orthographic=function(){return dS(bQ)}).raw=bQ;var hk=aS(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(jP.geo.stereographic=function(){return dS(hk)}).raw=hk,cD.invert=function(b,a){return[-a,2*Math.atan(Math.exp(b))-jh]},(jP.geo.transverseMercator=function(){var c=a1(cD),a=c.center,b=c.rotate;return c.center=function(d){return d?a([-d[1],d[0]]):(d=a(),[d[1],-d[0]])},c.rotate=function(d){return d?b([d[0],d[1],d.length>2?d[2]+90:90]):(d=b(),[d[0],d[1],d[2]-90])},b([0,0,90])}).raw=cD,jP.geom={},jP.geom.hull=function(d){function a(j){if(j.length<3){return[]}var y,m=aX(c),x=aX(b),g=j.length,w=[],k=[];for(y=0;g>y;y++){w.push([+m.call(this,j[y],y),+x.call(this,j[y],y),y])}for(w.sort(c9),y=0;g>y;y++){k.push([w[y][0],-w[y][1]])}var v=hB(w),r=hB(k),z=r[0]===v[0],q=r[r.length-1]===v[v.length-1],e=[];for(y=v.length-1;y>=0;--y){e.push(j[w[v[y]][2]])}for(y=+z;y<r.length-q;++y){e.push(j[w[r[y]][2]])}return e}var c=bK,b=jS;return arguments.length?a(d):(a.x=function(e){return arguments.length?(c=e,a):c},a.y=function(e){return arguments.length?(b=e,a):b},a)},jP.geom.polygon=function(a){return ff(a,cK),a};var cK=jP.geom.polygon.prototype=[];cK.area=function(){for(var f,b=-1,d=this.length,c=this[d-1],a=0;++b<d;){f=c,c=this[b],a+=f[1]*c[0]-f[0]*c[1]}return 0.5*a},cK.centroid=function(k){var f,h,g=-1,d=this.length,c=0,j=0,b=this[d-1];for(arguments.length||(k=-1/(6*this.area()));++g<d;){f=b,b=this[g],h=f[0]*b[1]-b[0]*f[1],c+=(f[0]+b[0])*h,j+=(f[1]+b[1])*h}return[c*k,j*k]},cK.clip=function(g){for(var v,m,b,j,s,d,q=bp(g),h=-1,p=this.length-bp(this),k=this[p-1];++h<p;){for(v=g.slice(),g.length=0,j=this[h],s=v[(b=v.length-q)-1],m=-1;++m<b;){d=v[m],eQ(d,k,j)?(eQ(s,k,j)||g.push(fz(s,d,k,j)),g.push(d)):eQ(s,k,j)&&g.push(fz(s,d,k,j)),s=d}q&&g.push(g[0]),k=j}return g};var fY,by,dM,jT,eY,ig=[],gZ=[];cV.prototype.prepare=function(){for(var c,a=this.edges,b=a.length;b--;){c=a[b].edge,c.b&&c.a||a.splice(b,1)}return a.sort(dX),a.length},bM.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},hf.prototype={insert:function(f,b){var d,c,a;if(f){if(b.P=f,b.N=f.N,f.N&&(f.N.P=b),f.N=b,f.R){for(f=f.R;f.L;){f=f.L}f.L=b}else{f.R=b}d=f}else{this._?(f=dI(this._),b.P=null,b.N=f,f.P=f.L=b,d=f):(b.P=b.N=null,this._=b,d=null)}for(b.L=b.R=null,b.U=d,b.C=!0,f=b;d&&d.C;){c=d.U,d===c.L?(a=c.R,a&&a.C?(d.C=a.C=!1,c.C=!0,f=c):(f===d.R&&(fV(this,d),f=d,d=f.U),d.C=!1,c.C=!0,bs(this,c))):(a=c.L,a&&a.C?(d.C=a.C=!1,c.C=!0,f=c):(f===d.L&&(bs(this,d),f=d,d=f.U),d.C=!1,c.C=!0,fV(this,c))),d=f.U}this._.C=!1},remove:function(h){h.N&&(h.N.P=h.P),h.P&&(h.P.N=h.N),h.N=h.P=null;var c,f,d,b=h.U,a=h.L,g=h.R;if(f=a?g?dI(g):a:g,b?b.L===h?b.L=f:b.R=f:this._=f,a&&g?(d=f.C,f.C=h.C,f.L=a,a.U=f,f!==g?(b=f.U,f.U=h.U,h=f.R,b.L=h,f.R=g,g.U=f):(f.U=b,b=f,h=f.R)):(d=h.C,h=f),h&&(h.U=b),!d){if(h&&h.C){return void (h.C=!1)}do{if(h===this._){break}if(h===b.L){if(c=b.R,c.C&&(c.C=!1,b.C=!0,fV(this,b),c=b.R),c.L&&c.L.C||c.R&&c.R.C){c.R&&c.R.C||(c.L.C=!1,c.C=!0,bs(this,c),c=b.R),c.C=b.C,b.C=c.R.C=!1,fV(this,b),h=this._;break}}else{if(c=b.L,c.C&&(c.C=!1,b.C=!0,bs(this,b),c=b.L),c.L&&c.L.C||c.R&&c.R.C){c.L&&c.L.C||(c.R.C=!1,c.C=!0,fV(this,c),c=b.L),c.C=b.C,b.C=c.L.C=!1,bs(this,b),h=this._;break}}c.C=!0,h=b,b=b.U}while(!h.C);h&&(h.C=!1)}}},jP.geom.voronoi=function(k){function f(q){var l=new Array(q.length),m=b[0][0],e=b[0][1],a=b[1][0],p=b[1][1];return jN(h(q),b).cells.forEach(function(r,n){var i=r.edges,s=r.site,o=l[n]=i.length?i.map(function(v){var u=v.start();return[u.x,u.y]}):s.x>=m&&s.x<=a&&s.y>=e&&s.y<=p?[[m,p],[a,p],[a,e],[m,e]]:[];o.point=q[n]}),l}function h(a){return a.map(function(i,e){return{x:Math.round(c(i,e)/em)*em,y:Math.round(j(i,e)/em)*em,i:e}})}var g=bK,d=jS,c=g,j=d,b=cb;return k?f(k):(f.links=function(a){return jN(h(a)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:a[e.l.i],target:a[e.r.i]}})},f.triangles=function(e){var a=[];return jN(h(e)).cells.forEach(function(v,m){for(var q,y,n=v.site,x=v.edges.sort(dX),p=-1,w=x.length,t=x[w-1].edge,z=t.l===n?t.r:t.l;++p<w;){q=t,y=z,t=x[p].edge,z=t.l===n?t.r:t.l,m<y.i&&m<z.i&&h4(n,y,z)<0&&a.push([e[m],e[y.i],e[z.i]])}}),a},f.x=function(a){return arguments.length?(c=aX(g=a),f):g},f.y=function(a){return arguments.length?(j=aX(d=a),f):d},f.clipExtent=function(a){return arguments.length?(b=null==a?cb:a,f):b===cb?null:b},f.size=function(a){return arguments.length?f.clipExtent(a&&[[0,0],a]):b===cb?null:b&&b[1]},f)};var cb=[[-1000000,-1000000],[1000000,1000000]];jP.geom.delaunay=function(a){return jP.geom.voronoi().triangles(a)},jP.geom.quadtree=function(d,m,h,b,g){function k(A){function r(w,O,L,p,y,N,v,M){if(!isNaN(L)&&!isNaN(p)){if(w.leaf){var x=w.x,K=w.y;if(null!=x){if(ad(x-L)+ad(K-p)<0.01){H(w,O,L,p,y,N,v,M)}else{var P=w.point;w.x=w.y=w.point=null,H(w,P,x,K,y,N,v,M),H(w,O,L,p,y,N,v,M)}}else{w.x=L,w.y=p,w.point=O}}else{H(w,O,L,p,y,N,v,M)}}}function H(x,Q,N,u,K,w,P,y){var O=0.5*(K+P),M=0.5*(w+y),R=N>=O,L=u>=M,v=L<<1|R;x.leaf=!1,x=x.nodes[v]||(x.nodes[v]=gd()),R?K=O:P=O,L?w=M:y=M,r(x,Q,N,u,K,w,P,y)}var F,t,D,z,E,q,G,i,B,e=aX(j),l=aX(f);if(null!=m){q=m,G=h,i=b,B=g}else{if(i=B=-(q=G=1/0),t=[],D=[],E=A.length,c){for(z=0;E>z;++z){F=A[z],F.x<q&&(q=F.x),F.y<G&&(G=F.y),F.x>i&&(i=F.x),F.y>B&&(B=F.y),t.push(F.x),D.push(F.y)}}else{for(z=0;E>z;++z){var I=+e(F=A[z],z),J=+l(F,z);q>I&&(q=I),G>J&&(G=J),I>i&&(i=I),J>B&&(B=J),t.push(I),D.push(J)}}}var o=i-q,a=B-G;o>a?B=G+o:i=q+a;var C=gd();if(C.add=function(p){r(C,p,+e(p,++z),+l(p,z),q,G,i,B)},C.visit=function(p){dk(p,C,q,G,i,B)},C.find=function(p){return gD(C,p[0],p[1],q,G,i,B)},z=-1,null==m){for(;++z<E;){r(C,A[z],t[z],D[z],q,G,i,B)}--z}else{A.forEach(C.add)}return t=D=A=F=null,C}var c,j=bK,f=jS;return(c=arguments.length)?(j=gV,f=b5,3===c&&(g=h,b=m,h=m=0),k(d)):(k.x=function(a){return arguments.length?(j=a,k):j},k.y=function(a){return arguments.length?(f=a,k):f},k.extent=function(a){return arguments.length?(null==a?m=h=b=g=null:(m=+a[0][0],h=+a[0][1],b=+a[1][0],g=+a[1][1]),k):null==m?null:[[m,h],[b,g]]},k.size=function(a){return arguments.length?(null==a?m=h=b=g=null:(m=h=0,b=+a[0],g=+a[1]),k):null==m?null:[b-m,g-h]},k)},jP.interpolateRgb=a3,jP.interpolateObject=hF,jP.interpolateNumber=j8,jP.interpolateString=eC;var gj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ds=new RegExp(gj.source,"g");jP.interpolate=g1,jP.interpolators=[function(c,a){var b=typeof a;return("string"===b?bE.has(a.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(a)?a3:eC:a instanceof jQ?a3:Array.isArray(a)?ab:"object"===b&&isNaN(a)?hF:j8)(c,a)}],jP.interpolateArray=ab;var gH=function(){return ih},a7=jP.map({linear:gH,poly:aU,quad:function(){return e0},cubic:function(){return fd},sin:function(){return cq},exp:function(){return bD},circle:function(){return jG},elastic:hp,back:cZ,bounce:function(){return eI}}),hI=jP.map({"in":ih,out:ak,"in-out":aL,"out-in":function(a){return aL(ak(a))}});jP.ease=function(d){var a=d.indexOf("-"),c=a>=0?d.slice(0,a):d,b=a>=0?d.slice(a+1):"in";return c=a7.get(c)||gH,b=hI.get(b)||ih,iX(b(c.apply(null,eV.call(arguments,1))))},jP.interpolateHcl=fm,jP.interpolateHsl=bd,jP.interpolateLab=f0,jP.interpolateRound=eh,jP.transform=function(b){var a=gW.createElementNS(jP.ns.prefix.svg,"g");return(jP.transform=function(d){if(null!=d){a.setAttribute("transform",d);var c=a.transform.baseVal.consolidate()}return new fD(c?c.matrix:kd)})(b)},fD.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var kd={a:1,b:0,c:0,d:1,e:0,f:0};jP.interpolateTransform=dZ,jP.layout={},jP.layout.bundle=function(){return function(d){for(var a=[],c=-1,b=d.length;++c<b;){a.push(ip(d[c]))}return a}},jP.layout.chord=function(){function g(){var e,u,F,l,a,o={},E=[],t=jP.range(s),A=[];for(m=[],b=[],e=0,l=-1;++l<s;){for(u=0,a=-1;++a<s;){u+=j[l][a]}E.push(u),A.push(jP.range(s)),e+=u}for(d&&t.sort(function(w,c){return d(E[w],E[c])}),q&&A.forEach(function(w,c){w.sort(function(y,x){return q(j[c][y],j[c][x])})}),e=(jY-k*s)/e,u=0,l=-1;++l<s;){for(F=u,a=-1;++a<s;){var f=t[l],r=A[f][a],B=j[f][r],z=u,D=u+=B*e;o[f+"-"+r]={index:f,subindex:r,startAngle:z,endAngle:D,value:B}}b[f]={index:f,startAngle:F,endAngle:u,value:E[f]},u+=k}for(l=-1;++l<s;){for(a=l-1;++a<s;){var C=o[l+"-"+a],i=o[a+"-"+l];(C.value||i.value)&&m.push(C.value<i.value?{source:i,target:C}:{source:C,target:i})}}h&&v()}function v(){m.sort(function(c,a){return h((c.source.value+c.target.value)/2,(a.source.value+a.target.value)/2)})}var m,b,j,s,d,q,h,p={},k=0;return p.matrix=function(a){return arguments.length?(s=(j=a)&&j.length,m=b=null,p):j},p.padding=function(a){return arguments.length?(k=a,m=b=null,p):k},p.sortGroups=function(a){return arguments.length?(d=a,m=b=null,p):d},p.sortSubgroups=function(a){return arguments.length?(q=a,m=null,p):q},p.sortChords=function(a){return arguments.length?(h=a,m&&v(),p):h},p.chords=function(){return m||g(),m},p.groups=function(){return b||g(),b},p},jP.layout.force=function(){function D(a){return function(x,n,d,h){if(x.point!==a){var v=x.cx-a.x,f=x.cy-a.y,s=h-n,g=v*v+f*f;if(g>s*s/j){if(m>g){var p=x.charge/g;a.px-=v*p,a.py-=f*p}return !0}if(x.point&&g&&m>g){var p=x.pointCharge/g;a.px-=v*p,a.py-=f*p}}return !x.charge}}function w(a){a.px=jP.event.x,a.py=jP.event.y,E.resume()}var J,A,F,q,C,N,E={},L=jP.dispatch("start","tick","end"),I=[1,1],z=0.9,G=eG,B=g6,H=-30,m=ah,K=0.1,j=0.64,b=[],k=[];return E.tick=function(){if((F*=0.99)<0.005){return J=null,L.end({type:"end",alpha:F=0}),!0}var u,a,e,f,c,s,i,d,g,o=b.length,n=k.length;for(a=0;n>a;++a){e=k[a],f=e.source,c=e.target,d=c.x-f.x,g=c.y-f.y,(s=d*d+g*g)&&(s=F*C[a]*((s=Math.sqrt(s))-q[a])/s,d*=s,g*=s,c.x-=d*(i=f.weight+c.weight?f.weight/(f.weight+c.weight):0.5),c.y-=g*i,f.x+=d*(i=1-i),f.y+=g*i)}if((i=F*K)&&(d=I[0]/2,g=I[1]/2,a=-1,i)){for(;++a<o;){e=b[a],e.x+=(d-e.x)*i,e.y+=(g-e.y)*i}}if(H){for(cN(u=jP.geom.quadtree(b),F,N),a=-1;++a<o;){(e=b[a]).fixed||u.visit(D(e))}}for(a=-1;++a<o;){e=b[a],e.fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*z,e.y-=(e.py-(e.py=e.y))*z)}L.tick({type:"tick",alpha:F})},E.nodes=function(a){return arguments.length?(b=a,E):b},E.links=function(a){return arguments.length?(k=a,E):k},E.size=function(a){return arguments.length?(I=a,E):I},E.linkDistance=function(a){return arguments.length?(G="function"==typeof a?a:+a,E):G},E.distance=E.linkDistance,E.linkStrength=function(a){return arguments.length?(B="function"==typeof a?a:+a,E):B},E.friction=function(a){return arguments.length?(z=+a,E):z},E.charge=function(a){return arguments.length?(H="function"==typeof a?a:+a,E):H},E.chargeDistance=function(a){return arguments.length?(m=a*a,E):Math.sqrt(m)},E.gravity=function(a){return arguments.length?(K=+a,E):K},E.theta=function(a){return arguments.length?(j=a*a,E):Math.sqrt(j)},E.alpha=function(a){return arguments.length?(a=+a,F?a>0?F=a:(J.c=null,J.t=NaN,J=null,L.end({type:"end",alpha:F=0})):a>0&&(L.start({type:"start",alpha:F=a}),J=c1(E.tick)),E):F},E.start=function(){function p(x,s){if(!l){for(l=new Array(d),c=0;d>c;++c){l[c]=[]}for(c=0;o>c;++c){var i=k[c];l[i.source.index].push(i.target),l[i.target.index].push(i.source)}}for(var v,e=l[f],c=-1,t=e.length;++c<t;){if(!isNaN(v=e[c][x])){return v}}return Math.random()*s}var f,l,h,d=b.length,o=k.length,g=I[0],a=I[1];for(f=0;d>f;++f){(h=b[f]).index=f,h.weight=0}for(f=0;o>f;++f){h=k[f],"number"==typeof h.source&&(h.source=b[h.source]),"number"==typeof h.target&&(h.target=b[h.target]),++h.source.weight,++h.target.weight}for(f=0;d>f;++f){h=b[f],isNaN(h.x)&&(h.x=p("x",g)),isNaN(h.y)&&(h.y=p("y",a)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y)}if(q=[],"function"==typeof G){for(f=0;o>f;++f){q[f]=+G.call(this,k[f],f)}}else{for(f=0;o>f;++f){q[f]=G}}if(C=[],"function"==typeof B){for(f=0;o>f;++f){C[f]=+B.call(this,k[f],f)}}else{for(f=0;o>f;++f){C[f]=B}}if(N=[],"function"==typeof H){for(f=0;d>f;++f){N[f]=+H.call(this,b[f],f)}}else{for(f=0;d>f;++f){N[f]=H}}return E.resume()},E.resume=function(){return E.alpha(0.1)},E.stop=function(){return E.alpha(0)},E.drag=function(){return A||(A=jP.behavior.drag().origin(ih).on("dragstart.force",fJ).on("drag.force",w).on("dragend.force",ej)),arguments.length?void this.on("mouseover.force",bR).on("mouseout.force",hq).call(A):A},jP.rebind(E,L,"on")};var eG=20,g6=1,ah=1/0;jP.layout.hierarchy=function(){function d(j){var h,m=[j],g=[];for(j.depth=0;null!=(h=m.pop());){if(g.push(h),(n=c.call(d,h,h.depth))&&(e=n.length)){for(var e,n,k;--e>=0;){m.push(k=n[e]),k.parent=h,k.depth=h.depth+1}b&&(h.value=0),h.children=n}else{b&&(h.value=+b.call(d,h,h.depth)||0),delete h.children}}return dP(j,function(o){var l,f;a&&(l=o.children)&&l.sort(a),b&&(f=o.parent)&&(f.value+=o.value)}),g}var a=iv,c=jX,b=e1;return d.sort=function(f){return arguments.length?(a=f,d):a},d.children=function(e){return arguments.length?(c=e,d):c},d.value=function(e){return arguments.length?(b=e,d):b},d.revalue=function(e){return b&&(bz(e,function(f){f.children&&(f.value=0)}),dP(e,function(f){var g;f.children||(f.value=+b.call(d,f,f.depth)||0),(g=f.parent)&&(g.value+=f.value)})),e},d},jP.layout.partition=function(){function f(s,m,g,k){var q=s.children;if(s.x=m,s.y=s.depth*k,s.dx=g,s.dy=k,q&&(h=q.length)){var h,p,j,n=-1;for(g=s.value?g/s.value:0;++n<h;){f(p=q[n],m,j=p.value*g,k),m+=j}}}function b(l){var k=l.children,j=0;if(k&&(h=k.length)){for(var h,g=-1;++g<h;){j=Math.max(j,b(k[g]))}}return 1+j}function d(h,g){var i=c.call(this,h,g);return f(i[0],0,a[0],a[1]/b(i[0])),i}var c=jP.layout.hierarchy(),a=[1,1];return d.size=function(e){return arguments.length?(a=e,d):a},f1(d,c)},jP.layout.pie=function(){function g(i){var u,j=i.length,r=i.map(function(l,h){return +c.call(g,l,h)}),n=+("function"==typeof d?d.apply(this,arguments):d),x=("function"==typeof b?b.apply(this,arguments):b)-n,k=Math.min(Math.abs(x)/j,+("function"==typeof a?a.apply(this,arguments):a)),e=k*(0>x?-1:1),m=jP.sum(r),w=m?(x-j*e)/m:0,q=jP.range(j),t=[];return null!=f&&q.sort(f===i6?function(l,h){return r[h]-r[l]}:function(l,h){return f(i[l],i[h])}),q.forEach(function(h){t[h]={data:i[h],value:u=r[h],startAngle:n,endAngle:n+=u*w+e,padAngle:k}}),t}var c=Number,f=i6,d=0,b=jY,a=0;return g.value=function(h){return arguments.length?(c=h,g):c},g.sort=function(e){return arguments.length?(f=e,g):f},g.startAngle=function(e){return arguments.length?(d=e,g):d},g.endAngle=function(e){return arguments.length?(b=e,g):b},g.padAngle=function(e){return arguments.length?(a=e,g):a},g};var i6={};jP.layout.stack=function(){function h(r,i){if(!(j=r.length)){return r}var o=r.map(function(p,l){return c.call(h,p,l)}),m=o.map(function(l){return l.map(function(p,s){return[a.call(h,p,s),g.call(h,p,s)]})}),u=f.call(h,m,i);o=jP.permute(o,u),m=jP.permute(m,u);var j,e,k,t,n=d.call(h,m,i),q=o[0].length;for(k=0;q>k;++k){for(b.call(h,o[0][k],t=n[k],m[0][k][1]),e=1;j>e;++e){b.call(h,o[e][k],t+=m[e-1][k][1],m[e][k][1])}}return r}var c=ih,f=gK,d=a8,b=dx,a=cf,g=gp;return h.values=function(i){return arguments.length?(c=i,h):c},h.order=function(e){return arguments.length?(f="function"==typeof e?e:ax.get(e)||gK,h):f},h.offset=function(e){return arguments.length?(d="function"==typeof e?e:aP.get(e)||a8,h):d},h.x=function(e){return arguments.length?(a=e,h):a},h.y=function(e){return arguments.length?(g=e,h):g},h.out=function(e){return arguments.length?(b=e,h):b},h};var ax=jP.map({"inside-out":function(g){var v,m,b=g.length,j=g.map(hL),s=g.map(kf),d=jP.range(b).sort(function(c,a){return j[c]-j[a]}),q=0,h=0,p=[],k=[];for(v=0;b>v;++v){m=d[v],h>q?(q+=s[m],p.push(m)):(h+=s[m],k.push(m))}return k.reverse().concat(p)},reverse:function(a){return jP.range(a.length).reverse()},"default":gK}),aP=jP.map({silhouette:function(d){var m,h,b,g=d.length,k=d[0].length,c=[],j=0,f=[];for(h=0;k>h;++h){for(m=0,b=0;g>m;m++){b+=d[m][h][1]}b>j&&(j=b),c.push(b)}for(h=0;k>h;++h){f[h]=(j-c[h])/2}return f},wiggle:function(j){var A,w,b,m,z,g,y,k,x,v=j.length,B=j[0],q=B.length,d=[];for(d[0]=k=x=0,w=1;q>w;++w){for(A=0,m=0;v>A;++A){m+=j[A][w][1]}for(A=0,z=0,y=B[w][0]-B[w-1][0];v>A;++A){for(b=0,g=(j[A][w][1]-j[A][w-1][1])/(2*y);A>b;++b){g+=(j[b][w][1]-j[b][w-1][1])/y}z+=g*j[A][w][1]}d[w]=k-=m?z/m*y:0,x>k&&(x=k)}for(w=0;q>w;++w){d[w]-=x}return d},expand:function(k){var f,h,g,d=k.length,c=k[0].length,j=1/d,b=[];for(h=0;c>h;++h){for(f=0,g=0;d>f;f++){g+=k[f][h][1]}if(g){for(f=0;d>f;f++){k[f][h][1]/=g}}else{for(f=0;d>f;f++){k[f][h][1]=j}}}for(h=0;c>h;++h){b[h]=0}return b},zero:a8});jP.layout.histogram=function(){function f(j,w){for(var i,v,k=[],t=j.map(d,this),r=c.call(this,t,w),x=a.call(this,r,t,w),w=-1,m=t.length,e=x.length-1,q=b?1:1/m;++w<e;){i=k[w]=[],i.dx=x[w+1]-(i.x=x[w]),i.y=0}if(e>0){for(w=-1;++w<m;){v=t[w],v>=r[0]&&v<=r[1]&&(i=k[jP.bisect(x,v,1,e)-1],i.y+=q,i.push(j[w]))}}return k}var b=!0,d=Number,c=jd,a=g8;return f.value=function(e){return arguments.length?(d=e,f):d},f.range=function(e){return arguments.length?(c=aX(e),f):c},f.bins=function(e){return arguments.length?(a="number"==typeof e?function(g){return am(g,e)}:aX(e),f):a},f.frequency=function(g){return arguments.length?(b=!!g,f):b},f},jP.layout.pack=function(){function f(p,h){var k=d.call(this,p,h),g=k[0],e=a[0],m=a[1],j=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(g.x=g.y=0,dP(g,function(l){l.r=+j(l.value)}),dP(g,gQ),c){var i=c*(b?1:Math.max(2*g.r/e,2*g.r/m))/2;dP(g,function(l){l.r+=i}),dP(g,gQ),dP(g,function(l){l.r-=i})}return bI(g,e/2,m/2,b?1:1/Math.max(2*g.r/e,2*g.r/m)),k}var b,d=jP.layout.hierarchy().sort(aB),c=0,a=[1,1];return f.size=function(e){return arguments.length?(a=e,f):a},f.radius=function(g){return arguments.length?(b=null==g||"function"==typeof g?g:+g,f):b},f.padding=function(e){return arguments.length?(c=+e,f):c},f1(f,d)},jP.layout.tree=function(){function f(c,l){var t=d.call(this,c,l),z=t[0],o=q(z);if(dP(o,j),o.parent.m=-o.z,bz(o,b),k){bz(z,p)}else{var a=z,r=z,x=z;bz(z,function(i){i.x<a.x&&(a=i),i.x>r.x&&(r=i),i.depth>x.depth&&(x=i)});var u=m(a,r)/2-a.x,w=g[0]/(r.x+m(r,a)/2+u),e=g[1]/(x.depth||1);bz(z,function(i){i.x=(i.x+u)*w,i.y=i.depth*e})}return t}function q(z){for(var v,x={A:null,children:[z]},w=[x];null!=(v=w.pop());){for(var s,l=v.children,y=0,c=l.length;c>y;++y){w.push((l[y]=s={_:l[y],parent:v,children:(s=l[y].children)&&s.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:y}).a=s)}}return x.children[0]}function j(o){var c=o.children,l=o.parent.children,i=o.i?l[o.i-1]:null;if(c.length){bk(o);var a=(c[0].z+c[c.length-1].z)/2;i?(o.z=i.z+m(o._,i._),o.m=o.z-a):o.z=a}else{i&&(o.z=i.z+m(o._,i._))}o.parent.A=h(o,i,o.parent.A||l[0])}function b(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function h(w,E,B){if(E){for(var a,y=w,D=w,v=E,x=y.parent.children[0],C=y.m,A=D.m,F=v.m,z=x.m;v=eP(v),y=c6(y),v&&y;){x=c6(x),D=eP(D),D.a=w,a=v.z+F-y.z-C+m(v._,y._),a>0&&(fy(f7(v,w,B),w,a),C+=a,A+=a),F+=v.m,C+=y.m,z+=x.m,A+=D.m}v&&!eP(D)&&(D.t=v,D.m+=F-A),y&&!c6(x)&&(x.t=y,x.m+=C-z,B=w)}return B}function p(a){a.x*=g[0],a.y=a.depth*g[1]}var d=jP.layout.hierarchy().sort(null).value(null),m=hA,g=[1,1],k=null;return f.separation=function(a){return arguments.length?(m=a,f):m},f.size=function(a){return arguments.length?(k=null==(g=a)?p:null,f):k?null:g},f.nodeSize=function(a){return arguments.length?(k=null==(g=a)?null:p,f):k?g:null},f1(f,d)},jP.layout.cluster=function(){function f(i,t){var g,r=b.call(this,i,t),j=r[0],q=0;dP(j,function(l){var h=l.children;h&&h.length?(l.x=fK(h),l.y=ex(h)):(l.x=g?q+=d(l,g):0,l.y=0,g=l)});var m=aH(j),v=j3(j),k=m.x-d(m,v)/2,e=v.x+d(v,m)/2;return dP(j,a?function(h){h.x=(h.x-j.x)*c[0],h.y=(j.y-h.y)*c[1]}:function(h){h.x=(h.x-k)/(e-k)*c[0],h.y=(1-(j.y?h.y/j.y:1))*c[1]}),r}var b=jP.layout.hierarchy().sort(null).value(null),d=hA,c=[1,1],a=!1;return f.separation=function(e){return arguments.length?(d=e,f):d},f.size=function(e){return arguments.length?(a=null==(c=e),f):a?null:c},f.nodeSize=function(e){return arguments.length?(a=null!=(c=e),f):a?c:null},f1(f,b)},jP.layout.treemap=function(){function k(l,f){for(var h,g,c=-1,a=l.length;++c<a;){g=(h=l[c]).value*(0>f?0:f),h.area=isNaN(g)||0>=g?0:g}}function C(t){var H=t.children;if(H&&H.length){var i,F,n,E=D(t),s=[],p=H.slice(),r=1/0,G="slice"===d?E.dx:"dice"===d?E.dy:"slice-dice"===d?1&t.depth?E.dy:E.dx:Math.min(E.dx,E.dy);for(k(p,E.dx*E.dy/t.value),s.area=0;(n=p.length)>0;){s.push(i=p[n-1]),s.area+=i.area,"squarify"!==d||(F=b(s,G))<=r?(p.pop(),r=F):(s.area-=s.pop().area,q(s,G,E,!1),G=Math.min(E.dx,E.dy),s.length=s.area=0,r=1/0)}s.length&&(q(s,G,E,!0),s.length=s.area=0),H.forEach(C)}}function y(g){var h=g.children;if(h&&h.length){var f,i=D(g),e=h.slice(),c=[];for(k(e,i.dx*i.dy/g.value),c.area=0;f=e.pop();){c.push(f),c.area+=f.area,null!=f.z&&(q(c,f.z?i.dx:i.dy,i,!e.length),c.length=c.area=0)}h.forEach(y)}}function b(E,h){for(var p,l=E.area,g=0,f=1/0,s=-1,c=E.length;++s<c;){(p=E[s].area)&&(f>p&&(f=p),p>g&&(g=p))}return l*=l,h*=h,l?Math.max(h*g*w/l,l/(h*f*w)):1/0}function q(l,I,E,g){var p,H=-1,h=l.length,G=E.x,F=E.y,s=I?m(l.area/I):0;if(I==E.dx){for((g||s>E.dy)&&(s=E.dy);++H<h;){p=l[H],p.x=G,p.y=F,p.dy=s,G+=p.dx=Math.min(E.x+E.dx-G,s?m(p.area/s):0)}p.z=!0,p.dx+=E.x+E.dx-G,E.y+=s,E.dy-=s}else{for((g||s>E.dx)&&(s=E.dx);++H<h;){p=l[H],p.x=G,p.y=F,p.dx=s,F+=p.dy=Math.min(E.y+E.dy-F,s?m(p.area/s):0)}p.z=!1,p.dy+=E.y+E.dy-F,E.x+=s,E.dx-=s}}function B(e){var c=j||A(e),a=c[0];return a.x=a.y=0,a.value?(a.dx=z[0],a.dy=z[1]):a.dx=a.dy=0,j&&A.revalue(a),k([a],a.dx*a.dy/a.value),(j?y:C)(a),v&&(j=c),c}var j,A=jP.layout.hierarchy(),m=Math.round,z=[1,1],x=null,D=gy,v=!1,d="squarify",w=0.5*(1+Math.sqrt(5));return B.size=function(a){return arguments.length?(z=a,B):z},B.padding=function(g){function a(h){var i=g.call(B,h,h.depth);return null==i?gy(h):jz(h,"number"==typeof i?[i,i,i,i]:i)}function f(e){return jz(e,g)}if(!arguments.length){return x}var c;return D=null==(x=g)?gy:"function"==(c=typeof g)?a:"number"===c?(g=[g,g,g,g],f):f,B},B.round=function(a){return arguments.length?(m=a?Math.round:Number,B):m!=Number},B.sticky=function(a){return arguments.length?(v=a,j=null,B):v},B.ratio=function(a){return arguments.length?(w=a,B):w},B.mode=function(a){return arguments.length?(d=a+"",B):d},f1(B,A)},jP.random={normal:function(c,a){var b=arguments.length;return 2>b&&(a=1),1>b&&(c=0),function(){var g,f,d;do{g=2*Math.random()-1,f=2*Math.random()-1,d=g*g+f*f}while(!d||d>1);return c+a*g*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=jP.random.normal.apply(jP,arguments);return function(){return Math.exp(a())}},bates:function(b){var a=jP.random.irwinHall(b);return function(){return a()/b}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++){b+=Math.random()}return b}}},jP.scale={};var e5={floor:ih,ceil:ih};jP.scale.linear=function(){return dD([0,1],[0,1],g1,!1)};var fj={s:1,g:1,p:1,r:1,e:1};jP.scale.log=function(){return cC(jP.scale.linear().domain([0,1]),10,!0,[1,10])};var gO=jP.format(".0e"),aY={floor:function(a){return -Math.ceil(-a)},ceil:function(a){return -Math.floor(-a)}};jP.scale.pow=function(){return fT(jP.scale.linear(),1,[0,1])},jP.scale.sqrt=function(){return jP.scale.pow().exponent(0.5)},jP.scale.ordinal=function(){return dG([],{t:"range",a:[[]]})},jP.scale.category10=function(){return jP.scale.ordinal().range(cz)},jP.scale.category20=function(){return jP.scale.ordinal().range(bH)},jP.scale.category20b=function(){return jP.scale.ordinal().range(jL)},jP.scale.category20c=function(){return jP.scale.ordinal().range(hx)};var cz=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(af),bH=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(af),jL=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(af),hx=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(af);jP.scale.quantile=function(){return jK([],[])},jP.scale.quantize=function(){return eS(0,1,[0,1])},jP.scale.threshold=function(){return hY([0.5],[0,1])},jP.scale.identity=function(){return gT([0,1])},jP.svg={},jP.svg.arc=function(){function d(){var bl=Math.max(0,+h.apply(this,arguments)),ci=Math.max(0,+b.apply(this,arguments)),ca=c.apply(this,arguments)-jh,ba=j.apply(this,arguments)-jh,bt=Math.abs(ba-ca),bi=ca>ba?0:1;if(bl>ci&&(bu=ci,ci=bl,bl=bu),bt>=gq){return m(ci,bi)+(bl?m(bl,1-bi):"")+"Z"}var bu,au,ce,ao,bn,J,ar,cl,cn,at,r,bo,G=0,aa=0,al=[];if((ao=(+f.apply(this,arguments)||0)/2)&&(ce=k===c3?Math.sqrt(bl*bl+ci*ci):+k.apply(this,arguments),bi||(aa*=-1),ci&&(aa=bP(ce/ci*Math.sin(ao))),bl&&(G=bP(ce/bl*Math.sin(ao)))),ci){bn=ci*Math.cos(ca+aa),J=ci*Math.sin(ca+aa),ar=ci*Math.cos(ba-aa),cl=ci*Math.sin(ba-aa);var ai=Math.abs(ba-ca-2*aa)<=aC?0:1;if(aa&&j5(bn,J,ar,cl)===bi^ai){var an=(ca+ba)/2;bn=ci*Math.cos(an),J=ci*Math.sin(an),ar=cl=null}}else{bn=J=0}if(bl){cn=bl*Math.cos(ba-G),at=bl*Math.sin(ba-G),r=bl*Math.cos(ca+G),bo=bl*Math.sin(ca+G);var K=Math.abs(ca-ba+2*G)<=aC?0:1;if(G&&j5(cn,at,r,bo)===1-bi^K){var be=(ca+ba)/2;cn=bl*Math.cos(be),at=bl*Math.sin(be),r=bo=null}}else{cn=at=0}if(bt>em&&(bu=Math.min(Math.abs(ci-bl)/2,+g.apply(this,arguments)))>0.001){au=ci>bl^bi?0:1;var o=bu,t=bu;if(aC>bt){var ae=null==r?[cn,at]:null==ar?[bn,J]:fz([bn,J],[r,bo],[ar,cl],[cn,at]),u=bn-ae[0],l=J-ae[1],br=ar-ae[0],X=cl-ae[1],W=1/Math.sin(Math.acos((u*br+l*X)/(Math.sqrt(u*u+l*l)*Math.sqrt(br*br+X*X)))/2),B=Math.sqrt(ae[0]*ae[0]+ae[1]*ae[1]);t=Math.min(bu,(bl-B)/(W-1)),o=Math.min(bu,(ci-B)/(W+1))}if(null!=ar){var Q=eA(null==r?[cn,at]:[r,bo],[bn,J],ci,o,bi),e=eA([ar,cl],[cn,at],ci,o,bi);bu===o?al.push("M",Q[0],"A",o,",",o," 0 0,",au," ",Q[1],"A",ci,",",ci," 0 ",1-bi^j5(Q[1][0],Q[1][1],e[1][0],e[1][1]),",",bi," ",e[1],"A",o,",",o," 0 0,",au," ",e[0]):al.push("M",Q[0],"A",o,",",o," 0 1,",au," ",e[0])}else{al.push("M",bn,",",J)}if(null!=r){var a=eA([bn,J],[r,bo],bl,-t,bi),i=eA([cn,at],null==ar?[bn,J]:[ar,cl],bl,-t,bi);bu===t?al.push("L",i[0],"A",t,",",t," 0 0,",au," ",i[1],"A",bl,",",bl," 0 ",bi^j5(i[1][0],i[1][1],a[1][0],a[1][1]),",",1-bi," ",a[1],"A",t,",",t," 0 0,",au," ",a[0]):al.push("L",i[0],"A",t,",",t," 0 0,",au," ",a[0])}else{al.push("L",cn,",",at)}}else{al.push("M",bn,",",J),null!=ar&&al.push("A",ci,",",ci," 0 ",ai,",",bi," ",ar,",",cl),al.push("L",cn,",",at),null!=r&&al.push("A",bl,",",bl," 0 ",K,",",1-bi," ",r,",",bo)}return al.push("Z"),al.join("")}function m(e,a){return"M0,"+e+"A"+e+","+e+" 0 1,"+a+" 0,"+-e+"A"+e+","+e+" 0 1,"+a+" 0,"+e}var h=gb,b=dh,g=b2,k=c3,c=gB,j=a0,f=hD;return d.innerRadius=function(a){return arguments.length?(h=aX(a),d):h},d.outerRadius=function(a){return arguments.length?(b=aX(a),d):b},d.cornerRadius=function(a){return arguments.length?(g=aX(a),d):g},d.padRadius=function(a){return arguments.length?(k=a==c3?c3:aX(a),d):k},d.startAngle=function(a){return arguments.length?(c=aX(a),d):c},d.endAngle=function(a){return arguments.length?(j=aX(a),d):j},d.padAngle=function(a){return arguments.length?(f=aX(a),d):f},d.centroid=function(){var e=(+h.apply(this,arguments)+ +b.apply(this,arguments))/2,a=(+c.apply(this,arguments)+ +j.apply(this,arguments))/2-jh;return[Math.cos(a)*e,Math.sin(a)*e]},d};var c3="auto";jP.svg.line=function(){return gY(ih)};var eN=jP.map({linear:kw,"linear-closed":iR,step:ag,"step-before":aI,"step-after":eX,basis:jD,"basis-open":hj,"basis-closed":cX,bundle:eF,cardinal:aR,"cardinal-open":fb,"cardinal-closed":gG,monotone:av});eN.forEach(function(b,a){a.key=b,a.closed=/-closed$/.test(b)});var fw=[0,2/3,1/3,0],bj=[0,1/3,2/3,0],f5=[0,1/6,2/3,1/6];jP.svg.line.radial=function(){var a=gY(jR);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},aI.reverse=eX,eX.reverse=aI,jP.svg.area=function(){return gh(ih)},jP.svg.area.radial=function(){var a=gh(jR);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},jP.svg.chord=function(){function f(r,i){var e=q(this,p,r,i),o=q(this,d,r,i);return"M"+e.p0+b(e.r,e.p1,e.a1-e.a0)+(j(e,o)?h(e.r,e.p1,e.r,e.p0):h(e.r,e.p1,o.r,o.p0)+b(o.r,o.p1,o.a1-o.a0)+h(o.r,o.p1,e.r,e.p0))+"Z"}function q(y,l,w,s){var c=l.call(y,w,s),a=m.call(y,c,s),x=g.call(y,c,s)-jh,v=k.call(y,c,s)-jh;return{r:a,a0:x,a1:v,p0:[a*Math.cos(x),a*Math.sin(x)],p1:[a*Math.cos(v),a*Math.sin(v)]}}function j(c,a){return c.a0==a.a0&&c.a1==a.a1}function b(i,a,c){return"A"+i+","+i+" 0 "+ +(c>aC)+",1 "+a}function h(l,a,i,c){return"Q 0,0 "+c}var p=g9,d=aw,m=i4,g=gB,k=a0;return f.radius=function(a){return arguments.length?(m=aX(a),f):m},f.source=function(a){return arguments.length?(p=aX(a),f):p},f.target=function(a){return arguments.length?(d=aX(a),f):d},f.startAngle=function(a){return arguments.length?(g=aX(a),f):g},f.endAngle=function(a){return arguments.length?(k=aX(a),f):k},f},jP.svg.diagonal=function(){function d(k,h){var g=a.call(this,k,h),j=c.call(this,k,h),f=(g.y+j.y)/2,e=[g,{x:g.x,y:f},{x:j.x,y:f},j];return e=e.map(b),"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var a=g9,c=aw,b=cJ;return d.source=function(f){return arguments.length?(a=aX(f),d):a},d.target=function(e){return arguments.length?(c=aX(e),d):c},d.projection=function(e){return arguments.length?(b=e,d):b},d},jP.svg.diagonal.radial=function(){var c=jP.svg.diagonal(),a=cJ,b=c.projection;return c.projection=function(d){return arguments.length?b(b9(a=d)):a},c},jP.svg.symbol=function(){function c(e,d){return(es.get(a.call(this,e,d))||dW)(b.call(this,e,d))}var a=c2,b=dL;return c.type=function(d){return arguments.length?(a=aX(d),c):a},c.size=function(d){return arguments.length?(b=aX(d),c):b},c};var es=jP.map({circle:dW,cross:function(b){var a=Math.sqrt(b/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(c){var a=Math.sqrt(c/(2*aF)),b=a*aF;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(b){var a=Math.sqrt(b)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(c){var a=Math.sqrt(c/fH),b=a*fH/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(c){var a=Math.sqrt(c/fH),b=a*fH/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});jP.svg.symbolTypes=es.keys();var fH=Math.sqrt(3),aF=Math.tan(30*cO);bF.transition=function(g){for(var w,m,b=j1||++cm,j=hH(g),v=[],d=gw||{time:Date.now(),ease:gJ,delay:0,duration:250},q=-1,h=this.length;++q<h;){v.push(w=[]);for(var p=this[q],k=-1,x=p.length;++k<x;){(m=p[k])&&fG(m,k,j,b,d),w.push(m)}}return dq(v,j,b)},bF.interrupt=function(a){return this.each(null==a?js:bS(hH(a)))};var j1,gw,js=bS(hH()),cR=[],cm=0;cR.call=bF.call,cR.empty=bF.empty,cR.node=bF.node,cR.size=bF.size,jP.transition=function(b,a){return b&&b.transition?j1?b.transition(a):b:jP.selection().transition(b)},jP.transition.prototype=cR,cR.select=function(g){var w,m,b,j=this.id,v=this.namespace,d=[];g=jC(g);for(var q=-1,h=this.length;++q<h;){d.push(w=[]);for(var p=this[q],k=-1,x=p.length;++k<x;){(b=p[k])&&(m=g.call(b,b.__data__,k,q))?("__data__" in b&&(m.__data__=b.__data__),fG(m,k,v,j,b[v][j]),w.push(m)):w.push(null)}}return dq(d,v,j)},cR.selectAll=function(k){var E,z,b,q,D,j=this.id,B=this.namespace,m=[];k=jA(k);for(var A=-1,y=this.length;++A<y;){for(var F=this[A],w=-1,d=F.length;++w<d;){if(b=F[w]){D=b[B][j],z=k.call(b,b.__data__,w,A),m.push(E=[]);for(var x=-1,C=z.length;++x<C;){(q=z[x])&&fG(q,x,B,j,D),E.push(q)}}}}return dq(m,B,j)},cR.filter=function(d){var m,h,b,g=[];"function"!=typeof d&&(d=i5(d));for(var k=0,c=this.length;c>k;k++){g.push(m=[]);for(var h=this[k],j=0,f=h.length;f>j;j++){(b=h[j])&&d.call(b,b.__data__,j,k)&&m.push(b)}}return dq(g,this.namespace,this.id)},cR.tween=function(d,a){var c=this.id,b=this.namespace;return arguments.length<2?this.node()[b][c].tween.get(d):iP(this,null==a?function(e){e[b][c].tween.remove(d)}:function(e){e[b][c].tween.set(d,a)})},cR.attr=function(k,f){function h(){this.removeAttribute(b)}function g(){this.removeAttributeNS(b.space,b.local)}function d(a){return null==a?h:(a+="",function(){var i,l=this.getAttribute(b);return l!==a&&(i=j(l,a),function(e){this.setAttribute(b,i(e))})})}function c(a){return null==a?g:(a+="",function(){var i,l=this.getAttributeNS(b.space,b.local);return l!==a&&(i=j(l,a),function(e){this.setAttributeNS(b.space,b.local,i(e))})})}if(arguments.length<2){for(f in k){this.attr(f,k[f])}return this}var j="transform"==k?dZ:g1,b=jP.ns.qualify(k);return ic(this,"attr."+k,f,b.local?c:d)},cR.attrTween=function(f,b){function d(i,h){var g=b.call(this,i,h,this.getAttribute(a));return g&&function(e){this.setAttribute(a,g(e))}}function c(i,h){var g=b.call(this,i,h,this.getAttributeNS(a.space,a.local));return g&&function(e){this.setAttributeNS(a.space,a.local,g(e))}}var a=jP.ns.qualify(f);return this.tween("attr."+f,a.local?c:d)},cR.style=function(g,d,c){function b(){this.style.removeProperty(g)}function a(h){return null==h?b:(h+="",function(){var j,e=h2(this).getComputedStyle(this,null).getPropertyValue(g);return e!==h&&(j=g1(e,h),function(i){this.style.setProperty(g,j(i),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof g){2>f&&(d="");for(c in g){this.style(c,g[c],d)}return this}c=""}return ic(this,"style."+g,d,a)},cR.styleTween=function(d,c,b){function a(f,e){var g=c.call(this,f,e,h2(this).getComputedStyle(this,null).getPropertyValue(d));return g&&function(h){this.style.setProperty(d,g(h),b)}}return arguments.length<3&&(b=""),this.tween("style."+d,a)},cR.text=function(a){return ic(this,"text",a,kg)},cR.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},cR.ease=function(c){var a=this.id,b=this.namespace;return arguments.length<1?this.node()[b][a].ease:("function"!=typeof c&&(c=jP.ease.apply(jP,arguments)),iP(this,function(d){d[b][a].ease=c}))},cR.delay=function(c){var a=this.id,b=this.namespace;return arguments.length<1?this.node()[b][a].delay:iP(this,"function"==typeof c?function(f,e,d){f[b][a].delay=+c.call(f,f.__data__,e,d)}:(c=+c,function(d){d[b][a].delay=c}))},cR.duration=function(c){var a=this.id,b=this.namespace;return arguments.length<1?this.node()[b][a].duration:iP(this,"function"==typeof c?function(f,e,d){f[b][a].duration=Math.max(1,c.call(f,f.__data__,e,d))}:(c=Math.max(1,c),function(d){d[b][a].duration=c}))},cR.each=function(g,c){var f=this.id,d=this.namespace;if(arguments.length<2){var b=gw,a=j1;try{j1=f,iP(this,function(j,h,e){gw=j[d][f],g.call(j,j.__data__,h,e)})}finally{gw=b,j1=a}}else{iP(this,function(h){var e=h[d][f];(e.event||(e.event=jP.dispatch("start","end","interrupt"))).on(g,c)})}return this},cR.transition=function(){for(var g,w,m,b,j=this.id,v=++cm,d=this.namespace,q=[],h=0,p=this.length;p>h;h++){q.push(g=[]);for(var w=this[h],k=0,x=w.length;x>k;k++){(m=w[k])&&(b=m[d][j],fG(m,k,d,v,{time:b.time,ease:b.ease,delay:b.delay+b.duration,duration:b.duration})),g.push(m)}}return dq(q,d,v)},jP.svg.axis=function(){function d(a){a.each(function(){var Q,Z=jP.select(this),X=this.__chart__||h,I=this.__chart__=h.copy(),V=null==f?I.ticks?I.ticks.apply(I,j):I.domain():f,P=null==m?I.tickFormat?I.tickFormat.apply(I,j):ih:m,W=Z.selectAll(".tick").data(V,I),G=W.enter().insert("g",".domain").attr("class","tick").style("opacity",em),Y=jP.transition(W.exit()).style("opacity",em).remove(),B=jP.transition(W.order()).style("opacity",1),r=Math.max(g,0)+c,D=cv(I),aa=Z.selectAll(".domain").data([0]),ae=(aa.enter().append("path").attr("class","domain"),jP.transition(aa));G.append("line"),G.append("text");var F,i,U,o,H=G.select("line"),O=B.select("line"),J=W.select("text").text(P),u=G.select("text"),t=B.select("text"),K="top"===b||"left"===b?-1:1;if("bottom"===b||"top"===b?(Q=d8,F="x",U="y",i="x2",o="y2",J.attr("dy",0>K?"0em":".71em").style("text-anchor","middle"),ae.attr("d","M"+D[0]+","+K*k+"V0H"+D[1]+"V"+K*k)):(Q=bO,F="y",U="x",i="y2",o="x2",J.attr("dy",".32em").style("text-anchor",0>K?"end":"start"),ae.attr("d","M"+K*k+","+D[0]+"H0V"+D[1]+"H"+K*k)),H.attr(o,K*g),u.attr(U,K*r),O.attr(i,0).attr(o,K*g),t.attr(F,0).attr(U,K*r),I.rangeBand){var e=I,l=e.rangeBand()/2;X=I=function(p){return e(p)+l}}else{X.rangeBand?X=I:Y.call(Q,I,X)}G.call(Q,X,I),B.call(Q,I,I)})}var m,h=jP.scale.linear(),b=dT,g=6,k=6,c=3,j=[10],f=null;return d.scale=function(a){return arguments.length?(h=a,d):h},d.orient=function(a){return arguments.length?(b=a in db?a+"":dT,d):b},d.ticks=function(){return arguments.length?(j=h7(arguments),d):j},d.tickValues=function(a){return arguments.length?(f=a,d):f},d.tickFormat=function(a){return arguments.length?(m=a,d):m},d.tickSize=function(a){var i=arguments.length;return i?(g=+a,k=+arguments[i-1],d):g},d.innerTickSize=function(a){return arguments.length?(g=+a,d):g},d.outerTickSize=function(a){return arguments.length?(k=+a,d):k},d.tickPadding=function(a){return arguments.length?(c=+a,d):c},d.tickSubdivide=function(){return arguments.length&&d},d};var dT="bottom",db={top:1,right:1,bottom:1,left:1};jP.svg.brush=function(){function k(a){a.each(function(){var f=jP.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",C).on("touchstart.brush",C),n=f.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var e=f.selectAll(".resize").data(B,ih);e.exit().remove(),e.enter().append("g").attr("class",function(h){return"resize "+h}).style("cursor",function(h){return d5[h]}).append("rect").attr("x",function(h){return/[ew]$/.test(h)?-3:null}).attr("y",function(h){return/^[ns]/.test(h)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),e.style("display",k.empty()?"none":null);var c,i=jP.transition(f),g=jP.transition(n);z&&(c=cv(z),g.attr("x",c[0]).attr("width",c[1]-c[0]),b(i)),x&&(c=cv(x),g.attr("y",c[0]).attr("height",c[1]-c[0]),q(i)),y(i)})}function y(a){a.selectAll(".resize").attr("transform",function(c){return"translate("+D[+/e$/.test(c)]+","+t[+/^s/.test(c)]+")"})}function b(a){a.select(".extent").attr("x",D[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",D[1]-D[0])}function q(a){a.select(".extent").attr("y",t[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",t[1]-t[0])}function C(){function p(){32==jP.event.keyCode&&(s||(f=null,g[0]-=D[1],g[1]-=t[1],s=2),iY())}function o(){32==jP.event.keyCode&&2==s&&(g[0]+=D[1],g[1]+=t[1],s=0,iY())}function J(){var v=jP.mouse(K),u=!1;l&&(v[0]+=l[0],v[1]+=l[1]),s||(jP.event.altKey?(f||(f=[(D[0]+D[1])/2,(t[0]+t[1])/2]),g[0]=D[+(v[0]<f[0])],g[1]=t[+(v[1]<f[1])]):f=null),r&&i(v,z,0)&&(b(I),u=!0),G&&i(v,x,1)&&(q(I),u=!0),u&&(y(I),n({type:"brush",mode:s?"move":"resize"}))}function i(L,V,Q){var E,N,U=cv(V),M=U[0],S=U[1],P=g[Q],T=Q?t:D,R=T[1]-T[0];return s&&(M-=P,S-=R+P),E=(Q?w:d)?Math.max(M,Math.min(S,L[Q])):L[Q],s?N=(E+=P)+R:(f&&(P=Math.max(M,Math.min(S,2*f[Q]-E))),E>P?(N=E,E=P):N=P),T[0]!=E||T[1]!=N?(Q?A=null:j=null,T[0]=E,T[1]=N,!0):void 0}function H(){J(),I.style("pointer-events","all").selectAll(".resize").style("display",k.empty()?"none":null),jP.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),h(),n({type:"brushend"})}var f,l,K=this,O=jP.select(jP.event.target),n=m.of(K,arguments),I=jP.select(K),e=O.datum(),r=!/^(n|s)$/.test(e)&&z,G=!/^(e|w)$/.test(e)&&x,s=O.classed("extent"),h=iS(K),g=jP.mouse(K),F=jP.select(h2(K)).on("keydown.brush",p).on("keyup.brush",o);if(jP.event.changedTouches?F.on("touchmove.brush",J).on("touchend.brush",H):F.on("mousemove.brush",J).on("mouseup.brush",H),I.interrupt().selectAll("*").interrupt(),s){g[0]=D[0]-g[0],g[1]=t[0]-g[1]}else{if(e){var a=+/w$/.test(e),c=+/^n/.test(e);l=[D[1-a]-g[0],t[1-c]-g[1]],g[0]=D[a],g[1]=t[c]}else{jP.event.altKey&&(f=g.slice())}}I.style("pointer-events","none").selectAll(".resize").style("display",null),jP.select("body").style("cursor",O.style("cursor")),n({type:"brushstart"}),J()}var j,A,m=i7(k,"brushstart","brush","brushend"),z=null,x=null,D=[0,0],t=[0,0],d=!0,w=!0,B=b0[0];return k.event=function(a){a.each(function(){var g=m.of(this,arguments),c={x:D,y:t,i:j,j:A},f=this.__chart__||c;this.__chart__=c,j1?jP.select(this).transition().each("start.brush",function(){j=f.i,A=f.j,D=f.x,t=f.y,g({type:"brushstart"})}).tween("brush:brush",function(){var i=ab(D,c.x),h=ab(t,c.y);return j=A=null,function(e){D=c.x=i(e),t=c.y=h(e),g({type:"brush",mode:"resize"})}}).each("end.brush",function(){j=c.i,A=c.j,g({type:"brush",mode:"resize"}),g({type:"brushend"})}):(g({type:"brushstart"}),g({type:"brush",mode:"resize"}),g({type:"brushend"}))})},k.x=function(a){return arguments.length?(z=a,B=b0[!z<<1|!x],k):z},k.y=function(a){return arguments.length?(x=a,B=b0[!z<<1|!x],k):x},k.clamp=function(a){return arguments.length?(z&&x?(d=!!a[0],w=!!a[1]):z?d=!!a:x&&(w=!!a),k):z&&x?[d,w]:z?d:x?w:null},k.extent=function(g){var n,h,f,c,a;return arguments.length?(z&&(n=g[0],h=g[1],x&&(n=n[0],h=h[0]),j=[n,h],z.invert&&(n=z(n),h=z(h)),n>h&&(a=n,n=h,h=a),n==D[0]&&h==D[1]||(D=[n,h])),x&&(f=g[0],c=g[1],z&&(f=f[1],c=c[1]),A=[f,c],x.invert&&(f=x(f),c=x(c)),f>c&&(a=f,f=c,c=a),f==t[0]&&c==t[1]||(t=[f,c])),k):(z&&(j?(n=j[0],h=j[1]):(n=D[0],h=D[1],z.invert&&(n=z.invert(n),h=z.invert(h)),n>h&&(a=n,n=h,h=a))),x&&(A?(f=A[0],c=A[1]):(f=t[0],c=t[1],x.invert&&(f=x.invert(f),c=x.invert(c)),f>c&&(a=f,f=c,c=a))),z&&x?[[n,f],[h,c]]:z?[n,h]:x&&[f,c])},k.clear=function(){return k.empty()||(D=[0,0],t=[0,0],j=A=null),k},k.empty=function(){return !!z&&D[0]==D[1]||!!x&&t[0]==t[1]},jP.rebind(k,m,"on")};var d5={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},b0=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],dB=gP.format=aA.timeFormat,iD=dB.utc,ks=iD("%Y-%m-%dT%H:%M:%S.%LZ");dB.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?hg:ks,hg.parse=function(b){var a=new Date(b);return isNaN(a)?null:a},hg.toString=ks.toString,gP.second=gs(function(a){return new bf(1000*Math.floor(a/1000))},function(b,a){b.setTime(b.getTime()+1000*Math.floor(a))},function(a){return a.getSeconds()}),gP.seconds=gP.second.range,gP.seconds.utc=gP.second.utc.range,gP.minute=gs(function(a){return new bf(60000*Math.floor(a/60000))},function(b,a){b.setTime(b.getTime()+60000*Math.floor(a))},function(a){return a.getMinutes()}),gP.minutes=gP.minute.range,gP.minutes.utc=gP.minute.utc.range,gP.hour=gs(function(b){var a=b.getTimezoneOffset()/60;return new bf(3600000*(Math.floor(b/3600000-a)+a))},function(b,a){b.setTime(b.getTime()+3600000*Math.floor(a))},function(a){return a.getHours()}),gP.hours=gP.hour.range,gP.hours.utc=gP.hour.utc.range,gP.month=gs(function(a){return a=gP.day(a),a.setDate(1),a},function(b,a){b.setMonth(b.getMonth()+a)},function(a){return a.getMonth()}),gP.months=gP.month.range,gP.months.utc=gP.month.utc.range;var hP=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000],fO=[[gP.second,1],[gP.second,5],[gP.second,15],[gP.second,30],[gP.minute,1],[gP.minute,5],[gP.minute,15],[gP.minute,30],[gP.hour,1],[gP.hour,3],[gP.hour,6],[gP.hour,12],[gP.day,1],[gP.day,2],[gP.week,1],[gP.month,1],[gP.month,3],[gP.year,1]],ev=dB.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",jF]]),bV={range:function(c,a,b){return jP.range(Math.ceil(c/b)*b,+a,b).map(fW)},floor:ih,ceil:ih};fO.year=gP.year,gP.scale=function(){return cH(jP.scale.linear(),fO,ev)};var hy=fO.map(function(a){return[a[0].utc,a[1]]}),cS=iD.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",jF]]);hy.year=gP.year.utc,gP.scale.utc=function(){return cH(jP.scale.linear(),hy,cS)},jP.text=cx(function(a){return a.responseText}),jP.json=function(b,a){return bG(b,"application/json",bw,a)},jP.html=function(b,a){return bG(b,"text/html",dJ,a)},jP.xml=cx(function(a){return a.responseXML}),"function"==typeof define&&define.amd?(this.d3=jP,define(jP)):"object"==typeof module&&module.exports?module.exports=jP:this.d3=jP}();
!function(ab){function aa(b){this.owner=b}function Z(e,d){if(Object.create){d.prototype=Object.create(e.prototype)}else{var f=function(){};f.prototype=e.prototype,d.prototype=new f}return d.prototype.constructor=d,d}function Y(e){var d=this.internal=new X(this);d.loadConfig(e),d.beforeInit(e),d.init(),d.afterInit(e),function f(g,c,h){Object.keys(g).forEach(function(a){c[a]=g[a].bind(h),Object.keys(g[a]).length>0&&f(g[a],c[a],h)})}(U,this,this)}function X(a){var d=this;d.d3=ab.d3?ab.d3:"undefined"!=typeof require?require("d3"):void 0,d.api=a,d.config=d.getDefaultConfig(),d.data={},d.cache={},d.axes={}}function W(b){aa.call(this,b)}function V(at,ar){function aq(d,c){d.attr("transform",function(b){return"translate("+Math.ceil(c(b)+x)+", 0)"})}function ap(d,c){d.attr("transform",function(b){return"translate(0,"+Math.ceil(c(b))+")"})}function ao(e){var d=e[0],f=e[e.length-1];return f>d?[d,f]:[f,d]}function an(f){var e,h,g=[];if(f.ticks){return f.ticks.apply(f,af)}for(h=f.domain(),e=Math.ceil(h[0]);e<h[1];e++){g.push(e)}return g.length>0&&g[0]>0&&g.unshift(g[0]-(g[1]-g[0])),g}function am(){var b,d=ad.copy();return ar.isCategory&&(b=ad.domain(),d.domain([b[0],b[1]-1])),d}function al(d){var c=ag?ag(d):d;return"undefined"!=typeof c?c:""}function ak(d){if(L){return L}var c={h:11.5,w:5.5};return d.select("text").text(al).each(function(b){var j=this.getBoundingClientRect(),i=al(b),h=j.height,g=i?j.width/i.length:void 0;h&&g&&(c.h=h,c.w=g)}).text(""),L=c,c}function aj(a){return ar.withoutTransition?a:at.transition(a)}function ai(a){a.each(function(){function aJ(m,aO){function aN(aQ,aP){aL=void 0;for(var aR=1;aR<aP.length;aR++){if(" "===aP.charAt(aR)&&(aL=aR),aM=aP.substr(0,aR+1),aK=g.w*aM.length,aK>aO){return aN(aQ.concat(aP.substr(0,aL?aL:aR)),aP.slice(aL?aL+1:aR))}}return aQ.concat(aP)}var aM,aL,aK,v=al(m),n=[];return"[object Array]"===Object.prototype.toString.call(v)?v:((!aO||0>=aO)&&(aO=d?95:ar.isCategory?Math.ceil(aC(aA[1])-aC(aA[0]))-12:110),aN(n,v+""))}function aI(n,m){var v=g.h;return 0===m&&(v="left"===ac||"right"===ac?-((f[n.index]-1)*(g.h/2)-3):".71em"),v}function aB(n){var m=ad(n)+(ae?0:x);return s[0]<m&&m<s[1]?A:0}function az(m){return m?m>0?"start":"end":"middle"}function ax(m){return m?"rotate("+m+")":""}function av(m){return m?8*Math.sin(Math.PI*(m/180)):0}function u(m){return m?11.5-2.5*(m/15)*(m>0?1:-1):e}var aH,aG,aF,aE=ai.g=at.select(this),aD=this.__chart__||ad,aC=this.__chart__=am(),aA=y?y:an(aC),ay=aE.selectAll(".tick").data(aA,aC),aw=ay.enter().insert("g",".domain").attr("class","tick").style("opacity",0.000001),au=ay.exit().remove(),t=aj(ay).style("opacity",1),s=ad.rangeExtent?ad.rangeExtent():ao(ad.range()),r=aE.selectAll(".domain").data([0]),q=(r.enter().append("path").attr("class","domain"),aj(r));aw.append("line"),aw.append("text");var p=aw.select("line"),o=t.select("line"),l=aw.select("text"),k=t.select("text");ar.isCategory?(x=Math.ceil((aC(1)-aC(0))/2),aG=ae?0:x,aF=ae?x:0):x=aG=0;var j,h,g=ak(aE.select(".tick")),f=[],e=Math.max(A,0)+z,d="left"===ac||"right"===ac;j=ay.select("text"),h=j.selectAll("tspan").data(function(m,v){var n=ar.tickMultiline?aJ(m,ar.tickWidth):[].concat(al(m));return f[v]=n.length,n.map(function(aK){return{index:v,splitted:aK}})}),h.enter().append("tspan"),h.exit().remove(),h.text(function(m){return m.splitted});var c=ar.tickTextRotate;switch(ac){case"bottom":aH=aq,p.attr("y2",A),l.attr("y",e),o.attr("x1",aG).attr("x2",aG).attr("y2",aB),k.attr("x",0).attr("y",u(c)).style("text-anchor",az(c)).attr("transform",ax(c)),h.attr("x",0).attr("dy",aI).attr("dx",av(c)),q.attr("d","M"+s[0]+","+ah+"V0H"+s[1]+"V"+ah);break;case"top":aH=aq,p.attr("y2",-A),l.attr("y",-e),o.attr("x2",0).attr("y2",-A),k.attr("x",0).attr("y",-e),j.style("text-anchor","middle"),h.attr("x",0).attr("dy","0em"),q.attr("d","M"+s[0]+","+-ah+"V0H"+s[1]+"V"+-ah);break;case"left":aH=ap,p.attr("x2",-A),l.attr("x",-e),o.attr("x2",-A).attr("y1",aF).attr("y2",aF),k.attr("x",-e).attr("y",x),j.style("text-anchor","end"),h.attr("x",-e).attr("dy",aI),q.attr("d","M"+-ah+","+s[0]+"H0V"+s[1]+"H"+-ah);break;case"right":aH=ap,p.attr("x2",A),l.attr("x",e),o.attr("x2",A).attr("y2",0),k.attr("x",e).attr("y",0),j.style("text-anchor","start"),h.attr("x",e).attr("dy",aI),q.attr("d","M"+ah+","+s[0]+"H0V"+s[1]+"H"+ah)}if(aC.rangeBand){var b=aC,i=b.rangeBand()/2;aD=aC=function(m){return b(m)+i}}else{aD.rangeBand?aD=aC:au.call(aH,aC)}aw.call(aH,aD),t.call(aH,aC)})}var ah,ag,af,ae,ad=at.scale.linear(),ac="bottom",A=6,z=3,y=null,x=0,w=!0;return ar=ar||{},ah=ar.withOuterTick?6:0,ai.scale=function(b){return arguments.length?(ad=b,ai):ad},ai.orient=function(b){return arguments.length?(ac=b in {top:1,right:1,bottom:1,left:1}?b+"":"bottom",ai):ac},ai.tickFormat=function(b){return arguments.length?(ag=b,ai):ag},ai.tickCentered=function(b){return arguments.length?(ae=b,ai):ae},ai.tickOffset=function(){return x},ai.tickInterval=function(){var b,d;return ar.isCategory?b=2*x:(d=ai.g.select("path.domain").node().getTotalLength()-2*ah,b=d/ai.g.selectAll("line").size()),b===1/0?0:b},ai.ticks=function(){return arguments.length?(af=arguments,ai):af},ai.tickCulling=function(b){return arguments.length?(w=b,ai):w},ai.tickValues=function(b){if("function"==typeof b){y=function(){return b(ad.domain())}}else{if(!arguments.length){return y}y=b}return ai},ai}var U,T,S,R={version:"0.4.11"};R.generate=function(b){return new Y(b)},R.chart={fn:Y.prototype,internal:{fn:X.prototype,axis:{fn:W.prototype}}},U=R.chart.fn,T=R.chart.internal.fn,S=R.chart.internal.axis.fn,T.beforeInit=function(){},T.afterInit=function(){},T.init=function(){var d=this,c=d.config;if(d.initParams(),c.data_url){d.convertUrlToData(c.data_url,c.data_mimeType,c.data_headers,c.data_keys,d.initWithData)}else{if(c.data_json){d.initWithData(d.convertJsonToData(c.data_json,c.data_keys))}else{if(c.data_rows){d.initWithData(d.convertRowsToData(c.data_rows))}else{if(!c.data_columns){throw Error("url or json or rows or columns is required.")}d.initWithData(d.convertColumnsToData(c.data_columns))}}}},T.initParams=function(){var e=this,d=e.d3,f=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=f.data_xLocaltime?d.time.format:d.time.format.utc,e.axisTimeFormat=f.axis_x_localtime?d.time.format:d.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%-m/%-d",function(b){return b.getDay()&&1!==b.getDate()}],["%-m/%-d",function(b){return 1!==b.getDate()}],["%-m/%-d",function(b){return b.getMonth()}],["%Y/%-m/%-d",function(){return !0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=f.axis_rotated?"left":"bottom",e.yOrient=f.axis_rotated?f.axis_y_inner?"top":"bottom":f.axis_y_inner?"right":"left",e.y2Orient=f.axis_rotated?f.axis_y2_inner?"bottom":"top":f.axis_y2_inner?"left":"right",e.subXOrient=f.axis_rotated?"left":"bottom",e.isLegendRight="right"===f.legend_position,e.isLegendInset="inset"===f.legend_position,e.isLegendTop="top-left"===f.legend_inset_anchor||"top-right"===f.legend_inset_anchor,e.isLegendLeft="top-left"===f.legend_inset_anchor||"bottom-left"===f.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=f.axis_rotated&&!f.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=d.selectAll([])},T.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},T.initWithData=function(i){var f,n,m=this,l=m.d3,k=m.config,j=!0;m.axis=new W(m),m.initPie&&m.initPie(),m.initBrush&&m.initBrush(),m.initZoom&&m.initZoom(),k.bindto?"function"==typeof k.bindto.node?m.selectChart=k.bindto:m.selectChart=l.select(k.bindto):m.selectChart=l.selectAll([]),m.selectChart.empty()&&(m.selectChart=l.select(document.createElement("div")).style("opacity",0),m.observeInserted(m.selectChart),j=!1),m.selectChart.html("").classed("c3",!0),m.data.xs={},m.data.targets=m.convertDataToTargets(i),k.data_filter&&(m.data.targets=m.data.targets.filter(k.data_filter)),k.data_hide&&m.addHiddenTargetIds(k.data_hide===!0?m.mapToIds(m.data.targets):k.data_hide),k.legend_hide&&m.addHiddenLegendIds(k.legend_hide===!0?m.mapToIds(m.data.targets):k.legend_hide),m.hasType("gauge")&&(k.legend_show=!1),m.updateSizes(),m.updateScales(),m.x.domain(l.extent(m.getXDomain(m.data.targets))),m.y.domain(m.getYDomain(m.data.targets,"y")),m.y2.domain(m.getYDomain(m.data.targets,"y2")),m.subX.domain(m.x.domain()),m.subY.domain(m.y.domain()),m.subY2.domain(m.y2.domain()),m.orgXDomain=m.x.domain(),m.brush&&m.brush.scale(m.subX),k.zoom_enabled&&m.zoom.scale(m.x),m.svg=m.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return k.onmouseover.call(m)}).on("mouseleave",function(){return k.onmouseout.call(m)}),m.config.svg_classname&&m.svg.attr("class",m.config.svg_classname),f=m.svg.append("defs"),m.clipChart=m.appendClip(f,m.clipId),m.clipXAxis=m.appendClip(f,m.clipIdForXAxis),m.clipYAxis=m.appendClip(f,m.clipIdForYAxis),m.clipGrid=m.appendClip(f,m.clipIdForGrid),m.clipSubchart=m.appendClip(f,m.clipIdForSubchart),m.updateSvgSize(),n=m.main=m.svg.append("g").attr("transform",m.getTranslate("main")),m.initSubchart&&m.initSubchart(),m.initTooltip&&m.initTooltip(),m.initLegend&&m.initLegend(),m.initTitle&&m.initTitle(),n.append("text").attr("class",Q.text+" "+Q.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),m.initRegion(),m.initGrid(),n.append("g").attr("clip-path",m.clipPath).attr("class",Q.chart),k.grid_lines_front&&m.initGridLines(),m.initEventRect(),m.initChartElements(),n.insert("rect",k.zoom_privileged?null:"g."+Q.regions).attr("class",Q.zoomRect).attr("width",m.width).attr("height",m.height).style("opacity",0).on("dblclick.zoom",null),k.axis_x_extent&&m.brush.extent(m.getDefaultExtent()),m.axis.init(),m.updateTargets(m.data.targets),j&&(m.updateDimension(),m.config.oninit.call(m),m.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),m.bindResize(),m.api.element=m.selectChart.node()},T.smoothLines=function(e,d){var f=this;"grid"===d&&e.each(function(){var g=f.d3.select(this),c=g.attr("x1"),j=g.attr("x2"),i=g.attr("y1"),h=g.attr("y2");g.attr({x1:Math.ceil(c),x2:Math.ceil(j),y1:Math.ceil(i),y2:Math.ceil(h)})})},T.updateSizes=function(){var j=this,i=j.config,p=j.legend?j.getLegendHeight():0,o=j.legend?j.getLegendWidth():0,n=j.isLegendRight||j.isLegendInset?0:p,m=j.hasArcType(),l=i.axis_rotated||m?0:j.getHorizontalAxisHeight("x"),k=i.subchart_show&&!m?i.subchart_size_height+l:0;j.currentWidth=j.getCurrentWidth(),j.currentHeight=j.getCurrentHeight(),j.margin=i.axis_rotated?{top:j.getHorizontalAxisHeight("y2")+j.getCurrentPaddingTop(),right:m?0:j.getCurrentPaddingRight(),bottom:j.getHorizontalAxisHeight("y")+n+j.getCurrentPaddingBottom(),left:k+(m?0:j.getCurrentPaddingLeft())}:{top:4+j.getCurrentPaddingTop(),right:m?0:j.getCurrentPaddingRight(),bottom:l+k+n+j.getCurrentPaddingBottom(),left:m?0:j.getCurrentPaddingLeft()},j.margin2=i.axis_rotated?{top:j.margin.top,right:NaN,bottom:20+n,left:j.rotated_padding_left}:{top:j.currentHeight-k-n,right:NaN,bottom:l+n,left:j.margin.left},j.margin3={top:0,right:NaN,bottom:0,left:0},j.updateSizeForLegend&&j.updateSizeForLegend(p,o),j.width=j.currentWidth-j.margin.left-j.margin.right,j.height=j.currentHeight-j.margin.top-j.margin.bottom,j.width<0&&(j.width=0),j.height<0&&(j.height=0),j.width2=i.axis_rotated?j.margin.left-j.rotated_padding_left-j.rotated_padding_right:j.width,j.height2=i.axis_rotated?j.height:j.currentHeight-j.margin2.top-j.margin2.bottom,j.width2<0&&(j.width2=0),j.height2<0&&(j.height2=0),j.arcWidth=j.width-(j.isLegendRight?o+10:0),j.arcHeight=j.height-(j.isLegendRight?0:10),j.hasType("gauge")&&!i.gauge_fullCircle&&(j.arcHeight+=j.height-j.getGaugeLabelHeight()),j.updateRadius&&j.updateRadius(),j.isLegendRight&&m&&(j.margin3.left=j.arcWidth/2+1.1*j.radiusExpanded)},T.updateTargets=function(d){var c=this;c.updateTargetsForText(d),c.updateTargetsForBar(d),c.updateTargetsForLine(d),c.hasArcType()&&c.updateTargetsForArc&&c.updateTargetsForArc(d),c.updateTargetsForSubchart&&c.updateTargetsForSubchart(d),c.showTargets()},T.showTargets=function(){var b=this;b.svg.selectAll("."+Q.target).filter(function(a){return b.isTargetToShow(a.id)}).transition().duration(b.config.transition_duration).style("opacity",1)},T.redraw=function(aP,aO){var aN,aM,aL,aK,aJ,aI,aH,aG,aF,aE,aD,aC,aB,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an,am,al,ak,aj=this,ai=aj.main,ah=aj.d3,ag=aj.config,af=aj.getShapeIndices(aj.isAreaType),ae=aj.getShapeIndices(aj.isBarType),ad=aj.getShapeIndices(aj.isLineType),ac=aj.hasArcType(),w=aj.filterTargetsToShow(aj.data.targets),l=aj.xv.bind(aj);if(aP=aP||{},aN=E(aP,"withY",!0),aM=E(aP,"withSubchart",!0),aL=E(aP,"withTransition",!0),aI=E(aP,"withTransform",!1),aH=E(aP,"withUpdateXDomain",!1),aG=E(aP,"withUpdateOrgXDomain",!1),aF=E(aP,"withTrimXDomain",!0),aB=E(aP,"withUpdateXAxis",aH),aE=E(aP,"withLegend",!1),aD=E(aP,"withEventRect",!0),aC=E(aP,"withDimension",!0),aK=E(aP,"withTransitionForExit",aL),aJ=E(aP,"withTransitionForAxis",aL),av=aL?ag.transition_duration:0,au=aK?av:0,at=aJ?av:0,aO=aO||aj.axis.generateTransitions(at),aE&&ag.legend_show?aj.updateLegend(aj.mapToIds(aj.data.targets),aP,aO):aC&&aj.updateDimension(!0),aj.isCategorized()&&0===w.length&&aj.x.domain([0,aj.axes.x.selectAll(".tick").size()]),w.length?(aj.updateXDomain(w,aH,aG,aF),ag.axis_x_tick_values||(ap=aj.axis.updateXAxisTickValues(w))):(aj.xAxis.tickValues([]),aj.subXAxis.tickValues([])),ag.zoom_rescale&&!aP.flow&&(am=aj.x.orgDomain()),aj.y.domain(aj.getYDomain(w,"y",am)),aj.y2.domain(aj.getYDomain(w,"y2",am)),!ag.axis_y_tick_values&&ag.axis_y_tick_count&&aj.yAxis.tickValues(aj.axis.generateTickValues(aj.y.domain(),ag.axis_y_tick_count)),!ag.axis_y2_tick_values&&ag.axis_y2_tick_count&&aj.y2Axis.tickValues(aj.axis.generateTickValues(aj.y2.domain(),ag.axis_y2_tick_count)),aj.axis.redraw(aO,ac),aj.axis.updateLabels(aL),(aH||aB)&&w.length){if(ag.axis_x_tick_culling&&ap){for(ao=1;ao<ap.length;ao++){if(ap.length/ao<ag.axis_x_tick_culling_max){an=ao;break}}aj.svg.selectAll("."+Q.axisX+" .tick text").each(function(d){var c=ap.indexOf(d);c>=0&&ah.select(this).style("display",c%an?"none":"block")})}else{aj.svg.selectAll("."+Q.axisX+" .tick text").style("display","block")}}aA=aj.generateDrawArea?aj.generateDrawArea(af,!1):void 0,az=aj.generateDrawBar?aj.generateDrawBar(ae):void 0,ay=aj.generateDrawLine?aj.generateDrawLine(ad,!1):void 0,ax=aj.generateXYForText(af,ae,ad,!0),aw=aj.generateXYForText(af,ae,ad,!1),aN&&(aj.subY.domain(aj.getYDomain(w,"y")),aj.subY2.domain(aj.getYDomain(w,"y2"))),aj.updateXgridFocus(),ai.select("text."+Q.text+"."+Q.empty).attr("x",aj.width/2).attr("y",aj.height/2).text(ag.data_empty_label_text).transition().style("opacity",w.length?0:1),aj.updateGrid(av),aj.updateRegion(av),aj.updateBar(au),aj.updateLine(au),aj.updateArea(au),aj.updateCircle(),aj.hasDataLabel()&&aj.updateText(au),aj.redrawTitle&&aj.redrawTitle(),aj.redrawArc&&aj.redrawArc(av,au,aI),aj.redrawSubchart&&aj.redrawSubchart(aM,aO,av,au,af,ae,ad),ai.selectAll("."+Q.selectedCircles).filter(aj.isBarType.bind(aj)).selectAll("circle").remove(),ag.interaction_enabled&&!aP.flow&&aD&&(aj.redrawEventRect(),aj.updateZoom&&aj.updateZoom()),aj.updateCircleY(),al=(aj.config.axis_rotated?aj.circleY:aj.circleX).bind(aj),ak=(aj.config.axis_rotated?aj.circleX:aj.circleY).bind(aj),aP.flow&&(aq=aj.generateFlow({targets:w,flow:aP.flow,duration:aP.flow.duration,drawBar:az,drawLine:ay,drawArea:aA,cx:al,cy:ak,xv:l,xForText:ax,yForText:aw})),(av||aq)&&aj.isTabVisible()?ah.transition().duration(av).each(function(){var a=[];[aj.redrawBar(az,!0),aj.redrawLine(ay,!0),aj.redrawArea(aA,!0),aj.redrawCircle(al,ak,!0),aj.redrawText(ax,aw,aP.flow,!0),aj.redrawRegion(!0),aj.redrawGrid(!0)].forEach(function(b){b.forEach(function(c){a.push(c)})}),ar=aj.generateWait(),a.forEach(function(b){ar.add(b)})}).call(ar,function(){aq&&aq(),ag.onrendered&&ag.onrendered.call(aj)}):(aj.redrawBar(az),aj.redrawLine(ay),aj.redrawArea(aA),aj.redrawCircle(al,ak),aj.redrawText(ax,aw,aP.flow),aj.redrawRegion(),aj.redrawGrid(),ag.onrendered&&ag.onrendered.call(aj)),aj.mapToIds(aj.data.targets).forEach(function(b){aj.withoutFadeIn[b]=!0})},T.updateAndRedraw=function(f){var e,h=this,g=h.config;f=f||{},f.withTransition=E(f,"withTransition",!0),f.withTransform=E(f,"withTransform",!1),f.withLegend=E(f,"withLegend",!1),f.withUpdateXDomain=!0,f.withUpdateOrgXDomain=!0,f.withTransitionForExit=!1,f.withTransitionForTransform=E(f,"withTransitionForTransform",f.withTransition),h.updateSizes(),f.withLegend&&g.legend_show||(e=h.axis.generateTransitions(f.withTransitionForAxis?g.transition_duration:0),h.updateScales(),h.updateSvgSize(),h.transformAll(f.withTransitionForTransform,e)),h.redraw(f,e)},T.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},T.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},T.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},T.isCustomX=function(){var d=this,c=d.config;return !d.isTimeSeries()&&(c.data_x||F(c.data_xs))},T.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},T.getTranslate=function(g){var f,j,i=this,h=i.config;return"main"===g?(f=I(i.margin.left),j=I(i.margin.top)):"context"===g?(f=I(i.margin2.left),j=I(i.margin2.top)):"legend"===g?(f=i.margin3.left,j=i.margin3.top):"x"===g?(f=0,j=h.axis_rotated?0:i.height):"y"===g?(f=0,j=h.axis_rotated?i.height:0):"y2"===g?(f=h.axis_rotated?0:i.width,j=h.axis_rotated?1:0):"subx"===g?(f=0,j=h.axis_rotated?0:i.height2):"arc"===g&&(f=i.arcWidth/2,j=i.arcHeight/2),"translate("+f+","+j+")"},T.initialOpacity=function(b){return null!==b.value&&this.withoutFadeIn[b.id]?1:0},T.initialOpacityForCircle=function(b){return null!==b.value&&this.withoutFadeIn[b.id]?this.opacityForCircle(b):0},T.opacityForCircle=function(d){var c=this.config.point_show?1:0;return P(d.value)?this.isScatterType(d)?0.5:c:0},T.opacityForText=function(){return this.hasDataLabel()?1:0},T.xx=function(b){return b?this.x(b.x):null},T.xv=function(e){var d=this,f=e.value;return d.isTimeSeries()?f=d.parseDate(e.value):d.isCategorized()&&"string"==typeof e.value&&(f=d.config.axis_x_categories.indexOf(e.value)),Math.ceil(d.x(f))},T.yv=function(e){var d=this,f=e.axis&&"y2"===e.axis?d.y2:d.y;return Math.ceil(f(e.value))},T.subxx=function(b){return b?this.subX(b.x):null},T.transformMain=function(h,g){var l,k,j,i=this;g&&g.axisX?l=g.axisX:(l=i.main.select("."+Q.axisX),h&&(l=l.transition())),g&&g.axisY?k=g.axisY:(k=i.main.select("."+Q.axisY),h&&(k=k.transition())),g&&g.axisY2?j=g.axisY2:(j=i.main.select("."+Q.axisY2),h&&(j=j.transition())),(h?i.main.transition():i.main).attr("transform",i.getTranslate("main")),l.attr("transform",i.getTranslate("x")),k.attr("transform",i.getTranslate("y")),j.attr("transform",i.getTranslate("y2")),i.main.select("."+Q.chartArcs).attr("transform",i.getTranslate("arc"))},T.transformAll=function(e,d){var f=this;f.transformMain(e,d),f.config.subchart_show&&f.transformContext(e,d),f.legend&&f.transformLegend(e)},T.updateSvgSize=function(){var d=this,c=d.svg.select(".c3-brush .background");d.svg.attr("width",d.currentWidth).attr("height",d.currentHeight),d.svg.selectAll(["#"+d.clipId,"#"+d.clipIdForGrid]).select("rect").attr("width",d.width).attr("height",d.height),d.svg.select("#"+d.clipIdForXAxis).select("rect").attr("x",d.getXAxisClipX.bind(d)).attr("y",d.getXAxisClipY.bind(d)).attr("width",d.getXAxisClipWidth.bind(d)).attr("height",d.getXAxisClipHeight.bind(d)),d.svg.select("#"+d.clipIdForYAxis).select("rect").attr("x",d.getYAxisClipX.bind(d)).attr("y",d.getYAxisClipY.bind(d)).attr("width",d.getYAxisClipWidth.bind(d)).attr("height",d.getYAxisClipHeight.bind(d)),d.svg.select("#"+d.clipIdForSubchart).select("rect").attr("width",d.width).attr("height",c.size()?c.attr("height"):0),d.svg.select("."+Q.zoomRect).attr("width",d.width).attr("height",d.height),d.selectChart.style("max-height",d.currentHeight+"px")},T.updateDimension=function(d){var c=this;d||(c.config.axis_rotated?(c.axes.x.call(c.xAxis),c.axes.subx.call(c.subXAxis)):(c.axes.y.call(c.yAxis),c.axes.y2.call(c.y2Axis))),c.updateSizes(),c.updateScales(),c.updateSvgSize(),c.transformAll(!1)},T.observeInserted=function(a){var f,e=this;return"undefined"==typeof MutationObserver?void ab.console.error("MutationObserver not defined."):(f=new MutationObserver(function(b){b.forEach(function(c){"childList"===c.type&&c.previousSibling&&(f.disconnect(),e.intervalForObserveInserted=ab.setInterval(function(){a.node().parentNode&&(ab.clearInterval(e.intervalForObserveInserted),e.updateDimension(),e.brush&&e.brush.update(),e.config.oninit.call(e),e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})}),void f.observe(a.node(),{attributes:!0,childList:!0,characterData:!0}))},T.bindResize=function(){var a=this,f=a.config;if(a.resizeFunction=a.generateResize(),a.resizeFunction.add(function(){f.onresize.call(a)}),f.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&ab.clearTimeout(a.resizeTimeout),a.resizeTimeout=ab.setTimeout(function(){delete a.resizeTimeout,a.api.flush()},100)}),a.resizeFunction.add(function(){f.onresized.call(a)}),ab.attachEvent){ab.attachEvent("onresize",a.resizeFunction)}else{if(ab.addEventListener){ab.addEventListener("resize",a.resizeFunction,!1)}else{var e=ab.onresize;e?e.add&&e.remove||(e=a.generateResize(),e.add(ab.onresize)):e=a.generateResize(),e.add(a.resizeFunction),ab.onresize=e}}},T.generateResize=function(){function d(){c.forEach(function(b){b()})}var c=[];return d.add=function(b){c.push(b)},d.remove=function(b){for(var e=0;e<c.length;e++){if(c[e]===b){c.splice(e,1);break}}},d},T.endall=function(e,d){var f=0;e.each(function(){++f}).each("end",function(){--f||d.apply(this,arguments)})},T.generateWait=function(){var d=[],c=function(a,f){var e=setInterval(function(){var g=0;d.forEach(function(b){if(b.empty()){return void (g+=1)}try{b.transition()}catch(h){g+=1}}),g===d.length&&(clearInterval(e),f&&f())},10)};return c.add=function(a){d.push(a)},c},T.parseDate=function(a){var f,e=this;return a instanceof Date?f=a:"string"==typeof a?f=e.dataTimeFormat(e.config.data_xFormat).parse(a):"number"!=typeof a||isNaN(a)||(f=new Date(+a)),f&&!isNaN(+f)||ab.console.error("Failed to parse x '"+a+"' to Date object"),f},T.isTabVisible=function(){var b;return"undefined"!=typeof document.hidden?b="hidden":"undefined"!=typeof document.mozHidden?b="mozHidden":"undefined"!=typeof document.msHidden?b="msHidden":"undefined"!=typeof document.webkitHidden&&(b="webkitHidden"),!document[b]},T.getDefaultConfig=function(){var b={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(c){return c},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return !0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:0.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:0.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:0.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(f,e,h,g){return this.getTooltipContent?this.getTooltipContent(f,e,h,g):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(a){b[a]=this.additionalConfig[a]},this),b},T.additionalConfig={},T.loadConfig=function(h){function g(){var b=k.shift();return b&&l&&"object"==typeof l&&b in l?(l=l[b],g()):b?void 0:l}var l,k,j,i=this.config;Object.keys(i).forEach(function(a){l=h,k=a.split("_"),j=g(),K(j)&&(i[a]=j)})},T.getScale=function(e,d,f){return(f?this.d3.time.scale():this.d3.scale.linear()).range([e,d])},T.getX=function(j,i,p,o){var n,m=this,l=m.getScale(j,i,m.isTimeSeries()),k=p?l.domain(p):l;m.isCategorized()?(o=o||function(){return 0},l=function(e,d){var f=k(e)+o(e);return d?f:Math.ceil(f)}):l=function(e,d){var f=k(e);return d?f:Math.ceil(f)};for(n in k){l[n]=k[n]}return l.orgDomain=function(){return k.domain()},m.isCategorized()&&(l.domain=function(b){return arguments.length?(k.domain(b),l):(b=this.orgDomain(),[b[0],b[1]+1])}),l},T.getY=function(f,e,h){var g=this.getScale(f,e,this.isTimeSeriesY());return h&&g.domain(h),g},T.getYScale=function(b){return"y2"===this.axis.getId(b)?this.y2:this.y},T.getSubYScale=function(b){return"y2"===this.axis.getId(b)?this.subY2:this.subY},T.updateScales=function(){var e=this,d=e.config,f=!e.x;e.xMin=d.axis_rotated?1:0,e.xMax=d.axis_rotated?e.height:e.width,e.yMin=d.axis_rotated?0:e.height,e.yMax=d.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=d.axis_rotated?0:e.height2,e.subYMax=d.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,f?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,f?d.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,f?d.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(a){return a%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,f?d.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,f?d.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,d.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,d.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,d.axis_y_tick_format,e.yAxisTickValues,d.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,d.axis_y2_tick_format,e.y2AxisTickValues,d.axis_y2_tick_outer),f||(e.brush&&e.brush.scale(e.subX),d.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},T.getYDomainMin=function(v){var u,t,s,r,q,p,o=this,n=o.config,m=o.mapToIds(v),l=o.getValuesAsIdKeyed(v);if(n.data_groups.length>0){for(p=o.hasNegativeValueInTargets(v),u=0;u<n.data_groups.length;u++){if(r=n.data_groups[u].filter(function(b){return m.indexOf(b)>=0}),0!==r.length){for(s=r[0],p&&l[s]&&l[s].forEach(function(d,c){l[s][c]=0>d?d:0}),t=1;t<r.length;t++){q=r[t],l[q]&&l[q].forEach(function(d,c){o.axis.getId(q)!==o.axis.getId(s)||!l[s]||p&&+d>0||(l[s][c]+=+d)})}}}}return o.d3.min(Object.keys(l).map(function(b){return o.d3.min(l[b])}))},T.getYDomainMax=function(v){var u,t,s,r,q,p,o=this,n=o.config,m=o.mapToIds(v),l=o.getValuesAsIdKeyed(v);if(n.data_groups.length>0){for(p=o.hasPositiveValueInTargets(v),u=0;u<n.data_groups.length;u++){if(r=n.data_groups[u].filter(function(b){return m.indexOf(b)>=0}),0!==r.length){for(s=r[0],p&&l[s]&&l[s].forEach(function(d,c){l[s][c]=d>0?d:0}),t=1;t<r.length;t++){q=r[t],l[q]&&l[q].forEach(function(d,c){o.axis.getId(q)!==o.axis.getId(s)||!l[s]||p&&0>+d||(l[s][c]+=+d)})}}}}return o.d3.max(Object.keys(l).map(function(b){return o.d3.max(l[b])}))},T.getYDomain=function(aA,az,ay){var ax,aw,av,au,at,ar,aq,ap,ao,an,am,al=this,aj=al.config,ah=aA.filter(function(b){return al.axis.getId(b.id)===az}),af=ay?al.filterByXDomain(ah,ay):ah,ad="y2"===az?aj.axis_y2_min:aj.axis_y_min,ac="y2"===az?aj.axis_y2_max:aj.axis_y_max,v=al.getYDomainMin(af),t=al.getYDomainMax(af),m="y2"===az?aj.axis_y2_center:aj.axis_y_center,ak=al.hasType("bar",af)&&aj.bar_zerobased||al.hasType("area",af)&&aj.area_zerobased,ai="y2"===az?aj.axis_y2_inverted:aj.axis_y_inverted,ag=al.hasDataLabel()&&aj.axis_rotated,ae=al.hasDataLabel()&&!aj.axis_rotated;return v=P(ad)?ad:P(ac)?ac>v?v:ac-10:v,t=P(ac)?ac:P(ad)?t>ad?t:ad+10:t,0===af.length?"y2"===az?al.y2.domain():al.y.domain():(isNaN(v)&&(v=0),isNaN(t)&&(t=v),v===t&&(0>v?t=0:v=0),an=v>=0&&t>=0,am=0>=v&&0>=t,(P(ad)&&an||P(ac)&&am)&&(ak=!1),ak&&(an&&(v=0),am&&(t=0)),aw=Math.abs(t-v),av=au=at=0.1*aw,"undefined"!=typeof m&&(ar=Math.max(Math.abs(v),Math.abs(t)),t=m+ar,v=m-ar),ag?(aq=al.getDataLabelLength(v,t,"width"),ap=H(al.y.range()),ao=[aq[0]/ap,aq[1]/ap],au+=aw*(ao[1]/(1-ao[0]-ao[1])),at+=aw*(ao[0]/(1-ao[0]-ao[1]))):ae&&(aq=al.getDataLabelLength(v,t,"height"),au+=al.axis.convertPixelsToAxisPadding(aq[1],aw),at+=al.axis.convertPixelsToAxisPadding(aq[0],aw)),"y"===az&&F(aj.axis_y_padding)&&(au=al.axis.getPadding(aj.axis_y_padding,"top",au,aw),at=al.axis.getPadding(aj.axis_y_padding,"bottom",at,aw)),"y2"===az&&F(aj.axis_y2_padding)&&(au=al.axis.getPadding(aj.axis_y2_padding,"top",au,aw),at=al.axis.getPadding(aj.axis_y2_padding,"bottom",at,aw)),ak&&(an&&(at=v),am&&(au=-t)),ax=[v-at,t+au],ai?ax.reverse():ax)},T.getXDomainMin=function(e){var d=this,f=d.config;return K(f.axis_x_min)?d.isTimeSeries()?this.parseDate(f.axis_x_min):f.axis_x_min:d.d3.min(e,function(b){return d.d3.min(b.values,function(c){return c.x})})},T.getXDomainMax=function(e){var d=this,f=d.config;return K(f.axis_x_max)?d.isTimeSeries()?this.parseDate(f.axis_x_max):f.axis_x_max:d.d3.max(e,function(b){return d.d3.max(b.values,function(c){return c.x})})},T.getXDomainPadding=function(j){var i,p,o,n,m=this,l=m.config,k=j[1]-j[0];return m.isCategorized()?p=0:m.hasType("bar")?(i=m.getMaxDataCount(),p=i>1?k/(i-1)/2:0.5):p=0.01*k,"object"==typeof l.axis_x_padding&&F(l.axis_x_padding)?(o=P(l.axis_x_padding.left)?l.axis_x_padding.left:p,n=P(l.axis_x_padding.right)?l.axis_x_padding.right:p):o=n="number"==typeof l.axis_x_padding?l.axis_x_padding:p,{left:o,right:n}},T.getXDomain=function(j){var i=this,p=[i.getXDomainMin(j),i.getXDomainMax(j)],o=p[0],n=p[1],m=i.getXDomainPadding(p),l=0,k=0;return o-n!==0||i.isCategorized()||(i.isTimeSeries()?(o=new Date(0.5*o.getTime()),n=new Date(1.5*n.getTime())):(o=0===o?1:0.5*o,n=0===n?-1:1.5*n)),(o||0===o)&&(l=i.isTimeSeries()?new Date(o.getTime()-m.left):o-m.left),(n||0===n)&&(k=i.isTimeSeries()?new Date(n.getTime()+m.right):n+m.right),[l,k]},T.updateXDomain=function(i,h,n,m,l){var k=this,j=k.config;return n&&(k.x.domain(l?l:k.d3.extent(k.getXDomain(i))),k.orgXDomain=k.x.domain(),j.zoom_enabled&&k.zoom.scale(k.x).updateScaleExtent(),k.subX.domain(k.x.domain()),k.brush&&k.brush.scale(k.subX)),h&&(k.x.domain(l?l:!k.brush||k.brush.empty()?k.orgXDomain:k.brush.extent()),j.zoom_enabled&&k.zoom.scale(k.x).updateScaleExtent()),m&&k.x.domain(k.trimXDomain(k.x.orgDomain())),k.x.domain()},T.trimXDomain=function(f){var e=this.getZoomDomain(),h=e[0],g=e[1];return f[0]<=h&&(f[1]=+f[1]+(h-f[0]),f[0]=h),g<=f[1]&&(f[0]=+f[0]-(f[1]-g),f[1]=g),f},T.isX=function(e){var d=this,f=d.config;return f.data_x&&e===f.data_x||F(f.data_xs)&&D(f.data_xs,e)},T.isNotX=function(b){return !this.isX(b)},T.getXKey=function(e){var d=this,f=d.config;return f.data_x?f.data_x:F(f.data_xs)?f.data_xs[e]:null},T.getXValuesOfXKey=function(g,f){var j,i=this,h=f&&F(f)?i.mapToIds(f):[];return h.forEach(function(a){i.getXKey(a)===g&&(j=i.data.xs[a])}),j},T.getIndexByX=function(e){var d=this,f=d.filterByX(d.data.targets,e);return f.length?f[0].index:null},T.getXValue=function(e,d){var f=this;return e in f.data.xs&&f.data.xs[e]&&P(f.data.xs[e][d])?f.data.xs[e][d]:d},T.getOtherTargetXs=function(){var d=this,c=Object.keys(d.data.xs);return c.length?d.data.xs[c[0]]:null},T.getOtherTargetX=function(d){var c=this.getOtherTargetXs();return c&&d<c.length?c[d]:null},T.addXs=function(d){var c=this;Object.keys(d).forEach(function(a){c.config.data_xs[a]=d[a]})},T.hasMultipleX=function(b){return this.d3.set(Object.keys(b).map(function(a){return b[a]})).size()>1},T.isMultipleX=function(){return F(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},T.addName=function(e){var d,f=this;return e&&(d=f.config.data_names[e.id],e.name=void 0!==d?d:e.id),e},T.getValueOnIndex=function(e,d){var f=e.filter(function(b){return b.index===d});return f.length?f[0]:null},T.updateTargetX=function(e,d){var f=this;e.forEach(function(b){b.values.forEach(function(c,a){c.x=f.generateTargetX(d[a],b.id,a)}),f.data.xs[b.id]=d})},T.updateTargetXs=function(e,d){var f=this;e.forEach(function(b){d[b.id]&&f.updateTargetX([b],d[b.id])})},T.generateTargetX=function(g,f,j){var i,h=this;return i=h.isTimeSeries()?g?h.parseDate(g):h.parseDate(h.getXValue(f,j)):h.isCustomX()&&!h.isCategorized()?P(g)?+g:h.getXValue(f,j):j},T.cloneTarget=function(b){return{id:b.id,id_org:b.id_org,values:b.values.map(function(c){return{x:c.x,value:c.value,id:c.id}})}},T.updateXs=function(){var b=this;b.data.targets.length&&(b.xs=[],b.data.targets[0].values.forEach(function(a){b.xs[a.index]=a.x}))},T.getPrevX=function(d){var c=this.xs[d-1];return"undefined"!=typeof c?c:null},T.getNextX=function(d){var c=this.xs[d+1];return"undefined"!=typeof c?c:null},T.getMaxDataCount=function(){var b=this;return b.d3.max(b.data.targets,function(c){return c.values.length})},T.getMaxDataCountTarget=function(f){var e,h=f.length,g=0;return h>1?f.forEach(function(b){b.values.length>g&&(e=b,g=b.values.length)}):e=h?f[0]:null,e},T.getEdgeX=function(d){var c=this;return d.length?[c.d3.min(d,function(b){return b.values[0].x}),c.d3.max(d,function(b){return b.values[b.values.length-1].x})]:[0,0]},T.mapToIds=function(b){return b.map(function(c){return c.id})},T.mapToTargetIds=function(d){var c=this;return d?[].concat(d):c.mapToIds(c.data.targets)},T.hasTarget=function(f,e){var h,g=this.mapToIds(f);for(h=0;h<g.length;h++){if(g[h]===e){return !0}}return !1},T.isTargetToShow=function(b){return this.hiddenTargetIds.indexOf(b)<0},T.isLegendToShow=function(b){return this.hiddenLegendIds.indexOf(b)<0},T.filterTargetsToShow=function(d){var c=this;return d.filter(function(b){return c.isTargetToShow(b.id)})},T.mapTargetsToUniqueXs=function(e){var d=this,f=d.d3.set(d.d3.merge(e.map(function(b){return b.values.map(function(c){return +c.x})}))).values();return f=d.isTimeSeries()?f.map(function(b){return new Date(+b)}):f.map(function(b){return +b}),f.sort(function(g,c){return c>g?-1:g>c?1:g>=c?0:NaN})},T.addHiddenTargetIds=function(b){this.hiddenTargetIds=this.hiddenTargetIds.concat(b)},T.removeHiddenTargetIds=function(b){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(a){return b.indexOf(a)<0})},T.addHiddenLegendIds=function(b){this.hiddenLegendIds=this.hiddenLegendIds.concat(b)},T.removeHiddenLegendIds=function(b){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(a){return b.indexOf(a)<0})},T.getValuesAsIdKeyed=function(d){var c={};return d.forEach(function(b){c[b.id]=[],b.values.forEach(function(a){c[b.id].push(a.value)})}),c},T.checkValueInTargets=function(h,g){var l,k,j,i=Object.keys(h);for(l=0;l<i.length;l++){for(j=h[i[l]].values,k=0;k<j.length;k++){if(g(j[k].value)){return !0}}}return !1},T.hasNegativeValueInTargets=function(b){return this.checkValueInTargets(b,function(c){return 0>c})},T.hasPositiveValueInTargets=function(b){return this.checkValueInTargets(b,function(c){return c>0})},T.isOrderDesc=function(){var b=this.config;return"string"==typeof b.data_order&&"desc"===b.data_order.toLowerCase()},T.isOrderAsc=function(){var b=this.config;return"string"==typeof b.data_order&&"asc"===b.data_order.toLowerCase()},T.orderTargets=function(g){var f=this,j=f.config,i=f.isOrderAsc(),h=f.isOrderDesc();return i||h?g.sort(function(k,d){var n=function(e,c){return e+Math.abs(c.value)},m=k.values.reduce(n,0),l=d.values.reduce(n,0);return i?l-m:m-l}):O(j.data_order)&&g.sort(j.data_order),g},T.filterByX=function(d,c){return this.d3.merge(d.map(function(b){return b.values})).filter(function(b){return b.x-c===0})},T.filterRemoveNull=function(b){return b.filter(function(c){return P(c.value)})},T.filterByXDomain=function(d,c){return d.map(function(b){return{id:b.id,id_org:b.id_org,values:b.values.filter(function(e){return c[0]<=e.x&&e.x<=c[1]})}})},T.hasDataLabel=function(){var b=this.config;return"boolean"==typeof b.data_labels&&b.data_labels?!0:!("object"!=typeof b.data_labels||!F(b.data_labels))},T.getDataLabelLength=function(h,g,l){var k=this,j=[0,0],i=1.3;return k.selectChart.select("svg").selectAll(".dummy").data([h,g]).enter().append("text").text(function(b){return k.dataLabelFormat(b.id)(b)}).each(function(d,c){j[c]=this.getBoundingClientRect()[l]*i}).remove(),j},T.isNoneArc=function(b){return this.hasTarget(this.data.targets,b.id)},T.isArc=function(b){return"data" in b&&this.hasTarget(this.data.targets,b.data.id)},T.findSameXOfValues=function(g,f){var j,i=g[f].x,h=[];for(j=f-1;j>=0&&i===g[j].x;j--){h.push(g[j])}for(j=f;j<g.length&&i===g[j].x;j++){h.push(g[j])}return h},T.findClosestFromTargets=function(f,e){var h,g=this;return h=f.map(function(b){return g.findClosest(b.values,e)}),g.findClosest(h,e)},T.findClosest=function(g,f){var j,i=this,h=i.config.point_sensitivity;return g.filter(function(b){return b&&i.isBarType(b.id)}).forEach(function(d){var c=i.main.select("."+Q.bars+i.getTargetSelectorSuffix(d.id)+" ."+Q.bar+"-"+d.index).node();!j&&i.isWithinBar(c)&&(j=d)}),g.filter(function(b){return b&&!i.isBarType(b.id)}).forEach(function(b){var c=i.dist(b,f);h>c&&(h=c,j=b)}),j},T.dist=function(j,i){var p=this,o=p.config,n=o.axis_rotated?1:0,m=o.axis_rotated?0:1,l=p.circleY(j,j.index),k=p.x(j.x);return Math.sqrt(Math.pow(k-i[n],2)+Math.pow(l-i[m],2))},T.convertValuesToStep=function(e){var d,f=[].concat(e);if(!this.isCategorized()){return e}for(d=e.length+1;d>0;d--){f[d]=f[d-1]}return f[0]={x:f[0].x-1,value:f[0].value,id:f[0].id},f[e.length+1]={x:f[e.length].x+1,value:f[e.length].value,id:f[e.length].id},f},T.updateDataAttributes=function(g,f){var j=this,i=j.config,h=i["data_"+g];return"undefined"==typeof f?h:(Object.keys(f).forEach(function(b){h[b]=f[b]}),j.redraw({withLegend:!0}),h)},T.convertUrlToData=function(j,i,p,o,n){var m=this,l=i?i:"csv",k=m.d3.xhr(j);p&&Object.keys(p).forEach(function(b){k.header(b,p[b])}),k.get(function(e,d){var f;if(!d){throw new Error(e.responseURL+" "+e.status+" ("+e.statusText+")")}f="json"===l?m.convertJsonToData(JSON.parse(d.response),o):"tsv"===l?m.convertTsvToData(d.response):m.convertCsvToData(d.response),n.call(m,f)})},T.convertXsvToData=function(f,e){var h,g=e.parseRows(f);return 1===g.length?(h=[{}],g[0].forEach(function(b){h[0][b]=null})):h=e.parse(f),h},T.convertCsvToData=function(b){return this.convertXsvToData(b,this.d3.csv)},T.convertTsvToData=function(b){return this.convertXsvToData(b,this.d3.tsv)},T.convertJsonToData=function(h,g){var l,k,j=this,i=[];return g?(g.x?(l=g.value.concat(g.x),j.config.data_x=g.x):l=g.value,i.push(l),h.forEach(function(d){var c=[];l.forEach(function(b){var a=j.findValueInJson(d,b);M(a)&&(a=null),c.push(a)}),i.push(c)}),k=j.convertRowsToData(i)):(Object.keys(h).forEach(function(a){i.push([a].concat(h[a]))}),k=j.convertColumnsToData(i)),k},T.findValueInJson=function(g,f){f=f.replace(/\[(\w+)\]/g,".$1"),f=f.replace(/^\./,"");for(var j=f.split("."),i=0;i<j.length;++i){var h=j[i];if(!(h in g)){return}g=g[h]}return g},T.convertRowsToData=function(h){var g,l,k=h[0],j={},i=[];for(g=1;g<h.length;g++){for(j={},l=0;l<h[g].length;l++){if(M(h[g][l])){throw new Error("Source data is missing a component at ("+g+","+l+")!")}j[k[l]]=h[g][l]}i.push(j)}return i},T.convertColumnsToData=function(g){var f,j,i,h=[];for(f=0;f<g.length;f++){for(i=g[f][0],j=1;j<g[f].length;j++){if(M(h[j-1])&&(h[j-1]={}),M(g[f][j])){throw new Error("Source data is missing a component at ("+f+","+j+")!")}h[j-1][i]=g[f][j]}}return h},T.convertDataToTargets=function(i,h){var n,m=this,l=m.config,k=m.d3.keys(i[0]).filter(m.isNotX,m),j=m.d3.keys(i[0]).filter(m.isX,m);return k.forEach(function(b){var a=m.getXKey(b);m.isCustomX()||m.isTimeSeries()?j.indexOf(a)>=0?m.data.xs[b]=(h&&m.data.xs[b]?m.data.xs[b]:[]).concat(i.map(function(c){return c[a]}).filter(P).map(function(d,c){return m.generateTargetX(d,b,c)})):l.data_x?m.data.xs[b]=m.getOtherTargetXs():F(l.data_xs)&&(m.data.xs[b]=m.getXValuesOfXKey(a,m.data.targets)):m.data.xs[b]=i.map(function(d,c){return c})}),k.forEach(function(b){if(!m.data.xs[b]){throw new Error('x is not defined for id = "'+b+'".')}}),n=k.map(function(a,e){var d=l.data_idConverter(a);return{id:d,id_org:a,values:i.map(function(b,q){var p,o=m.getXKey(a),f=b[o],c=null===b[a]||isNaN(b[a])?null:+b[a];return m.isCustomX()&&m.isCategorized()&&0===e&&!M(f)?(0===e&&0===q&&(l.axis_x_categories=[]),p=l.axis_x_categories.indexOf(f),-1===p&&(p=l.axis_x_categories.length,l.axis_x_categories.push(f))):p=m.generateTargetX(f,a,q),(M(b[a])||m.data.xs[a].length<=q)&&(p=void 0),{x:p,value:c,id:d}}).filter(function(b){return K(b.x)})}}),n.forEach(function(d){var c;l.data_xSort&&(d.values=d.values.sort(function(f,e){var o=f.x||0===f.x?f.x:1/0,g=e.x||0===e.x?e.x:1/0;return o-g})),c=0,d.values.forEach(function(b){b.index=c++}),m.data.xs[d.id].sort(function(f,e){return f-e})}),m.hasNegativeValue=m.hasNegativeValueInTargets(n),m.hasPositiveValue=m.hasPositiveValueInTargets(n),l.data_type&&m.setTargetType(m.mapToIds(n).filter(function(b){return !(b in l.data_types)}),l.data_type),n.forEach(function(b){m.addCache(b.id_org,b)}),n},T.load=function(e,d){var f=this;e&&(d.filter&&(e=e.filter(d.filter)),(d.type||d.types)&&e.forEach(function(b){var c=d.types&&d.types[b.id]?d.types[b.id]:d.type;f.setTargetType(b.id,c)}),f.data.targets.forEach(function(a){for(var g=0;g<e.length;g++){if(a.id===e[g].id){a.values=e[g].values,e.splice(g,1);break}}}),f.data.targets=f.data.targets.concat(e)),f.updateTargets(f.data.targets),f.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),d.done&&d.done()},T.loadFromArgs=function(d){var c=this;d.data?c.load(c.convertDataToTargets(d.data),d):d.url?c.convertUrlToData(d.url,d.mimeType,d.headers,d.keys,function(a){c.load(c.convertDataToTargets(a),d)}):d.json?c.load(c.convertDataToTargets(c.convertJsonToData(d.json,d.keys)),d):d.rows?c.load(c.convertDataToTargets(c.convertRowsToData(d.rows)),d):d.columns?c.load(c.convertDataToTargets(c.convertColumnsToData(d.columns)),d):c.load(null,d)},T.unload=function(e,d){var f=this;return d||(d=function(){}),e=e.filter(function(b){return f.hasTarget(f.data.targets,b)}),e&&0!==e.length?(f.svg.selectAll(e.map(function(b){return f.selectorTarget(b)})).transition().style("opacity",0).remove().call(f.endall,d),void e.forEach(function(b){f.withoutFadeIn[b]=!1,f.legend&&f.legend.selectAll("."+Q.legendItem+f.getTargetSelectorSuffix(b)).remove(),f.data.targets=f.data.targets.filter(function(a){return a.id!==b})})):void d()},T.categoryName=function(d){var c=this.config;return d<c.axis_x_categories.length?c.axis_x_categories[d]:d},T.initEventRect=function(){var b=this;b.main.select("."+Q.chart).append("g").attr("class",Q.eventRects).style("fill-opacity",0)},T.redrawEventRect=function(){var h,g,l=this,k=l.config,j=l.isMultipleX(),i=l.main.select("."+Q.eventRects).style("cursor",k.zoom_enabled?k.axis_rotated?"ns-resize":"ew-resize":null).classed(Q.eventRectsMultiple,j).classed(Q.eventRectsSingle,!j);i.selectAll("."+Q.eventRect).remove(),l.eventRect=i.selectAll("."+Q.eventRect),j?(h=l.eventRect.data([0]),l.generateEventRectsForMultipleXs(h.enter()),l.updateEventRect(h)):(g=l.getMaxDataCountTarget(l.data.targets),i.datum(g?g.values:[]),l.eventRect=i.selectAll("."+Q.eventRect),h=l.eventRect.data(function(b){return b}),l.generateEventRectsForSingleX(h.enter()),l.updateEventRect(h),h.exit().remove())},T.updateEventRect=function(r){var q,p,o,n,m,l,k=this,j=k.config;r=r||k.eventRect.data(function(b){return b}),k.isMultipleX()?(q=0,p=0,o=k.width,n=k.height):(!k.isCustomX()&&!k.isTimeSeries()||k.isCategorized()?(m=k.getEventRectWidth(),l=function(b){return k.x(b.x)-m/2}):(k.updateXs(),m=function(e){var d=k.getPrevX(e.index),f=k.getNextX(e.index);return null===d&&null===f?j.axis_rotated?k.height:k.width:(null===d&&(d=k.x.domain()[0]),null===f&&(f=k.x.domain()[1]),Math.max(0,(k.x(f)-k.x(d))/2))},l=function(f){var e=k.getPrevX(f.index),h=k.getNextX(f.index),g=k.data.xs[f.id][f.index];return null===e&&null===h?0:(null===e&&(e=k.x.domain()[0]),(k.x(g)+k.x(e))/2)}),q=j.axis_rotated?0:l,p=j.axis_rotated?l:0,o=j.axis_rotated?k.width:m,n=j.axis_rotated?m:k.height),r.attr("class",k.classEvent.bind(k)).attr("x",q).attr("y",p).attr("width",o).attr("height",n)},T.generateEventRectsForSingleX=function(f){var e=this,h=e.d3,g=e.config;f.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",g.data_selection_enabled&&g.data_selection_grouped?"pointer":null).on("mouseover",function(b){var d=b.index;e.dragging||e.flowing||e.hasArcType()||(g.point_focus_expand_enabled&&e.expandCircles(d,null,!0),e.expandBars(d,null,!0),e.main.selectAll("."+Q.shape+"-"+d).each(function(c){g.data_onmouseover.call(e.api,c)}))}).on("mouseout",function(b){var d=b.index;e.config&&(e.hasArcType()||(e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars(),e.main.selectAll("."+Q.shape+"-"+d).each(function(c){g.data_onmouseout.call(e.api,c)})))}).on("mousemove",function(b){var i,d=b.index,c=e.svg.select("."+Q.eventRect+"-"+d);e.dragging||e.flowing||e.hasArcType()||(e.isStepType(b)&&"step-after"===e.config.line_step_type&&h.mouse(this)[0]<e.x(e.getXValue(b.id,d))&&(d-=1),i=e.filterTargetsToShow(e.data.targets).map(function(j){return e.addName(e.getValueOnIndex(j.values,d))}),g.tooltip_grouped&&(e.showTooltip(i,this),e.showXGridFocus(i)),(!g.tooltip_grouped||g.data_selection_enabled&&!g.data_selection_grouped)&&e.main.selectAll("."+Q.shape+"-"+d).each(function(){h.select(this).classed(Q.EXPANDED,!0),g.data_selection_enabled&&c.style("cursor",g.data_selection_grouped?"pointer":null),g.tooltip_grouped||(e.hideXGridFocus(),e.hideTooltip(),g.data_selection_grouped||(e.unexpandCircles(d),e.unexpandBars(d)))}).filter(function(j){return e.isWithinShape(this,j)}).each(function(j){g.data_selection_enabled&&(g.data_selection_grouped||g.data_selection_isselectable(j))&&c.style("cursor","pointer"),g.tooltip_grouped||(e.showTooltip([j],this),e.showXGridFocus([j]),g.point_focus_expand_enabled&&e.expandCircles(d,j.id,!0),e.expandBars(d,j.id,!0))}))}).on("click",function(b){var c=b.index;if(!e.hasArcType()&&e.toggleShape){if(e.cancelClick){return void (e.cancelClick=!1)}e.isStepType(b)&&"step-after"===g.line_step_type&&h.mouse(this)[0]<e.x(e.getXValue(b.id,c))&&(c-=1),e.main.selectAll("."+Q.shape+"-"+c).each(function(d){(g.data_selection_grouped||e.isWithinShape(this,d))&&(e.toggleShape(this,d,c),e.config.data_onclick.call(e.api,d,this))})}}).call(g.data_selection_draggable&&e.drag?h.behavior.drag().origin(Object).on("drag",function(){e.drag(h.mouse(this))}).on("dragstart",function(){e.dragstart(h.mouse(this))}).on("dragend",function(){e.dragend()}):function(){})},T.generateEventRectsForMultipleXs=function(g){function f(){j.svg.select("."+Q.eventRect).style("cursor",null),j.hideXGridFocus(),j.hideTooltip(),j.unexpandCircles(),j.unexpandBars()}var j=this,i=j.d3,h=j.config;g.append("rect").attr("x",0).attr("y",0).attr("width",j.width).attr("height",j.height).attr("class",Q.eventRect).on("mouseout",function(){j.config&&(j.hasArcType()||f())}).on("mousemove",function(){var b,k,e,d,c=j.filterTargetsToShow(j.data.targets);if(!j.dragging&&!j.hasArcType(c)){if(b=i.mouse(this),k=j.findClosestFromTargets(c,b),!j.mouseover||k&&k.id===j.mouseover.id||(h.data_onmouseout.call(j.api,j.mouseover),j.mouseover=void 0),!k){return void f()}e=j.isScatterType(k)||!h.tooltip_grouped?[k]:j.filterByX(c,k.x),d=e.map(function(l){return j.addName(l)}),j.showTooltip(d,this),h.point_focus_expand_enabled&&j.expandCircles(k.index,k.id,!0),j.expandBars(k.index,k.id,!0),j.showXGridFocus(d),(j.isBarType(k.id)||j.dist(k,b)<h.point_sensitivity)&&(j.svg.select("."+Q.eventRect).style("cursor","pointer"),j.mouseover||(h.data_onmouseover.call(j.api,k),j.mouseover=k))}}).on("click",function(){var d,c,e=j.filterTargetsToShow(j.data.targets);j.hasArcType(e)||(d=i.mouse(this),c=j.findClosestFromTargets(e,d),c&&(j.isBarType(c.id)||j.dist(c,d)<h.point_sensitivity)&&j.main.selectAll("."+Q.shapes+j.getTargetSelectorSuffix(c.id)).selectAll("."+Q.shape+"-"+c.index).each(function(){(h.data_selection_grouped||j.isWithinShape(this,c))&&(j.toggleShape(this,c,c.index),j.config.data_onclick.call(j.api,c,this))}))}).call(h.data_selection_draggable&&j.drag?i.behavior.drag().origin(Object).on("drag",function(){j.drag(i.mouse(this))}).on("dragstart",function(){j.dragstart(i.mouse(this))}).on("dragend",function(){j.dragend()}):function(){})},T.dispatchEvent=function(t,s,r){var q=this,p="."+Q.eventRect+(q.isMultipleX()?"":"-"+s),o=q.main.select(p).node(),n=o.getBoundingClientRect(),m=n.left+(r?r[0]:0),l=n.top+(r?r[1]:0),a=document.createEvent("MouseEvents");a.initMouseEvent(t,!0,!0,ab,0,m,l,m,l,!1,!1,!1,!1,0,null),o.dispatchEvent(a)},T.getCurrentWidth=function(){var d=this,c=d.config;return c.size_width?c.size_width:d.getParentWidth()},T.getCurrentHeight=function(){var e=this,d=e.config,f=d.size_height?d.size_height:e.getParentHeight();return f>0?f:320/(e.hasType("gauge")&&!d.gauge_fullCircle?2:1)},T.getCurrentPaddingTop=function(){var e=this,d=e.config,f=P(d.padding_top)?d.padding_top:0;return e.title&&e.title.node()&&(f+=e.getTitlePadding()),f},T.getCurrentPaddingBottom=function(){var b=this.config;return P(b.padding_bottom)?b.padding_bottom:0},T.getCurrentPaddingLeft=function(e){var d=this,f=d.config;return P(f.padding_left)?f.padding_left:f.axis_rotated?f.axis_x_show?Math.max(J(d.getAxisWidthByAxisId("x",e)),40):1:!f.axis_y_show||f.axis_y_inner?d.axis.getYAxisLabelPosition().isOuter?30:1:J(d.getAxisWidthByAxisId("y",e))},T.getCurrentPaddingRight=function(){var f=this,e=f.config,h=10,g=f.isLegendRight?f.getLegendWidth()+20:0;return P(e.padding_right)?e.padding_right+1:e.axis_rotated?h+g:!e.axis_y2_show||e.axis_y2_inner?2+g+(f.axis.getY2AxisLabelPosition().isOuter?20:0):J(f.getAxisWidthByAxisId("y2"))+g},T.getParentRectValue=function(f){for(var e,h=this.selectChart.node();h&&"BODY"!==h.tagName;){try{e=h.getBoundingClientRect()[f]}catch(g){"width"===f&&(e=h.offsetWidth)}if(e){break}h=h.parentNode}return e},T.getParentWidth=function(){return this.getParentRectValue("width")},T.getParentHeight=function(){var b=this.selectChart.style("height");return b.indexOf("px")>0?+b.replace("px",""):0},T.getSvgLeft=function(t){var s=this,r=s.config,q=r.axis_rotated||!r.axis_rotated&&!r.axis_y_inner,p=r.axis_rotated?Q.axisX:Q.axisY,o=s.main.select("."+p).node(),n=o&&q?o.getBoundingClientRect():{right:0},m=s.selectChart.node().getBoundingClientRect(),l=s.hasArcType(),k=n.right-m.left-(l?0:s.getCurrentPaddingLeft(t));return k>0?k:0},T.getAxisWidthByAxisId=function(f,e){var h=this,g=h.axis.getLabelPositionById(f);return h.axis.getMaxTickWidth(f,e)+(g.isInner?20:40)},T.getHorizontalAxisHeight=function(f){var e=this,h=e.config,g=30;return"x"!==f||h.axis_x_show?"x"===f&&h.axis_x_height?h.axis_x_height:"y"!==f||h.axis_y_show?"y2"!==f||h.axis_y2_show?("x"===f&&!h.axis_rotated&&h.axis_x_tick_rotate&&(g=30+e.axis.getMaxTickWidth(f)*Math.cos(Math.PI*(90-h.axis_x_tick_rotate)/180)),"y"===f&&h.axis_rotated&&h.axis_y_tick_rotate&&(g=30+e.axis.getMaxTickWidth(f)*Math.cos(Math.PI*(90-h.axis_y_tick_rotate)/180)),g+(e.axis.getLabelPositionById(f).isInner?0:10)+("y2"===f?-10:0)):e.rotated_padding_top:!h.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},T.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},T.getShapeIndices=function(i){var h,n,m=this,l=m.config,k={},j=0;return m.filterTargetsToShow(m.data.targets.filter(i,m)).forEach(function(b){for(h=0;h<l.data_groups.length;h++){if(!(l.data_groups[h].indexOf(b.id)<0)){for(n=0;n<l.data_groups[h].length;n++){if(l.data_groups[h][n] in k){k[b.id]=k[l.data_groups[h][n]];break}}}}M(k[b.id])&&(k[b.id]=j++)}),k.__max__=j-1,k},T.getShapeX=function(h,g,l,k){var j=this,i=k?j.subX:j.x;return function(b){var a=b.id in l?l[b.id]:0;return b.x||0===b.x?i(b.x)-h*(g/2-a):0}},T.getShapeY=function(d){var c=this;return function(b){var a=d?c.getSubYScale(b.id):c.getYScale(b.id);return a(b.value)}},T.getShapeOffset=function(h,g,l){var k=this,j=k.orderTargets(k.filterTargetsToShow(k.data.targets.filter(h,k))),i=j.map(function(b){return b.id});return function(b,f){var e=l?k.getSubYScale(b.id):k.getYScale(b.id),d=e(0),c=d;return j.forEach(function(m){var a=k.isStepType(b)?k.convertValuesToStep(m.values):m.values;m.id!==b.id&&g[m.id]===g[b.id]&&i.indexOf(m.id)<i.indexOf(b.id)&&("undefined"!=typeof a[f]&&+a[f].x===+b.x||(f=-1,a.forEach(function(n,o){n.x===b.x&&(f=o)})),f in a&&a[f].value*b.value>=0&&(c+=e(a[f].value)-d))}),c}},T.isWithinShape=function(g,f){var j,i=this,h=i.d3.select(g);return i.isTargetToShow(f.id)?"circle"===g.nodeName?j=i.isStepType(f)?i.isWithinStep(g,i.getYScale(f.id)(f.value)):i.isWithinCircle(g,1.5*i.pointSelectR(f)):"path"===g.nodeName&&(j=h.classed(Q.bar)?i.isWithinBar(g):!0):j=!1,j},T.getInterpolate=function(e){var d=this,f=d.isInterpolationType(d.config.spline_interpolation_type)?d.config.spline_interpolation_type:"cardinal";return d.isSplineType(e)?f:d.isStepType(e)?d.config.line_step_type:"linear"},T.initLine=function(){var b=this;b.main.select("."+Q.chart).append("g").attr("class",Q.chartLines)},T.updateTargetsForLine=function(t){var s,r,q=this,p=q.config,o=q.classChartLine.bind(q),n=q.classLines.bind(q),m=q.classAreas.bind(q),l=q.classCircles.bind(q),k=q.classFocus.bind(q);s=q.main.select("."+Q.chartLines).selectAll("."+Q.chartLine).data(t).attr("class",function(b){return o(b)+k(b)}),r=s.enter().append("g").attr("class",o).style("opacity",0).style("pointer-events","none"),r.append("g").attr("class",n),r.append("g").attr("class",m),r.append("g").attr("class",function(b){return q.generateClass(Q.selectedCircles,b.id)}),r.append("g").attr("class",l).style("cursor",function(b){return p.data_selection_isselectable(b)?"pointer":null}),t.forEach(function(b){q.main.selectAll("."+Q.selectedCircles+q.getTargetSelectorSuffix(b.id)).selectAll("."+Q.selectedCircle).each(function(a){a.value=b.values[a.index].value})})},T.updateLine=function(d){var c=this;c.mainLine=c.main.selectAll("."+Q.lines).selectAll("."+Q.line).data(c.lineData.bind(c)),c.mainLine.enter().append("path").attr("class",c.classLine.bind(c)).style("stroke",c.color),c.mainLine.style("opacity",c.initialOpacity.bind(c)).style("shape-rendering",function(b){return c.isStepType(b)?"crispEdges":""}).attr("transform",null),c.mainLine.exit().transition().duration(d).style("opacity",0).remove()},T.redrawLine=function(d,c){return[(c?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",d).style("stroke",this.color).style("opacity",1)]},T.generateDrawLine=function(r,q){var p=this,o=p.config,n=p.d3.svg.line(),m=p.generateGetLinePoints(r,q),l=q?p.getSubYScale:p.getYScale,k=function(b){return(q?p.subxx:p.xx).call(p,b)},j=function(d,c){return o.data_groups.length>0?m(d,c)[0][1]:l.call(p,d.id)(d.value)};return n=o.axis_rotated?n.x(j).y(k):n.x(k).y(j),o.line_connectNull||(n=n.defined(function(b){return null!=b.value})),function(c){var t,s=o.line_connectNull?p.filterRemoveNull(c.values):c.values,g=q?p.x:p.subX,e=l.call(p,c.id),d=0,b=0;return p.isLineType(c)?o.data_regions[c.id]?t=p.lineWithRegions(s,g,e,o.data_regions[c.id]):(p.isStepType(c)&&(s=p.convertValuesToStep(s)),t=n.interpolate(p.getInterpolate(c))(s)):(s[0]&&(d=g(s[0].x),b=e(s[0].value)),t=o.axis_rotated?"M "+b+" "+d:"M "+d+" "+b),t?t:"M 0 0"}},T.generateGetLinePoints=function(r,q){var p=this,o=p.config,n=r.__max__+1,m=p.getShapeX(0,n,r,!!q),l=p.getShapeY(!!q),k=p.getShapeOffset(p.isLineType,r,!!q),j=q?p.getSubYScale:p.getYScale;return function(f,c){var i=j.call(p,f.id)(0),h=k(f,c)||i,g=m(f),d=l(f);return o.axis_rotated&&(0<f.value&&i>d||f.value<0&&d>i)&&(d=i),[[g,d-(i-h)],[g,d-(i-h)],[g,d-(i-h)],[g,d-(i-h)]]}},T.lineWithRegions=function(ax,aw,av,au){function at(e,d){var f;for(f=0;f<d.length;f++){if(d[f].start<e&&e<=d[f].end){return !0}}return !1}function ar(b){return"M"+b[0][0]+" "+b[0][1]+" "+b[1][0]+" "+b[1][1]}var aq,ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae=this,ad=ae.config,ac=-1,A="M",q=ae.isCategorized()?0.5:0,p=[];if(K(au)){for(aq=0;aq<au.length;aq++){p[aq]={},M(au[aq].start)?p[aq].start=ax[0].x:p[aq].start=ae.isTimeSeries()?ae.parseDate(au[aq].start):au[aq].start,M(au[aq].end)?p[aq].end=ax[ax.length-1].x:p[aq].end=ae.isTimeSeries()?ae.parseDate(au[aq].end):au[aq].end}}for(ag=ad.axis_rotated?function(b){return av(b.value)}:function(b){return aw(b.x)},af=ad.axis_rotated?function(b){return aw(b.x)}:function(b){return av(b.value)},ao=ae.isTimeSeries()?function(t,s,r,o){var n,k=t.x.getTime(),f=s.x-t.x,c=new Date(k+f*r),b=new Date(k+f*(r+o));return n=ad.axis_rotated?[[av(am(r)),aw(c)],[av(am(r+o)),aw(b)]]:[[aw(c),av(am(r))],[aw(b),av(am(r+o))]],ar(n)}:function(b,j,i,f){var c;return c=ad.axis_rotated?[[av(am(i),!0),aw(an(i))],[av(am(i+f),!0),aw(an(i+f))]]:[[aw(an(i),!0),av(am(i))],[aw(an(i+f),!0),av(am(i+f))]],ar(c)},aq=0;aq<ax.length;aq++){if(M(p)||!at(ax[aq].x,p)){A+=" "+ag(ax[aq])+" "+af(ax[aq])}else{for(an=ae.getScale(ax[aq-1].x+q,ax[aq].x+q,ae.isTimeSeries()),am=ae.getScale(ax[aq-1].value,ax[aq].value),al=aw(ax[aq].x)-aw(ax[aq-1].x),ak=av(ax[aq].value)-av(ax[aq-1].value),aj=Math.sqrt(Math.pow(al,2)+Math.pow(ak,2)),ai=2/aj,ah=2*ai,ap=ai;1>=ap;ap+=ah){A+=ao(ax[aq-1],ax[aq],ap,ai)}}ac=ax[aq].x}return A},T.updateArea=function(e){var d=this,f=d.d3;d.mainArea=d.main.selectAll("."+Q.areas).selectAll("."+Q.area).data(d.lineData.bind(d)),d.mainArea.enter().append("path").attr("class",d.classArea.bind(d)).style("fill",d.color).style("opacity",function(){return d.orgAreaOpacity=+f.select(this).style("opacity"),0}),d.mainArea.style("opacity",d.orgAreaOpacity),d.mainArea.exit().transition().duration(e).style("opacity",0).remove()},T.redrawArea=function(d,c){return[(c?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",d).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},T.generateDrawArea=function(t,s){var r=this,q=r.config,p=r.d3.svg.area(),o=r.generateGetAreaPoints(t,s),n=s?r.getSubYScale:r.getYScale,m=function(b){return(s?r.subxx:r.xx).call(r,b)},l=function(d,c){return q.data_groups.length>0?o(d,c)[0][1]:n.call(r,d.id)(r.getAreaBaseValue(d.id))},k=function(d,c){return q.data_groups.length>0?o(d,c)[1][1]:n.call(r,d.id)(d.value)};return p=q.axis_rotated?p.x0(l).x1(k).y(m):p.x(m).y0(q.area_above?0:l).y1(k),q.line_connectNull||(p=p.defined(function(b){return null!==b.value})),function(d){var c,j=q.line_connectNull?r.filterRemoveNull(d.values):d.values,i=0,e=0;return r.isAreaType(d)?(r.isStepType(d)&&(j=r.convertValuesToStep(j)),c=p.interpolate(r.getInterpolate(d))(j)):(j[0]&&(i=r.x(j[0].x),e=r.getYScale(d.id)(j[0].value)),c=q.axis_rotated?"M "+e+" "+i:"M "+i+" "+e),c?c:"M 0 0"}},T.getAreaBaseValue=function(){return 0},T.generateGetAreaPoints=function(r,q){var p=this,o=p.config,n=r.__max__+1,m=p.getShapeX(0,n,r,!!q),l=p.getShapeY(!!q),k=p.getShapeOffset(p.isAreaType,r,!!q),j=q?p.getSubYScale:p.getYScale;return function(f,c){var i=j.call(p,f.id)(0),h=k(f,c)||i,g=m(f),d=l(f);return o.axis_rotated&&(0<f.value&&i>d||f.value<0&&d>i)&&(d=i),[[g,h],[g,d-(i-h)],[g,d-(i-h)],[g,h]]}},T.updateCircle=function(){var b=this;b.mainCircle=b.main.selectAll("."+Q.circles).selectAll("."+Q.circle).data(b.lineOrScatterData.bind(b)),b.mainCircle.enter().append("circle").attr("class",b.classCircle.bind(b)).attr("r",b.pointR.bind(b)).style("fill",b.color),b.mainCircle.style("opacity",b.initialOpacityForCircle.bind(b)),b.mainCircle.exit().remove()},T.redrawCircle=function(f,e,h){var g=this.main.selectAll("."+Q.selectedCircle);return[(h?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",f).attr("cy",e),(h?g.transition(Math.random().toString()):g).attr("cx",f).attr("cy",e)]},T.circleX=function(b){return b.x||0===b.x?this.x(b.x):null},T.updateCircleY=function(){var e,d,f=this;f.config.data_groups.length>0?(e=f.getShapeIndices(f.isLineType),d=f.generateGetLinePoints(e),f.circleY=function(b,g){return d(b,g)[0][1]}):f.circleY=function(b){return f.getYScale(b.id)(b.value)}},T.getCircles=function(e,d){var f=this;return(d?f.main.selectAll("."+Q.circles+f.getTargetSelectorSuffix(d)):f.main).selectAll("."+Q.circle+(P(e)?"-"+e:""))},T.expandCircles=function(g,f,j){var i=this,h=i.pointExpandedR.bind(i);j&&i.unexpandCircles(),i.getCircles(g,f).classed(Q.EXPANDED,!0).attr("r",h)},T.unexpandCircles=function(e){var d=this,f=d.pointR.bind(d);d.getCircles(e).filter(function(){return d.d3.select(this).classed(Q.EXPANDED)}).classed(Q.EXPANDED,!1).attr("r",f)},T.pointR=function(e){var d=this,f=d.config;return d.isStepType(e)?0:O(f.point_r)?f.point_r(e):f.point_r},T.pointExpandedR=function(e){var d=this,f=d.config;return f.point_focus_expand_enabled?f.point_focus_expand_r?f.point_focus_expand_r:1.75*d.pointR(e):d.pointR(e)},T.pointSelectR=function(e){var d=this,f=d.config;return O(f.point_select_r)?f.point_select_r(e):f.point_select_r?f.point_select_r:4*d.pointR(e)},T.isWithinCircle=function(i,h){var n=this.d3,m=n.mouse(i),l=n.select(i),k=+l.attr("cx"),j=+l.attr("cy");return Math.sqrt(Math.pow(k-m[0],2)+Math.pow(j-m[1],2))<h},T.isWithinStep=function(d,c){return Math.abs(c-this.d3.mouse(d)[1])<30},T.initBar=function(){var b=this;b.main.select("."+Q.chart).append("g").attr("class",Q.chartBars)},T.updateTargetsForBar=function(j){var i,p,o=this,n=o.config,m=o.classChartBar.bind(o),l=o.classBars.bind(o),k=o.classFocus.bind(o);i=o.main.select("."+Q.chartBars).selectAll("."+Q.chartBar).data(j).attr("class",function(b){return m(b)+k(b)}),p=i.enter().append("g").attr("class",m).style("opacity",0).style("pointer-events","none"),p.append("g").attr("class",l).style("cursor",function(b){return n.data_selection_isselectable(b)?"pointer":null})},T.updateBar=function(h){var g=this,l=g.barData.bind(g),k=g.classBar.bind(g),j=g.initialOpacity.bind(g),i=function(b){return g.color(b.id)};g.mainBar=g.main.selectAll("."+Q.bars).selectAll("."+Q.bar).data(l),g.mainBar.enter().append("path").attr("class",k).style("stroke",i).style("fill",i),g.mainBar.style("opacity",j),g.mainBar.exit().transition().duration(h).style("opacity",0).remove()},T.redrawBar=function(d,c){return[(c?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",d).style("fill",this.color).style("opacity",1)]},T.getBarW=function(g,f){var j=this,i=j.config,h="number"==typeof i.bar_width?i.bar_width:f?g.tickInterval()*i.bar_width_ratio/f:0;return i.bar_width_max&&h>i.bar_width_max?i.bar_width_max:h},T.getBars=function(e,d){var f=this;return(d?f.main.selectAll("."+Q.bars+f.getTargetSelectorSuffix(d)):f.main).selectAll("."+Q.bar+(P(e)?"-"+e:""))},T.expandBars=function(f,e,h){var g=this;h&&g.unexpandBars(),g.getBars(f,e).classed(Q.EXPANDED,!0)},T.unexpandBars=function(d){var c=this;c.getBars(d).classed(Q.EXPANDED,!1)},T.generateDrawBar=function(g,f){var j=this,i=j.config,h=j.generateGetBarPoints(g,f);return function(e,d){var n=h(e,d),m=i.axis_rotated?1:0,l=i.axis_rotated?0:1,k="M "+n[0][m]+","+n[0][l]+" L"+n[1][m]+","+n[1][l]+" L"+n[2][m]+","+n[2][l]+" L"+n[3][m]+","+n[3][l]+" z";return k}},T.generateGetBarPoints=function(t,s){var r=this,q=s?r.subXAxis:r.xAxis,p=t.__max__+1,o=r.getBarW(q,p),n=r.getShapeX(o,p,t,!!s),m=r.getShapeY(!!s),l=r.getShapeOffset(r.isBarType,t,!!s),k=s?r.getSubYScale:r.getYScale;return function(g,c){var j=k.call(r,g.id)(0),i=l(g,c)||j,h=n(g),f=m(g);return r.config.axis_rotated&&(0<g.value&&j>f||g.value<0&&f>j)&&(f=j),[[h,i],[h,f-(j-i)],[h+o,f-(j-i)],[h+o,i]]}},T.isWithinBar=function(ac){var A=this.d3.mouse(ac),z=ac.getBoundingClientRect(),y=ac.pathSegList.getItem(0),x=ac.pathSegList.getItem(1),w=Math.min(y.x,x.x),v=Math.min(y.y,x.y),u=z.width,t=z.height,s=2,r=w-s,q=w+u+s,p=v+t+s,o=v-s;return r<A[0]&&A[0]<q&&o<A[1]&&A[1]<p},T.initText=function(){var b=this;b.main.select("."+Q.chart).append("g").attr("class",Q.chartTexts),b.mainText=b.d3.selectAll([])},T.updateTargetsForText=function(i){var h,n,m=this,l=m.classChartText.bind(m),k=m.classTexts.bind(m),j=m.classFocus.bind(m);h=m.main.select("."+Q.chartTexts).selectAll("."+Q.chartText).data(i).attr("class",function(b){return l(b)+j(b)}),n=h.enter().append("g").attr("class",l).style("opacity",0).style("pointer-events","none"),n.append("g").attr("class",k)},T.updateText=function(g){var f=this,j=f.config,i=f.barOrLineData.bind(f),h=f.classText.bind(f);f.mainText=f.main.selectAll("."+Q.texts).selectAll("."+Q.text).data(i),f.mainText.enter().append("text").attr("class",h).attr("text-anchor",function(b){return j.axis_rotated?b.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(b){return f.color(b)}).style("fill-opacity",0),f.mainText.text(function(b,k,e){return f.dataLabelFormat(b.id)(b.value,b.id,k,e)}),f.mainText.exit().transition().duration(g).style("fill-opacity",0).remove()},T.redrawText=function(f,e,h,g){return[(g?this.mainText.transition():this.mainText).attr("x",f).attr("y",e).style("fill",this.color).style("fill-opacity",h?0:this.opacityForText.bind(this))]},T.getTextRect=function(i,h,n){var m,l=this.d3.select("body").append("div").classed("c3",!0),k=l.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),j=this.d3.select(n).style("font");return k.selectAll(".dummy").data([i]).enter().append("text").classed(h?h:"",!0).style("font",j).text(i).each(function(){m=this.getBoundingClientRect()}),l.remove(),m},T.generateXYForText=function(r,q,p,o){var n=this,m=n.generateGetAreaPoints(r,!1),l=n.generateGetBarPoints(q,!1),k=n.generateGetLinePoints(p,!1),j=o?n.getXForText:n.getYForText;return function(e,d){var f=n.isAreaType(e)?m:n.isBarType(e)?l:k;return j.call(n,f(e,d),e,this)}},T.getXForText=function(i,h,n){var m,l,k=this,j=n.getBoundingClientRect();return k.config.axis_rotated?(l=k.isBarType(h)?4:6,m=i[2][1]+l*(h.value<0?-1:1)):m=k.hasType("bar")?(i[2][0]+i[0][0])/2:i[0][0],null===h.value&&(m>k.width?m=k.width-j.width:0>m&&(m=4)),m},T.getYForText=function(h,g,l){var k,j=this,i=l.getBoundingClientRect();return j.config.axis_rotated?k=(h[0][0]+h[2][0]+0.6*i.height)/2:(k=h[2][1],g.value<0||0===g.value&&!j.hasPositiveValue?(k+=i.height,j.isBarType(g)&&j.isSafari()?k-=3:!j.isBarType(g)&&j.isChrome()&&(k+=3)):k+=j.isBarType(g)?-3:-6),null!==g.value||j.config.axis_rotated||(k<i.height?k=i.height:k>this.height&&(k=this.height-4)),k},T.setTargetType=function(f,e){var h=this,g=h.config;h.mapToTargetIds(f).forEach(function(b){h.withoutFadeIn[b]=e===g.data_types[b],g.data_types[b]=e}),f||(g.data_type=e)},T.hasType=function(g,f){var j=this,i=j.config.data_types,h=!1;return f=f||j.data.targets,f&&f.length?f.forEach(function(a){var d=i[a.id];(d&&d.indexOf(g)>=0||!d&&"line"===g)&&(h=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(a){i[a]===g&&(h=!0)}):h=j.config.data_type===g,h},T.hasArcType=function(b){return this.hasType("pie",b)||this.hasType("donut",b)||this.hasType("gauge",b)},T.isLineType=function(e){var d=this.config,f=N(e)?e:e.id;return !d.data_types[f]||["line","spline","area","area-spline","step","area-step"].indexOf(d.data_types[f])>=0},T.isStepType=function(d){var c=N(d)?d:d.id;return["step","area-step"].indexOf(this.config.data_types[c])>=0},T.isSplineType=function(d){var c=N(d)?d:d.id;return["spline","area-spline"].indexOf(this.config.data_types[c])>=0},T.isAreaType=function(d){var c=N(d)?d:d.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[c])>=0},T.isBarType=function(d){var c=N(d)?d:d.id;return"bar"===this.config.data_types[c]},T.isScatterType=function(d){var c=N(d)?d:d.id;return"scatter"===this.config.data_types[c]},T.isPieType=function(d){var c=N(d)?d:d.id;return"pie"===this.config.data_types[c]},T.isGaugeType=function(d){var c=N(d)?d:d.id;return"gauge"===this.config.data_types[c]},T.isDonutType=function(d){var c=N(d)?d:d.id;return"donut"===this.config.data_types[c]},T.isArcType=function(b){return this.isPieType(b)||this.isDonutType(b)||this.isGaugeType(b)},T.lineData=function(b){return this.isLineType(b)?[b]:[]},T.arcData=function(b){return this.isArcType(b.data)?[b]:[]},T.barData=function(b){return this.isBarType(b)?b.values:[]},T.lineOrScatterData=function(b){return this.isLineType(b)||this.isScatterType(b)?b.values:[]},T.barOrLineData=function(b){return this.isBarType(b)||this.isLineType(b)?b.values:[]},T.isInterpolationType=function(b){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(b)>=0},T.initGrid=function(){var e=this,d=e.config,f=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",Q.grid),d.grid_x_show&&e.grid.append("g").attr("class",Q.xgrids),d.grid_y_show&&e.grid.append("g").attr("class",Q.ygrids),d.grid_focus_show&&e.grid.append("g").attr("class",Q.xgridFocus).append("line").attr("class",Q.xgridFocus),e.xgrid=f.selectAll([]),d.grid_lines_front||e.initGridLines()},T.initGridLines=function(){var d=this,c=d.d3;d.gridLines=d.main.append("g").attr("clip-path",d.clipPathForGrid).attr("class",Q.grid+" "+Q.gridLines),d.gridLines.append("g").attr("class",Q.xgridLines),d.gridLines.append("g").attr("class",Q.ygridLines),d.xgridLines=c.selectAll([])},T.updateXGrid=function(h){var g=this,l=g.config,k=g.d3,j=g.generateGridData(l.grid_x_type,g.x),i=g.isCategorized()?g.xAxis.tickOffset():0;g.xgridAttr=l.axis_rotated?{x1:0,x2:g.width,y1:function(b){return g.x(b)-i},y2:function(b){return g.x(b)-i}}:{x1:function(b){return g.x(b)+i},x2:function(b){return g.x(b)+i},y1:0,y2:g.height},g.xgrid=g.main.select("."+Q.xgrids).selectAll("."+Q.xgrid).data(j),g.xgrid.enter().append("line").attr("class",Q.xgrid),h||g.xgrid.attr(g.xgridAttr).style("opacity",function(){return +k.select(this).attr(l.axis_rotated?"y1":"x1")===(l.axis_rotated?g.height:0)?0:1}),g.xgrid.exit().remove()},T.updateYGrid=function(){var e=this,d=e.config,f=e.yAxis.tickValues()||e.y.ticks(d.grid_y_ticks);e.ygrid=e.main.select("."+Q.ygrids).selectAll("."+Q.ygrid).data(f),e.ygrid.enter().append("line").attr("class",Q.ygrid),e.ygrid.attr("x1",d.axis_rotated?e.y:0).attr("x2",d.axis_rotated?e.y:e.width).attr("y1",d.axis_rotated?0:e.y).attr("y2",d.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,"grid")},T.gridTextAnchor=function(b){return b.position?b.position:"end"},T.gridTextDx=function(b){return"start"===b.position?4:"middle"===b.position?0:-4},T.xGridTextX=function(b){return"start"===b.position?-this.height:"middle"===b.position?-this.height/2:0},T.yGridTextX=function(b){return"start"===b.position?0:"middle"===b.position?this.width/2:this.width},T.updateGrid=function(i){var h,n,m,l=this,k=l.main,j=l.config;l.grid.style("visibility",l.hasArcType()?"hidden":"visible"),k.select("line."+Q.xgridFocus).style("visibility","hidden"),j.grid_x_show&&l.updateXGrid(),l.xgridLines=k.select("."+Q.xgridLines).selectAll("."+Q.xgridLine).data(j.grid_x_lines),h=l.xgridLines.enter().append("g").attr("class",function(b){return Q.xgridLine+(b["class"]?" "+b["class"]:"")}),h.append("line").style("opacity",0),h.append("text").attr("text-anchor",l.gridTextAnchor).attr("transform",j.axis_rotated?"":"rotate(-90)").attr("dx",l.gridTextDx).attr("dy",-5).style("opacity",0),l.xgridLines.exit().transition().duration(i).style("opacity",0).remove(),j.grid_y_show&&l.updateYGrid(),l.ygridLines=k.select("."+Q.ygridLines).selectAll("."+Q.ygridLine).data(j.grid_y_lines),n=l.ygridLines.enter().append("g").attr("class",function(b){return Q.ygridLine+(b["class"]?" "+b["class"]:"")}),n.append("line").style("opacity",0),n.append("text").attr("text-anchor",l.gridTextAnchor).attr("transform",j.axis_rotated?"rotate(-90)":"").attr("dx",l.gridTextDx).attr("dy",-5).style("opacity",0),m=l.yv.bind(l),l.ygridLines.select("line").transition().duration(i).attr("x1",j.axis_rotated?m:0).attr("x2",j.axis_rotated?m:l.width).attr("y1",j.axis_rotated?0:m).attr("y2",j.axis_rotated?l.height:m).style("opacity",1),l.ygridLines.select("text").transition().duration(i).attr("x",j.axis_rotated?l.xGridTextX.bind(l):l.yGridTextX.bind(l)).attr("y",m).text(function(b){return b.text}).style("opacity",1),l.ygridLines.exit().transition().duration(i).style("opacity",0).remove()},T.redrawGrid=function(h){var g=this,l=g.config,k=g.xv.bind(g),j=g.xgridLines.select("line"),i=g.xgridLines.select("text");return[(h?j.transition():j).attr("x1",l.axis_rotated?0:k).attr("x2",l.axis_rotated?g.width:k).attr("y1",l.axis_rotated?k:0).attr("y2",l.axis_rotated?k:g.height).style("opacity",1),(h?i.transition():i).attr("x",l.axis_rotated?g.yGridTextX.bind(g):g.xGridTextX.bind(g)).attr("y",k).text(function(b){return b.text}).style("opacity",1)]},T.showXGridFocus=function(h){var g=this,l=g.config,k=h.filter(function(b){return b&&P(b.value)}),j=g.main.selectAll("line."+Q.xgridFocus),i=g.xx.bind(g);l.tooltip_show&&(g.hasType("scatter")||g.hasArcType()||(j.style("visibility","visible").data([k[0]]).attr(l.axis_rotated?"y1":"x1",i).attr(l.axis_rotated?"y2":"x2",i),g.smoothLines(j,"grid")))},T.hideXGridFocus=function(){this.main.select("line."+Q.xgridFocus).style("visibility","hidden")},T.updateXgridFocus=function(){var d=this,c=d.config;d.main.select("line."+Q.xgridFocus).attr("x1",c.axis_rotated?0:-10).attr("x2",c.axis_rotated?d.width:-10).attr("y1",c.axis_rotated?-10:0).attr("y2",c.axis_rotated?-10:d.height)},T.generateGridData=function(r,q){var p,o,n,m,l=this,k=[],j=l.main.select("."+Q.axisX).selectAll(".tick").size();if("year"===r){for(p=l.getXDomain(),o=p[0].getFullYear(),n=p[1].getFullYear(),m=o;n>=m;m++){k.push(new Date(m+"-01-01 00:00:00"))}}else{k=q.ticks(10),k.length>j&&(k=k.filter(function(b){return(""+b).indexOf(".")<0}))}return k},T.getGridFilterToRemove=function(b){return b?function(a){var d=!1;return[].concat(b).forEach(function(c){("value" in c&&a.value===c.value||"class" in c&&a["class"]===c["class"])&&(d=!0)}),d}:function(){return !0}},T.removeGridLines=function(j,i){var p=this,o=p.config,n=p.getGridFilterToRemove(j),m=function(b){return !n(b)},l=i?Q.xgridLines:Q.ygridLines,k=i?Q.xgridLine:Q.ygridLine;p.main.select("."+l).selectAll("."+k).filter(n).transition().duration(o.transition_duration).style("opacity",0).remove(),i?o.grid_x_lines=o.grid_x_lines.filter(m):o.grid_y_lines=o.grid_y_lines.filter(m)},T.initTooltip=function(){var e,d=this,f=d.config;if(d.tooltip=d.selectChart.style("position","relative").append("div").attr("class",Q.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),f.tooltip_init_show){if(d.isTimeSeries()&&N(f.tooltip_init_x)){for(f.tooltip_init_x=d.parseDate(f.tooltip_init_x),e=0;e<d.data.targets[0].values.length&&d.data.targets[0].values[e].x-f.tooltip_init_x!==0;e++){}f.tooltip_init_x=e}d.tooltip.html(f.tooltip_contents.call(d,d.data.targets.map(function(b){return d.addName(b.values[f.tooltip_init_x])}),d.axis.getXAxisTickFormat(),d.getYFormat(d.hasArcType()),d.color)),d.tooltip.style("top",f.tooltip_init_position.top).style("left",f.tooltip_init_position.left).style("display","block")}},T.getTooltipContent=function(ai,ah,ag,af){var ae,ad,ac,A,z,y,x=this,w=x.config,v=w.tooltip_format_title||ah,u=w.tooltip_format_name||function(b){return b},t=w.tooltip_format_value||ag,s=x.isOrderAsc();if(0===w.data_groups.length){ai.sort(function(f,e){var h=f?f.value:null,g=e?e.value:null;return s?h-g:g-h})}else{var r=x.orderTargets(x.data.targets).map(function(b){return b.id});ai.sort(function(f,e){var h=f?f.value:null,g=e?e.value:null;return h>0&&g>0&&(h=f?r.indexOf(f.id):null,g=e?r.indexOf(e.id):null),s?h-g:g-h})}for(ad=0;ad<ai.length;ad++){if(ai[ad]&&(ai[ad].value||0===ai[ad].value)&&(ae||(ac=C(v?v(ai[ad].x):ai[ad].x),ae="<table class='"+x.CLASS.tooltip+"'>"+(ac||0===ac?"<tr><th colspan='2'>"+ac+"</th></tr>":"")),A=C(t(ai[ad].value,ai[ad].ratio,ai[ad].id,ai[ad].index,ai)),void 0!==A)){if(null===ai[ad].name){continue}z=C(u(ai[ad].name,ai[ad].ratio,ai[ad].id,ai[ad].index)),y=x.levelColor?x.levelColor(ai[ad].value):af(ai[ad].id),ae+="<tr class='"+x.CLASS.tooltipName+"-"+x.getTargetSelectorSuffix(ai[ad].id)+"'>",ae+="<td class='name'><span style='background-color:"+y+"'></span>"+z+"</td>",ae+="<td class='value'>"+A+"</td>",ae+="</tr>"}}return ae+"</table>"},T.tooltipPosition=function(ac,A,z,y){var x,w,v,u,t,s=this,r=s.config,q=s.d3,p=s.hasArcType(),o=q.mouse(y);return p?(w=(s.width-(s.isLegendRight?s.getLegendWidth():0))/2+o[0],u=s.height/2+o[1]+20):(x=s.getSvgLeft(!0),r.axis_rotated?(w=x+o[0]+100,v=w+A,t=s.currentWidth-s.getCurrentPaddingRight(),u=s.x(ac[0].x)+20):(w=x+s.getCurrentPaddingLeft(!0)+s.x(ac[0].x)+20,v=w+A,t=x+s.currentWidth-s.getCurrentPaddingRight(),u=o[1]+15),v>t&&(w-=v-t+20),u+z>s.currentHeight&&(u-=z+30)),0>u&&(u=0),{top:u,left:w}},T.showTooltip=function(t,s){var r,q,p,o=this,n=o.config,m=o.hasArcType(),l=t.filter(function(b){return b&&P(b.value)}),i=n.tooltip_position||T.tooltipPosition;0!==l.length&&n.tooltip_show&&(o.tooltip.html(n.tooltip_contents.call(o,t,o.axis.getXAxisTickFormat(),o.getYFormat(m),o.color)).style("display","block"),r=o.tooltip.property("offsetWidth"),q=o.tooltip.property("offsetHeight"),p=i.call(this,l,r,q,s),o.tooltip.style("top",p.top+"px").style("left",p.left+"px"))},T.hideTooltip=function(){this.tooltip.style("display","none")},T.initLegend=function(){var b=this;return b.legendItemTextBox={},b.legendHasRendered=!1,b.legend=b.svg.append("g").attr("transform",b.getTranslate("legend")),b.config.legend_show?void b.updateLegendWithDefaults():(b.legend.style("visibility","hidden"),void (b.hiddenLegendIds=b.mapToIds(b.data.targets)))},T.updateLegendWithDefaults=function(){var b=this;b.updateLegend(b.mapToIds(b.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},T.updateSizeForLegend=function(g,f){var j=this,i=j.config,h={top:j.isLegendTop?j.getCurrentPaddingTop()+i.legend_inset_y+5.5:j.currentHeight-g-j.getCurrentPaddingBottom()-i.legend_inset_y,left:j.isLegendLeft?j.getCurrentPaddingLeft()+i.legend_inset_x+0.5:j.currentWidth-f-j.getCurrentPaddingRight()-i.legend_inset_x+0.5};j.margin3={top:j.isLegendRight?0:j.isLegendInset?h.top:j.currentHeight-g,right:NaN,bottom:0,left:j.isLegendRight?j.currentWidth-f:j.isLegendInset?h.left:0}},T.transformLegend=function(d){var c=this;(d?c.legend.transition():c.legend).attr("transform",c.getTranslate("legend"))},T.updateLegendStep=function(b){this.legendStep=b},T.updateLegendItemWidth=function(b){this.legendItemWidth=b},T.updateLegendItemHeight=function(b){this.legendItemHeight=b},T.getLegendWidth=function(){var b=this;return b.config.legend_show?b.isLegendRight||b.isLegendInset?b.legendItemWidth*(b.legendStep+1):b.currentWidth:0},T.getLegendHeight=function(){var d=this,c=0;return d.config.legend_show&&(c=d.isLegendRight?d.currentHeight:Math.max(20,d.legendItemHeight)*(d.legendStep+1)),c},T.opacityForLegend=function(b){return b.classed(Q.legendItemHidden)?null:1},T.opacityForUnfocusedLegend=function(b){return b.classed(Q.legendItemHidden)?null:0.3},T.toggleFocusLegend=function(e,d){var f=this;e=f.mapToTargetIds(e),f.legend.selectAll("."+Q.legendItem).filter(function(a){return e.indexOf(a)>=0}).classed(Q.legendItemFocused,d).transition().duration(100).style("opacity",function(){var b=d?f.opacityForLegend:f.opacityForUnfocusedLegend;return b.call(f,f.d3.select(this))})},T.revertLegend=function(){var d=this,c=d.d3;d.legend.selectAll("."+Q.legendItem).classed(Q.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return d.opacityForLegend(c.select(this))})},T.showLegend=function(e){var d=this,f=d.config;f.legend_show||(f.legend_show=!0,d.legend.style("visibility","visible"),d.legendHasRendered||d.updateLegendWithDefaults()),d.removeHiddenLegendIds(e),d.legend.selectAll(d.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return d.opacityForLegend(d.d3.select(this))})},T.hideLegend=function(e){var d=this,f=d.config;f.legend_show&&G(e)&&(f.legend_show=!1,d.legend.style("visibility","hidden")),d.addHiddenLegendIds(e),d.legend.selectAll(d.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},T.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},T.updateLegend=function(aJ,aI,aH){function aG(d,c){return an.legendItemTextBox[c]||(an.legendItemTextBox[c]=an.getTextRect(d.textContent,Q.legendItem,d)),an.legendItemTextBox[c]}function aF(aK,A,z){function y(e,c){c||(x=(a-af-d)/2,ah>x&&(x=(a-d)/2,af=0,l++)),q[e]=l,w[l]=an.isLegendInset?10:x,ae[e]=af,af+=d}var x,v,u=0===z,t=z===aJ.length-1,s=aG(aK,A),r=s.width+ag+(!t||an.isLegendRight||an.isLegendInset?ak:0)+am.legend_padding,p=s.height+al,d=an.isLegendRight||an.isLegendInset?p:r,a=an.isLegendRight||an.isLegendInset?an.getLegendHeight():an.getLegendWidth();return u&&(af=0,l=0,aj=0,ai=0),am.legend_show&&!an.isLegendToShow(A)?void (ad[A]=ac[A]=q[A]=ae[A]=0):(ad[A]=r,ac[A]=p,(!aj||r>=aj)&&(aj=r),(!ai||p>=ai)&&(ai=p),v=an.isLegendRight||an.isLegendInset?ai:aj,void (am.legend_equally?(Object.keys(ad).forEach(function(b){ad[b]=aj}),Object.keys(ac).forEach(function(b){ac[b]=ai}),x=(a-v*aJ.length)/2,ah>x?(af=0,l=0,aJ.forEach(function(b){y(b)})):y(A,!0)):y(A)))}var aE,aD,aC,aB,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an=this,am=an.config,al=4,ak=10,aj=0,ai=0,ah=10,ag=am.legend_item_tile_width+5,af=0,ae={},ad={},ac={},w=[0],q={},l=0;aJ=aJ.filter(function(b){return !K(am.data_names[b])||null!==am.data_names[b]}),aI=aI||{},au=E(aI,"withTransition",!0),at=E(aI,"withTransitionForTransform",!0),an.isLegendInset&&(l=am.legend_inset_step?am.legend_inset_step:aJ.length,an.updateLegendStep(l)),an.isLegendRight?(aE=function(b){return aj*q[b]},aB=function(b){return w[q[b]]+ae[b]}):an.isLegendInset?(aE=function(b){return aj*q[b]+10},aB=function(b){return w[q[b]]+ae[b]}):(aE=function(b){return w[q[b]]+ae[b]},aB=function(b){return ai*q[b]}),aD=function(d,c){return aE(d,c)+4+am.legend_item_tile_width},aA=function(d,c){return aB(d,c)+9},aC=function(d,c){return aE(d,c)},az=function(d,c){return aB(d,c)-5},ay=function(d,c){return aE(d,c)-2},ax=function(d,c){return aE(d,c)-2+am.legend_item_tile_width},aw=function(d,c){return aB(d,c)+4},av=an.legend.selectAll("."+Q.legendItem).data(aJ).enter().append("g").attr("class",function(b){return an.generateClass(Q.legendItem,b)}).style("visibility",function(b){return an.isLegendToShow(b)?"visible":"hidden"}).style("cursor","pointer").on("click",function(b){am.legend_item_onclick?am.legend_item_onclick.call(an,b):an.d3.event.altKey?(an.api.hide(),an.api.show(b)):(an.api.toggle(b),an.isTargetToShow(b)?an.api.focus(b):an.api.revert())}).on("mouseover",function(b){am.legend_item_onmouseover?am.legend_item_onmouseover.call(an,b):(an.d3.select(this).classed(Q.legendItemFocused,!0),!an.transiting&&an.isTargetToShow(b)&&an.api.focus(b))}).on("mouseout",function(b){am.legend_item_onmouseout?am.legend_item_onmouseout.call(an,b):(an.d3.select(this).classed(Q.legendItemFocused,!1),an.api.revert())}),av.append("text").text(function(b){return K(am.data_names[b])?am.data_names[b]:b}).each(function(d,c){aF(this,d,c)}).style("pointer-events","none").attr("x",an.isLegendRight||an.isLegendInset?aD:-200).attr("y",an.isLegendRight||an.isLegendInset?-200:aA),av.append("rect").attr("class",Q.legendItemEvent).style("fill-opacity",0).attr("x",an.isLegendRight||an.isLegendInset?aC:-200).attr("y",an.isLegendRight||an.isLegendInset?-200:az),av.append("line").attr("class",Q.legendItemTile).style("stroke",an.color).style("pointer-events","none").attr("x1",an.isLegendRight||an.isLegendInset?ay:-200).attr("y1",an.isLegendRight||an.isLegendInset?-200:aw).attr("x2",an.isLegendRight||an.isLegendInset?ax:-200).attr("y2",an.isLegendRight||an.isLegendInset?-200:aw).attr("stroke-width",am.legend_item_tile_height),ao=an.legend.select("."+Q.legendBackground+" rect"),an.isLegendInset&&aj>0&&0===ao.size()&&(ao=an.legend.insert("g","."+Q.legendItem).attr("class",Q.legendBackground).append("rect")),ar=an.legend.selectAll("text").data(aJ).text(function(b){return K(am.data_names[b])?am.data_names[b]:b}).each(function(d,c){aF(this,d,c)}),(au?ar.transition():ar).attr("x",aD).attr("y",aA),aq=an.legend.selectAll("rect."+Q.legendItemEvent).data(aJ),(au?aq.transition():aq).attr("width",function(b){return ad[b]}).attr("height",function(b){return ac[b]}).attr("x",aC).attr("y",az),ap=an.legend.selectAll("line."+Q.legendItemTile).data(aJ),(au?ap.transition():ap).style("stroke",an.color).attr("x1",ay).attr("y1",aw).attr("x2",ax).attr("y2",aw),ao&&(au?ao.transition():ao).attr("height",an.getLegendHeight()-12).attr("width",aj*(l+1)+10),an.legend.selectAll("."+Q.legendItem).classed(Q.legendItemHidden,function(b){return !an.isTargetToShow(b)}),an.updateLegendItemWidth(aj),an.updateLegendItemHeight(ai),an.updateLegendStep(l),an.updateSizes(),an.updateScales(),an.updateSvgSize(),an.transformAll(at,aH),an.legendHasRendered=!0},T.initTitle=function(){var b=this;b.title=b.svg.append("text").text(b.config.title_text).attr("class",b.CLASS.title)},T.redrawTitle=function(){var b=this;b.title.attr("x",b.xForTitle.bind(b)).attr("y",b.yForTitle.bind(b))},T.xForTitle=function(){var f,e=this,h=e.config,g=h.title_position||"left";return f=g.indexOf("right")>=0?e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-h.title_padding.right:g.indexOf("center")>=0?(e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2:h.title_padding.left},T.yForTitle=function(){var b=this;return b.config.title_padding.top+b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).height},T.getTitlePadding=function(){var b=this;return b.yForTitle()+b.config.title_padding.bottom},Z(aa,W),W.prototype.init=function(){var e=this.owner,d=e.config,f=e.main;e.axes.x=f.append("g").attr("class",Q.axis+" "+Q.axisX).attr("clip-path",e.clipPathForXAxis).attr("transform",e.getTranslate("x")).style("visibility",d.axis_x_show?"visible":"hidden"),e.axes.x.append("text").attr("class",Q.axisXLabel).attr("transform",d.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),e.axes.y=f.append("g").attr("class",Q.axis+" "+Q.axisY).attr("clip-path",d.axis_y_inner?"":e.clipPathForYAxis).attr("transform",e.getTranslate("y")).style("visibility",d.axis_y_show?"visible":"hidden"),e.axes.y.append("text").attr("class",Q.axisYLabel).attr("transform",d.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=f.append("g").attr("class",Q.axis+" "+Q.axisY2).attr("transform",e.getTranslate("y2")).style("visibility",d.axis_y2_show?"visible":"hidden"),e.axes.y2.append("text").attr("class",Q.axisY2Label).attr("transform",d.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},W.prototype.getXAxis=function(v,u,t,s,r,q,p){var o=this.owner,n=o.config,m={isCategory:o.isCategorized(),withOuterTick:r,tickMultiline:n.axis_x_tick_multiline,tickWidth:n.axis_x_tick_width,tickTextRotate:p?0:n.axis_x_tick_rotate,withoutTransition:q},g=V(o.d3,m).scale(v).orient(u);return o.isTimeSeries()&&s&&"function"!=typeof s&&(s=s.map(function(b){return o.parseDate(b)})),g.tickFormat(t).tickValues(s),o.isCategorized()&&(g.tickCentered(n.axis_x_tick_centered),G(n.axis_x_tick_culling)&&(n.axis_x_tick_culling=!1)),g},W.prototype.updateXAxisTickValues=function(g,f){var j,i=this.owner,h=i.config;return(h.axis_x_tick_fit||h.axis_x_tick_count)&&(j=this.generateTickValues(i.mapTargetsToUniqueXs(g),h.axis_x_tick_count,i.isTimeSeries())),f?f.tickValues(j):(i.xAxis.tickValues(j),i.subXAxis.tickValues(j)),j},W.prototype.getYAxis=function(v,u,t,s,r,q,p){var o=this.owner,n=o.config,m={withOuterTick:r,withoutTransition:q,tickTextRotate:p?0:n.axis_y_tick_rotate},g=V(o.d3,m).scale(v).orient(u).tickFormat(t);return o.isTimeSeriesY()?g.ticks(o.d3.time[n.axis_y_tick_time_value],n.axis_y_tick_time_interval):g.tickValues(s),g},W.prototype.getId=function(d){var c=this.owner.config;return d in c.data_axes?c.data_axes[d]:"y"},W.prototype.getXAxisTickFormat=function(){var e=this.owner,d=e.config,f=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(b){return 0>b?b.toFixed(0):b};return d.axis_x_tick_format&&(O(d.axis_x_tick_format)?f=d.axis_x_tick_format:e.isTimeSeries()&&(f=function(a){return a?e.axisTimeFormat(d.axis_x_tick_format)(a):""})),O(f)?function(a){return f.call(e,a)}:f},W.prototype.getTickValues=function(d,c){return d?d:c?c.tickValues():void 0},W.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},W.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},W.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},W.prototype.getLabelOptionByAxisId=function(f){var e,h=this.owner,g=h.config;return"y"===f?e=g.axis_y_label:"y2"===f?e=g.axis_y2_label:"x"===f&&(e=g.axis_x_label),e},W.prototype.getLabelText=function(d){var c=this.getLabelOptionByAxisId(d);return N(c)?c:c?c.text:null},W.prototype.setLabelText=function(g,f){var j=this.owner,i=j.config,h=this.getLabelOptionByAxisId(g);N(h)?"y"===g?i.axis_y_label=f:"y2"===g?i.axis_y2_label=f:"x"===g&&(i.axis_x_label=f):h&&(h.text=f)},W.prototype.getLabelPosition=function(f,e){var h=this.getLabelOptionByAxisId(f),g=h&&"object"==typeof h&&h.position?h.position:e;return{isInner:g.indexOf("inner")>=0,isOuter:g.indexOf("outer")>=0,isLeft:g.indexOf("left")>=0,isCenter:g.indexOf("center")>=0,isRight:g.indexOf("right")>=0,isTop:g.indexOf("top")>=0,isMiddle:g.indexOf("middle")>=0,isBottom:g.indexOf("bottom")>=0}},W.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},W.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},W.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},W.prototype.getLabelPositionById=function(b){return"y2"===b?this.getY2AxisLabelPosition():"y"===b?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},W.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},W.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},W.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},W.prototype.xForAxisLabel=function(e,d){var f=this.owner;return e?d.isLeft?0:d.isCenter?f.width/2:f.width:d.isBottom?-f.height:d.isMiddle?-f.height/2:0},W.prototype.dxForAxisLabel=function(d,c){return d?c.isLeft?"0.5em":c.isRight?"-0.5em":"0":c.isTop?"-0.5em":c.isBottom?"0.5em":"0"},W.prototype.textAnchorForAxisLabel=function(d,c){return d?c.isLeft?"start":c.isCenter?"middle":"end":c.isBottom?"start":c.isMiddle?"middle":"end"},W.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},W.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},W.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},W.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},W.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},W.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},W.prototype.dyForXAxisLabel=function(){var e=this.owner,d=e.config,f=this.getXAxisLabelPosition();return d.axis_rotated?f.isInner?"1.2em":-25-this.getMaxTickWidth("x"):f.isInner?"-0.5em":d.axis_x_height?d.axis_x_height-10:"3em"},W.prototype.dyForYAxisLabel=function(){var d=this.owner,c=this.getYAxisLabelPosition();return d.config.axis_rotated?c.isInner?"-0.5em":"3em":c.isInner?"1.2em":-10-(d.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},W.prototype.dyForY2AxisLabel=function(){var d=this.owner,c=this.getY2AxisLabelPosition();return d.config.axis_rotated?c.isInner?"1.2em":"-2.2em":c.isInner?"-0.5em":15+(d.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},W.prototype.textAnchorForXAxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(!b.config.axis_rotated,this.getXAxisLabelPosition())},W.prototype.textAnchorForYAxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(b.config.axis_rotated,this.getYAxisLabelPosition())},W.prototype.textAnchorForY2AxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(b.config.axis_rotated,this.getY2AxisLabelPosition())},W.prototype.getMaxTickWidth=function(t,s){var r,q,p,o,n,m=this.owner,l=m.config,k=0;return s&&m.currentMaxTickWidths[t]?m.currentMaxTickWidths[t]:(m.svg&&(r=m.filterTargetsToShow(m.data.targets),"y"===t?(q=m.y.copy().domain(m.getYDomain(r,"y")),p=this.getYAxis(q,m.yOrient,l.axis_y_tick_format,m.yAxisTickValues,!1,!0,!0)):"y2"===t?(q=m.y2.copy().domain(m.getYDomain(r,"y2")),p=this.getYAxis(q,m.y2Orient,l.axis_y2_tick_format,m.y2AxisTickValues,!1,!0,!0)):(q=m.x.copy().domain(m.getXDomain(r)),p=this.getXAxis(q,m.xOrient,m.xAxisTickFormat,m.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(r,p)),o=m.d3.select("body").append("div").classed("c3",!0),n=o.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),n.append("g").call(p).each(function(){m.d3.select(this).selectAll("text").each(function(){var b=this.getBoundingClientRect();k<b.width&&(k=b.width)}),o.remove()})),m.currentMaxTickWidths[t]=0>=k?m.currentMaxTickWidths[t]:k,m.currentMaxTickWidths[t])},W.prototype.updateLabels=function(g){var f=this.owner,j=f.main.select("."+Q.axisX+" ."+Q.axisXLabel),i=f.main.select("."+Q.axisY+" ."+Q.axisYLabel),h=f.main.select("."+Q.axisY2+" ."+Q.axisY2Label);(g?j.transition():j).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(g?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(g?h.transition():h).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},W.prototype.getPadding=function(g,f,j,i){var h="number"==typeof g?g:g[f];return P(h)?"ratio"===g.unit?g[f]*i:this.convertPixelsToAxisPadding(h,i):j},W.prototype.convertPixelsToAxisPadding=function(f,e){var h=this.owner,g=h.config.axis_rotated?h.width:h.height;return e*(f/g)},W.prototype.generateTickValues=function(v,u,t){var s,r,q,p,o,n,m,l=v;if(u){if(s=O(u)?u():u,1===s){l=[v[0]]}else{if(2===s){l=[v[0],v[v.length-1]]}else{if(s>2){for(p=s-2,r=v[0],q=v[v.length-1],o=(q-r)/(p+1),l=[r],n=0;p>n;n++){m=+r+o*(n+1),l.push(t?new Date(m):m)}l.push(q)}}}}return t||(l=l.sort(function(d,c){return d-c})),l},W.prototype.generateTransitions=function(e){var d=this.owner,f=d.axes;return{axisX:e?f.x.transition().duration(e):f.x,axisY:e?f.y.transition().duration(e):f.y,axisY2:e?f.y2.transition().duration(e):f.y2,axisSubX:e?f.subx.transition().duration(e):f.subx}},W.prototype.redraw=function(e,d){var f=this.owner;f.axes.x.style("opacity",d?0:1),f.axes.y.style("opacity",d?0:1),f.axes.y2.style("opacity",d?0:1),f.axes.subx.style("opacity",d?0:1),e.axisX.call(f.xAxis),e.axisY.call(f.yAxis),e.axisY2.call(f.y2Axis),e.axisSubX.call(f.subXAxis)},T.getClipPath=function(a){var d=ab.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(d?"":document.URL.split("#")[0])+"#"+a+")"},T.appendClip=function(d,c){return d.append("clipPath").attr("id",c).append("rect")},T.getAxisClipX=function(d){var c=Math.max(30,this.margin.left);return d?-(1+c):-(c-1)},T.getAxisClipY=function(b){return b?-20:-this.margin.top},T.getXAxisClipX=function(){var b=this;return b.getAxisClipX(!b.config.axis_rotated)},T.getXAxisClipY=function(){var b=this;return b.getAxisClipY(!b.config.axis_rotated)},T.getYAxisClipX=function(){var b=this;return b.config.axis_y_inner?-1:b.getAxisClipX(b.config.axis_rotated)},T.getYAxisClipY=function(){var b=this;return b.getAxisClipY(b.config.axis_rotated)},T.getAxisClipWidth=function(f){var e=this,h=Math.max(30,e.margin.left),g=Math.max(30,e.margin.right);return f?e.width+2+h+g:e.margin.left+20},T.getAxisClipHeight=function(b){return(b?this.margin.bottom:this.margin.top+this.height)+20},T.getXAxisClipWidth=function(){var b=this;return b.getAxisClipWidth(!b.config.axis_rotated)},T.getXAxisClipHeight=function(){var b=this;return b.getAxisClipHeight(!b.config.axis_rotated)},T.getYAxisClipWidth=function(){var b=this;return b.getAxisClipWidth(b.config.axis_rotated)+(b.config.axis_y_inner?20:0)},T.getYAxisClipHeight=function(){var b=this;return b.getAxisClipHeight(b.config.axis_rotated)},T.initPie=function(){var e=this,d=e.d3,f=e.config;e.pie=d.layout.pie().value(function(b){return b.values.reduce(function(g,c){return g+c.value},0)}),f.data_order||e.pie.sort(null)},T.updateRadius=function(){var e=this,d=e.config,f=d.gauge_width||d.donut_width;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2,e.radius=0.95*e.radiusExpanded,e.innerRadiusRatio=f?(e.radius-f)/e.radius:0.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0},T.updateArc=function(){var b=this;b.svgArc=b.getSvgArc(),b.svgArcExpanded=b.getSvgArcExpanded(),b.svgArcExpandedSub=b.getSvgArcExpanded(0.98)},T.updateAngle=function(r){var q,p,o,n,m=this,l=m.config,k=!1,j=0;return l?(m.pie(m.filterTargetsToShow(m.data.targets)).forEach(function(a){k||a.data.id!==r.data.id||(k=!0,r=a,r.index=j),j++}),isNaN(r.startAngle)&&(r.startAngle=0),isNaN(r.endAngle)&&(r.endAngle=r.startAngle),m.isGaugeType(r.data)&&(q=l.gauge_min,p=l.gauge_max,o=Math.PI*(l.gauge_fullCircle?2:1)/(p-q),n=r.value<q?0:r.value<p?r.value-q:p-q,r.startAngle=l.gauge_startingAngle,r.endAngle=r.startAngle+o*n),k?r:null):null},T.getSvgArc=function(){var e=this,d=e.d3.svg.arc().outerRadius(e.radius).innerRadius(e.innerRadius),f=function(g,b){var a;return b?d(g):(a=e.updateAngle(g),a?d(a):"M 0 0")};return f.centroid=d.centroid,f},T.getSvgArcExpanded=function(e){var d=this,f=d.d3.svg.arc().outerRadius(d.radiusExpanded*(e?e:1)).innerRadius(d.innerRadius);return function(b){var c=d.updateAngle(b);return c?f(c):"M 0 0"}},T.getArc=function(e,d,f){return f||this.isArcType(e.data)?this.svgArc(e,d):"M 0 0"},T.transformForArcLabel=function(t){var s,r,q,p,o,n=this,m=n.config,l=n.updateAngle(t),k="";return l&&!n.hasType("gauge")&&(s=this.svgArc.centroid(l),r=isNaN(s[0])?0:s[0],q=isNaN(s[1])?0:s[1],p=Math.sqrt(r*r+q*q),o=n.hasType("donut")&&m.donut_label_ratio?O(m.donut_label_ratio)?m.donut_label_ratio(t,n.radius,p):m.donut_label_ratio:n.hasType("pie")&&m.pie_label_ratio?O(m.pie_label_ratio)?m.pie_label_ratio(t,n.radius,p):m.pie_label_ratio:n.radius&&p?(36/n.radius>0.375?1.175-36/n.radius:0.8)*n.radius/p:0,k="translate("+r*o+","+q*o+")"),k},T.getArcRatio=function(f){var e=this,h=e.config,g=Math.PI*(e.hasType("gauge")&&!h.gauge_fullCircle?1:2);return f?(f.endAngle-f.startAngle)/g:null},T.convertToArcData=function(b){return this.addName({id:b.data.id,value:b.value,ratio:this.getArcRatio(b),index:b.index})},T.textForArcLabel=function(i){var h,n,m,l,k,j=this;return j.shouldShowArcLabel()?(h=j.updateAngle(i),n=h?h.value:null,m=j.getArcRatio(h),l=i.data.id,j.hasType("gauge")||j.meetsArcLabelThreshold(m)?(k=j.getArcLabelFormat(),k?k(n,m,l):j.defaultArcValueFormat(n,m)):""):""},T.expandArc=function(a){var f,e=this;return e.transiting?void (f=ab.setInterval(function(){e.transiting||(ab.clearInterval(f),e.legend.selectAll(".c3-legend-item-focused").size()>0&&e.expandArc(a))},10)):(a=e.mapToTargetIds(a),void e.svg.selectAll(e.selectorTargets(a,"."+Q.chartArc)).each(function(b){e.shouldExpand(b.data.id)&&e.d3.select(this).selectAll("path").transition().duration(e.expandDuration(b.data.id)).attr("d",e.svgArcExpanded).transition().duration(2*e.expandDuration(b.data.id)).attr("d",e.svgArcExpandedSub).each(function(c){e.isDonutType(c.data)})}))},T.unexpandArc=function(d){var c=this;c.transiting||(d=c.mapToTargetIds(d),c.svg.selectAll(c.selectorTargets(d,"."+Q.chartArc)).selectAll("path").transition().duration(function(b){return c.expandDuration(b.data.id)}).attr("d",c.svgArc),c.svg.selectAll("."+Q.arc).style("opacity",1))},T.expandDuration=function(e){var d=this,f=d.config;return d.isDonutType(e)?f.donut_expand_duration:d.isGaugeType(e)?f.gauge_expand_duration:d.isPieType(e)?f.pie_expand_duration:50},T.shouldExpand=function(e){var d=this,f=d.config;return d.isDonutType(e)&&f.donut_expand||d.isGaugeType(e)&&f.gauge_expand||d.isPieType(e)&&f.pie_expand},T.shouldShowArcLabel=function(){var e=this,d=e.config,f=!0;return e.hasType("donut")?f=d.donut_label_show:e.hasType("pie")&&(f=d.pie_label_show),f},T.meetsArcLabelThreshold=function(f){var e=this,h=e.config,g=e.hasType("donut")?h.donut_label_threshold:h.pie_label_threshold;return f>=g},T.getArcLabelFormat=function(){var e=this,d=e.config,f=d.pie_label_format;return e.hasType("gauge")?f=d.gauge_label_format:e.hasType("donut")&&(f=d.donut_label_format),f},T.getArcTitle=function(){var b=this;return b.hasType("donut")?b.config.donut_title:""},T.updateTargetsForArc=function(j){var i,p,o=this,n=o.main,m=o.classChartArc.bind(o),l=o.classArcs.bind(o),k=o.classFocus.bind(o);i=n.select("."+Q.chartArcs).selectAll("."+Q.chartArc).data(o.pie(j)).attr("class",function(b){return m(b)+k(b.data)}),p=i.enter().append("g").attr("class",m),p.append("g").attr("class",l),p.append("text").attr("dy",o.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},T.initArc=function(){var b=this;b.arcs=b.main.select("."+Q.chart).append("g").attr("class",Q.chartArcs).attr("transform",b.getTranslate("arc")),b.arcs.append("text").attr("class",Q.chartArcsTitle).style("text-anchor","middle").text(b.getArcTitle())},T.redrawArc=function(j,i,p){var o,n=this,m=n.d3,l=n.config,k=n.main;o=k.selectAll("."+Q.arcs).selectAll("."+Q.arc).data(n.arcData.bind(n)),o.enter().append("path").attr("class",n.classArc.bind(n)).style("fill",function(b){return n.color(b.data)}).style("cursor",function(b){return l.interaction_enabled&&l.data_selection_isselectable(b)?"pointer":null}).style("opacity",0).each(function(b){n.isGaugeType(b.data)&&(b.startAngle=b.endAngle=l.gauge_startingAngle),this._current=b}),o.attr("transform",function(b){return !n.isGaugeType(b.data)&&p?"scale(0)":""}).style("opacity",function(b){return b===this._current?0:1}).on("mouseover",l.interaction_enabled?function(e){var d,f;n.transiting||(d=n.updateAngle(e),d&&(f=n.convertToArcData(d),n.expandArc(d.data.id),n.api.focus(d.data.id),n.toggleFocusLegend(d.data.id,!0),n.config.data_onmouseover(f,this)))}:null).on("mousemove",l.interaction_enabled?function(f){var e,h,g=n.updateAngle(f);g&&(e=n.convertToArcData(g),h=[e],n.showTooltip(h,this))}:null).on("mouseout",l.interaction_enabled?function(e){var d,f;n.transiting||(d=n.updateAngle(e),d&&(f=n.convertToArcData(d),n.unexpandArc(d.data.id),n.api.revert(),n.revertLegend(),n.hideTooltip(),n.config.data_onmouseout(f,this)))}:null).on("click",l.interaction_enabled?function(f,e){var h,g=n.updateAngle(f);g&&(h=n.convertToArcData(g),n.toggleShape&&n.toggleShape(this,h,e),n.config.data_onclick.call(n.api,h,this))}:null).each(function(){n.transiting=!0}).transition().duration(j).attrTween("d",function(e){var d,f=n.updateAngle(e);return f?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),d=m.interpolate(this._current,f),this._current=d(0),function(b){var a=d(b);return a.data=e.data,n.getArc(a,!0)}):function(){return"M 0 0"}}).attr("transform",p?"scale(1)":"").style("fill",function(b){return n.levelColor?n.levelColor(b.data.values[0].value):n.color(b.data.id)}).style("opacity",1).call(n.endall,function(){n.transiting=!1}),o.exit().transition().duration(i).style("opacity",0).remove(),k.selectAll("."+Q.chartArc).select("text").style("opacity",0).attr("class",function(b){return n.isGaugeType(b.data)?Q.gaugeValue:""}).text(n.textForArcLabel.bind(n)).attr("transform",n.transformForArcLabel.bind(n)).style("font-size",function(b){return n.isGaugeType(b.data)?Math.round(n.radius/5)+"px":""}).transition().duration(j).style("opacity",function(b){return n.isTargetToShow(b.data.id)&&n.isArcType(b.data)?1:0}),k.select("."+Q.chartArcsTitle).style("opacity",n.hasType("donut")||n.hasType("gauge")?1:0),n.hasType("gauge")&&(n.arcs.select("."+Q.chartArcsBackground).attr("d",function(){var b={data:[{value:l.gauge_max}],startAngle:l.gauge_startingAngle,endAngle:-1*l.gauge_startingAngle};return n.getArc(b,!0,!0)}),n.arcs.select("."+Q.chartArcsGaugeUnit).attr("dy",".75em").text(l.gauge_label_show?l.gauge_units:""),n.arcs.select("."+Q.chartArcsGaugeMin).attr("dx",-1*(n.innerRadius+(n.radius-n.innerRadius)/(l.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(l.gauge_label_show?l.gauge_min:""),n.arcs.select("."+Q.chartArcsGaugeMax).attr("dx",n.innerRadius+(n.radius-n.innerRadius)/(l.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(l.gauge_label_show?l.gauge_max:""))},T.initGauge=function(){var b=this.arcs;this.hasType("gauge")&&(b.append("path").attr("class",Q.chartArcsBackground),b.append("text").attr("class",Q.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),b.append("text").attr("class",Q.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),b.append("text").attr("class",Q.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},T.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},T.initRegion=function(){var b=this;b.region=b.main.append("g").attr("clip-path",b.clipPath).attr("class",Q.regions)},T.updateRegion=function(e){var d=this,f=d.config;d.region.style("visibility",d.hasArcType()?"hidden":"visible"),d.mainRegion=d.main.select("."+Q.regions).selectAll("."+Q.region).data(f.regions),d.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),d.mainRegion.attr("class",d.classRegion.bind(d)),d.mainRegion.exit().transition().duration(e).style("opacity",0).remove()},T.redrawRegion=function(i){var h=this,n=h.mainRegion.selectAll("rect").each(function(){var b=h.d3.select(this.parentNode).datum();h.d3.select(this).datum(b)}),m=h.regionX.bind(h),l=h.regionY.bind(h),k=h.regionWidth.bind(h),j=h.regionHeight.bind(h);return[(i?n.transition():n).attr("x",m).attr("y",l).attr("width",k).attr("height",j).style("fill-opacity",function(b){return P(b.opacity)?b.opacity:0.1})]},T.regionX=function(g){var f,j=this,i=j.config,h="y"===g.axis?j.y:j.y2;return f="y"===g.axis||"y2"===g.axis?i.axis_rotated&&"start" in g?h(g.start):0:i.axis_rotated?0:"start" in g?j.x(j.isTimeSeries()?j.parseDate(g.start):g.start):0},T.regionY=function(g){var f,j=this,i=j.config,h="y"===g.axis?j.y:j.y2;return f="y"===g.axis||"y2"===g.axis?i.axis_rotated?0:"end" in g?h(g.end):0:i.axis_rotated&&"start" in g?j.x(j.isTimeSeries()?j.parseDate(g.start):g.start):0},T.regionWidth=function(h){var g,l=this,k=l.config,j=l.regionX(h),i="y"===h.axis?l.y:l.y2;return g="y"===h.axis||"y2"===h.axis?k.axis_rotated&&"end" in h?i(h.end):l.width:k.axis_rotated?l.width:"end" in h?l.x(l.isTimeSeries()?l.parseDate(h.end):h.end):l.width,j>g?0:g-j},T.regionHeight=function(h){var g,l=this,k=l.config,j=this.regionY(h),i="y"===h.axis?l.y:l.y2;return g="y"===h.axis||"y2"===h.axis?k.axis_rotated?l.height:"start" in h?i(h.start):l.height:k.axis_rotated&&"end" in h?l.x(l.isTimeSeries()?l.parseDate(h.end):h.end):l.height,j>g?0:g-j},T.isRegionOnX=function(b){return !b.axis||"x"===b.axis},T.drag=function(z){var y,x,w,v,u,t,s,r,q=this,p=q.config,o=q.main,l=q.d3;q.hasArcType()||p.data_selection_enabled&&(p.zoom_enabled&&!q.zoom.altDomain||p.data_selection_multiple&&(y=q.dragStart[0],x=q.dragStart[1],w=z[0],v=z[1],u=Math.min(y,w),t=Math.max(y,w),s=p.data_selection_grouped?q.margin.top:Math.min(x,v),r=p.data_selection_grouped?q.height:Math.max(x,v),o.select("."+Q.dragarea).attr("x",u).attr("y",s).attr("width",t-u).attr("height",r-s),o.selectAll("."+Q.shapes).selectAll("."+Q.shape).filter(function(b){return p.data_selection_isselectable(b)}).each(function(af,ae){var ad,ac,A,n,j,i,h=l.select(this),g=h.classed(Q.SELECTED),f=h.classed(Q.INCLUDED),ag=!1;if(h.classed(Q.circle)){ad=1*h.attr("cx"),ac=1*h.attr("cy"),j=q.togglePoint,ag=ad>u&&t>ad&&ac>s&&r>ac}else{if(!h.classed(Q.bar)){return}i=B(this),ad=i.x,ac=i.y,A=i.width,n=i.height,j=q.togglePath,ag=!(ad>t||u>ad+A||ac>r||s>ac+n)}ag^f&&(h.classed(Q.INCLUDED,!f),h.classed(Q.SELECTED,!g),j.call(q,!g,h,af,ae))})))},T.dragstart=function(e){var d=this,f=d.config;d.hasArcType()||f.data_selection_enabled&&(d.dragStart=e,d.main.select("."+Q.chart).append("rect").attr("class",Q.dragarea).style("opacity",0.1),d.dragging=!0)},T.dragend=function(){var d=this,c=d.config;d.hasArcType()||c.data_selection_enabled&&(d.main.select("."+Q.dragarea).transition().duration(100).style("opacity",0).remove(),d.main.selectAll("."+Q.shape).classed(Q.INCLUDED,!1),d.dragging=!1)},T.selectPoint=function(j,i,p){var o=this,n=o.config,m=(n.axis_rotated?o.circleY:o.circleX).bind(o),l=(n.axis_rotated?o.circleX:o.circleY).bind(o),k=o.pointSelectR.bind(o);n.data_onselected.call(o.api,i,j.node()),o.main.select("."+Q.selectedCircles+o.getTargetSelectorSuffix(i.id)).selectAll("."+Q.selectedCircle+"-"+p).data([i]).enter().append("circle").attr("class",function(){return o.generateClass(Q.selectedCircle,p)}).attr("cx",m).attr("cy",l).attr("stroke",function(){return o.color(i)}).attr("r",function(b){return 1.4*o.pointSelectR(b)}).transition().duration(100).attr("r",k)},T.unselectPoint=function(f,e,h){var g=this;g.config.data_onunselected.call(g.api,e,f.node()),g.main.select("."+Q.selectedCircles+g.getTargetSelectorSuffix(e.id)).selectAll("."+Q.selectedCircle+"-"+h).transition().duration(100).attr("r",0).remove()},T.togglePoint=function(f,e,h,g){f?this.selectPoint(e,h,g):this.unselectPoint(e,h,g)},T.selectPath=function(e,d){var f=this;f.config.data_onselected.call(f,d,e.node()),f.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return f.d3.rgb(f.color(d)).brighter(0.75)})},T.unselectPath=function(e,d){var f=this;f.config.data_onunselected.call(f,d,e.node()),f.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return f.color(d)})},T.togglePath=function(f,e,h,g){f?this.selectPath(e,h,g):this.unselectPath(e,h,g)},T.getToggle=function(f,e){var h,g=this;return"circle"===f.nodeName?h=g.isStepType(e)?function(){}:g.togglePoint:"path"===f.nodeName&&(h=g.togglePath),h},T.toggleShape=function(r,q,p){var o=this,n=o.d3,m=o.config,l=n.select(r),k=l.classed(Q.SELECTED),j=o.getToggle(r,q).bind(o);m.data_selection_enabled&&m.data_selection_isselectable(q)&&(m.data_selection_multiple||o.main.selectAll("."+Q.shapes+(m.data_selection_grouped?o.getTargetSelectorSuffix(q.id):"")).selectAll("."+Q.shape).each(function(e,d){var f=n.select(this);f.classed(Q.SELECTED)&&j(!1,f.classed(Q.SELECTED,!1),e,d)}),l.classed(Q.SELECTED,!k),j(!k,l,q,p))},T.initBrush=function(){var d=this,c=d.d3;d.brush=c.svg.brush().on("brush",function(){d.redrawForBrush()}),d.brush.update=function(){return d.context&&d.context.select("."+Q.brush).call(this),this},d.brush.scale=function(a){return d.config.axis_rotated?this.y(a):this.x(a)}},T.initSubchart=function(){var f=this,e=f.config,h=f.context=f.svg.append("g").attr("transform",f.getTranslate("context")),g=e.subchart_show?"visible":"hidden";h.style("visibility",g),h.append("g").attr("clip-path",f.clipPathForSubchart).attr("class",Q.chart),h.select("."+Q.chart).append("g").attr("class",Q.chartBars),h.select("."+Q.chart).append("g").attr("class",Q.chartLines),h.append("g").attr("clip-path",f.clipPath).attr("class",Q.brush).call(f.brush),f.axes.subx=h.append("g").attr("class",Q.axisX).attr("transform",f.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":f.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?g:"hidden")},T.updateTargetsForSubchart=function(z){var y,x,w,v,u=this,t=u.context,s=u.config,r=u.classChartBar.bind(u),q=u.classBars.bind(u),p=u.classChartLine.bind(u),o=u.classLines.bind(u),l=u.classAreas.bind(u);s.subchart_show&&(v=t.select("."+Q.chartBars).selectAll("."+Q.chartBar).data(z).attr("class",r),w=v.enter().append("g").style("opacity",0).attr("class",r),w.append("g").attr("class",q),x=t.select("."+Q.chartLines).selectAll("."+Q.chartLine).data(z).attr("class",p),y=x.enter().append("g").style("opacity",0).attr("class",p),y.append("g").attr("class",o),y.append("g").attr("class",l),t.selectAll("."+Q.brush+" rect").attr(s.axis_rotated?"width":"height",s.axis_rotated?u.width2:u.height2))},T.updateBarForSubchart=function(d){var c=this;c.contextBar=c.context.selectAll("."+Q.bars).selectAll("."+Q.bar).data(c.barData.bind(c)),c.contextBar.enter().append("path").attr("class",c.classBar.bind(c)).style("stroke","none").style("fill",c.color),c.contextBar.style("opacity",c.initialOpacity.bind(c)),c.contextBar.exit().transition().duration(d).style("opacity",0).remove()},T.redrawBarForSubchart=function(e,d,f){(d?this.contextBar.transition(Math.random().toString()).duration(f):this.contextBar).attr("d",e).style("opacity",1)},T.updateLineForSubchart=function(d){var c=this;c.contextLine=c.context.selectAll("."+Q.lines).selectAll("."+Q.line).data(c.lineData.bind(c)),c.contextLine.enter().append("path").attr("class",c.classLine.bind(c)).style("stroke",c.color),c.contextLine.style("opacity",c.initialOpacity.bind(c)),c.contextLine.exit().transition().duration(d).style("opacity",0).remove()},T.redrawLineForSubchart=function(e,d,f){(d?this.contextLine.transition(Math.random().toString()).duration(f):this.contextLine).attr("d",e).style("opacity",1)},T.updateAreaForSubchart=function(e){var d=this,f=d.d3;d.contextArea=d.context.selectAll("."+Q.areas).selectAll("."+Q.area).data(d.lineData.bind(d)),d.contextArea.enter().append("path").attr("class",d.classArea.bind(d)).style("fill",d.color).style("opacity",function(){return d.orgAreaOpacity=+f.select(this).style("opacity"),0}),d.contextArea.style("opacity",0),d.contextArea.exit().transition().duration(e).style("opacity",0).remove()},T.redrawAreaForSubchart=function(e,d,f){(d?this.contextArea.transition(Math.random().toString()).duration(f):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},T.redrawSubchart=function(z,y,x,w,v,u,t){var s,r,q,p=this,o=p.d3,n=p.config;p.context.style("visibility",n.subchart_show?"visible":"hidden"),n.subchart_show&&(o.event&&"zoom"===o.event.type&&p.brush.extent(p.x.orgDomain()).update(),z&&(p.brush.empty()||p.brush.extent(p.x.orgDomain()).update(),s=p.generateDrawArea(v,!0),r=p.generateDrawBar(u,!0),q=p.generateDrawLine(t,!0),p.updateBarForSubchart(x),p.updateLineForSubchart(x),p.updateAreaForSubchart(x),p.redrawBarForSubchart(r,x,x),p.redrawLineForSubchart(q,x,x),p.redrawAreaForSubchart(s,x,x)))},T.redrawForBrush=function(){var d=this,c=d.x;d.redraw({withTransition:!1,withY:d.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),d.config.subchart_onbrush.call(d.api,c.orgDomain())},T.transformContext=function(f,e){var h,g=this;e&&e.axisSubX?h=e.axisSubX:(h=g.context.select("."+Q.axisX),f&&(h=h.transition())),g.context.attr("transform",g.getTranslate("context")),h.attr("transform",g.getTranslate("subx"))},T.getDefaultExtent=function(){var e=this,d=e.config,f=O(d.axis_x_extent)?d.axis_x_extent(e.getXDomain(e.data.targets)):d.axis_x_extent;return e.isTimeSeries()&&(f=[e.parseDate(f[0]),e.parseDate(f[1])]),f},T.initZoom=function(){var f,e=this,h=e.d3,g=e.config;e.zoom=h.behavior.zoom().on("zoomstart",function(){f=h.event.sourceEvent,e.zoom.altDomain=h.event.sourceEvent.altKey?e.x.orgDomain():null,g.zoom_onzoomstart.call(e.api,h.event.sourceEvent)}).on("zoom",function(){e.redrawForZoom.call(e)}).on("zoomend",function(){var a=h.event.sourceEvent;a&&f.clientX===a.clientX&&f.clientY===a.clientY||(e.redrawEventRect(),e.updateZoom(),g.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.scale=function(b){return g.axis_rotated?this.y(b):this.x(b)},e.zoom.orgScaleExtent=function(){var b=g.zoom_extent?g.zoom_extent:[1,10];return[b[0],Math.max(e.getMaxDataCount()/b[1],b[1])]},e.zoom.updateScaleExtent=function(){var b=H(e.x.orgDomain())/H(e.getZoomDomain()),d=this.orgScaleExtent();return this.scaleExtent([d[0]*b,d[1]*b]),this}},T.getZoomDomain=function(){var g=this,f=g.config,j=g.d3,i=j.min([g.orgXDomain[0],f.zoom_x_min]),h=j.max([g.orgXDomain[1],f.zoom_x_max]);return[i,h]},T.updateZoom=function(){var d=this,c=d.config.zoom_enabled?d.zoom:function(){};d.main.select("."+Q.zoomRect).call(c).on("dblclick.zoom",null),d.main.selectAll("."+Q.eventRect).call(c).on("dblclick.zoom",null)},T.redrawForZoom=function(){var g=this,f=g.d3,j=g.config,i=g.zoom,h=g.x;if(j.zoom_enabled&&0!==g.filterTargetsToShow(g.data.targets).length){if("mousemove"===f.event.sourceEvent.type&&i.altDomain){return h.domain(i.altDomain),void i.scale(h).updateScaleExtent()}g.isCategorized()&&h.orgDomain()[0]===g.orgXDomain[0]&&h.domain([g.orgXDomain[0]-1e-10,h.orgDomain()[1]]),g.redraw({withTransition:!1,withY:j.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===f.event.sourceEvent.type&&(g.cancelClick=!0),j.zoom_onzoom.call(g.api,h.orgDomain())}},T.generateColor=function(){var i=this,h=i.config,n=i.d3,m=h.data_colors,l=F(h.color_pattern)?h.color_pattern:n.scale.category10().range(),k=h.data_color,j=[];return function(e){var d,f=e.id||e.data&&e.data.id||e;return m[f] instanceof Function?d=m[f](e):m[f]?d=m[f]:(j.indexOf(f)<0&&j.push(f),d=l[j.indexOf(f)%l.length],m[f]=d),k instanceof Function?k(d,e):d}},T.generateLevelColor=function(){var i=this,h=i.config,n=h.color_pattern,m=h.color_threshold,l="value"===m.unit,k=m.values&&m.values.length?m.values:[],j=m.max||100;return F(h.color_threshold)?function(e){var c,g,f=n[n.length-1];for(c=0;c<k.length;c++){if(g=l?e:100*e/j,g<k[c]){f=n[c];break}}return f}:null},T.getYFormat=function(f){var e=this,h=f&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,g=f&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(b,i,d){var c="y2"===e.axis.getId(d)?g:h;return c.call(e,b,i)}},T.yFormat=function(f){var e=this,h=e.config,g=h.axis_y_tick_format?h.axis_y_tick_format:e.defaultValueFormat;return g(f)},T.y2Format=function(f){var e=this,h=e.config,g=h.axis_y2_tick_format?h.axis_y2_tick_format:e.defaultValueFormat;return g(f)},T.defaultValueFormat=function(b){return P(b)?+b:""},T.defaultArcValueFormat=function(d,c){return(100*c).toFixed(1)+"%"},T.dataLabelFormat=function(g){var f,j=this,i=j.config.data_labels,h=function(b){return P(b)?+b:""};return f="function"==typeof i.format?i.format:"object"==typeof i.format?i.format[g]?i.format[g]===!0?h:i.format[g]:function(){return""}:h},T.hasCaches=function(d){for(var c=0;c<d.length;c++){if(!(d[c] in this.cache)){return !1}}return !0},T.addCache=function(d,c){this.cache[d]=this.cloneTarget(c)},T.getCaches=function(e){var d,f=[];for(d=0;d<e.length;d++){e[d] in this.cache&&f.push(this.cloneTarget(this.cache[e[d]]))}return f};var Q=T.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};T.generateClass=function(d,c){return" "+d+" "+d+this.getTargetSelectorSuffix(c)},T.classText=function(b){return this.generateClass(Q.text,b.index)},T.classTexts=function(b){return this.generateClass(Q.texts,b.id)},T.classShape=function(b){return this.generateClass(Q.shape,b.index)},T.classShapes=function(b){return this.generateClass(Q.shapes,b.id)},T.classLine=function(b){return this.classShape(b)+this.generateClass(Q.line,b.id)},T.classLines=function(b){return this.classShapes(b)+this.generateClass(Q.lines,b.id)},T.classCircle=function(b){return this.classShape(b)+this.generateClass(Q.circle,b.index)},T.classCircles=function(b){return this.classShapes(b)+this.generateClass(Q.circles,b.id)},T.classBar=function(b){return this.classShape(b)+this.generateClass(Q.bar,b.index)},T.classBars=function(b){return this.classShapes(b)+this.generateClass(Q.bars,b.id)},T.classArc=function(b){return this.classShape(b.data)+this.generateClass(Q.arc,b.data.id)},T.classArcs=function(b){return this.classShapes(b.data)+this.generateClass(Q.arcs,b.data.id)},T.classArea=function(b){return this.classShape(b)+this.generateClass(Q.area,b.id)},T.classAreas=function(b){return this.classShapes(b)+this.generateClass(Q.areas,b.id)},T.classRegion=function(d,c){return this.generateClass(Q.region,c)+" "+("class" in d?d["class"]:"")},T.classEvent=function(b){return this.generateClass(Q.eventRect,b.index)},T.classTarget=function(f){var e=this,h=e.config.data_classes[f],g="";return h&&(g=" "+Q.target+"-"+h),e.generateClass(Q.target,f)+g},T.classFocus=function(b){return this.classFocused(b)+this.classDefocused(b)},T.classFocused=function(b){return" "+(this.focusedTargetIds.indexOf(b.id)>=0?Q.focused:"")},T.classDefocused=function(b){return" "+(this.defocusedTargetIds.indexOf(b.id)>=0?Q.defocused:"")},T.classChartText=function(b){return Q.chartText+this.classTarget(b.id)},T.classChartLine=function(b){return Q.chartLine+this.classTarget(b.id)},T.classChartBar=function(b){return Q.chartBar+this.classTarget(b.id)},T.classChartArc=function(b){return Q.chartArc+this.classTarget(b.data.id)},T.getTargetSelectorSuffix=function(b){return b||0===b?("-"+b).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},T.selectorTarget=function(d,c){return(c||"")+"."+Q.target+this.getTargetSelectorSuffix(d)},T.selectorTargets=function(e,d){var f=this;return e=e||[],e.length?e.map(function(b){return f.selectorTarget(b,d)}):null},T.selectorLegend=function(b){return"."+Q.legendItem+this.getTargetSelectorSuffix(b)},T.selectorLegends=function(d){var c=this;return d&&d.length?d.map(function(b){return c.selectorLegend(b)}):null};var P=T.isValue=function(b){return b||0===b},O=T.isFunction=function(b){return"function"==typeof b},N=T.isString=function(b){return"string"==typeof b},M=T.isUndefined=function(b){return"undefined"==typeof b},K=T.isDefined=function(b){return"undefined"!=typeof b},J=T.ceil10=function(b){return 10*Math.ceil(b/10)},I=T.asHalfPixel=function(b){return Math.ceil(b)+0.5},H=T.diffDomain=function(b){return b[1]-b[0]},G=T.isEmpty=function(b){return"undefined"==typeof b||null===b||N(b)&&0===b.length||"object"==typeof b&&0===Object.keys(b).length},F=T.notEmpty=function(b){return !T.isEmpty(b)},E=T.getOption=function(e,d,f){return K(e[d])?e[d]:f},D=T.hasValue=function(e,d){var f=!1;return Object.keys(e).forEach(function(a){e[a]===d&&(f=!0)}),f},C=T.sanitise=function(b){return"string"==typeof b?b.replace(/</g,"&lt;").replace(/>/g,"&gt;"):b},B=T.getPathBox=function(g){var f=g.getBoundingClientRect(),j=[g.pathSegList.getItem(0),g.pathSegList.getItem(1)],i=j[0].x,h=Math.min(j[0].y,j[1].y);return{x:i,y:h,width:f.width,height:f.height}};U.focus=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e.filter(f.isTargetToShow,f))),this.revert(),this.defocus(),d.classed(Q.focused,!0).classed(Q.defocused,!1),f.hasArcType()&&f.expandArc(e),f.toggleFocusLegend(e,!0),f.focusedTargetIds=e,f.defocusedTargetIds=f.defocusedTargetIds.filter(function(a){return e.indexOf(a)<0})},U.defocus=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e.filter(f.isTargetToShow,f))),d.classed(Q.focused,!1).classed(Q.defocused,!0),f.hasArcType()&&f.unexpandArc(e),f.toggleFocusLegend(e,!1),f.focusedTargetIds=f.focusedTargetIds.filter(function(a){return e.indexOf(a)<0}),f.defocusedTargetIds=e},U.revert=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e)),d.classed(Q.focused,!1).classed(Q.defocused,!1),f.hasArcType()&&f.unexpandArc(e),f.config.legend_show&&(f.showLegend(e.filter(f.isLegendToShow.bind(f))),f.legend.selectAll(f.selectorLegends(e)).filter(function(){return f.d3.select(this).classed(Q.legendItemFocused)}).classed(Q.legendItemFocused,!1)),f.focusedTargetIds=[],f.defocusedTargetIds=[]},U.show=function(f,e){var h,g=this.internal;f=g.mapToTargetIds(f),e=e||{},g.removeHiddenTargetIds(f),h=g.svg.selectAll(g.selectorTargets(f)),h.transition().style("opacity",1,"important").call(g.endall,function(){h.style("opacity",null).style("opacity",1)}),e.withLegend&&g.showLegend(f),g.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},U.hide=function(f,e){var h,g=this.internal;f=g.mapToTargetIds(f),e=e||{},g.addHiddenTargetIds(f),h=g.svg.selectAll(g.selectorTargets(f)),h.transition().style("opacity",0,"important").call(g.endall,function(){h.style("opacity",null).style("opacity",0)}),e.withLegend&&g.hideLegend(f),g.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},U.toggle=function(f,e){var h=this,g=this.internal;g.mapToTargetIds(f).forEach(function(b){g.isTargetToShow(b)?h.hide(b,e):h.show(b,e)})},U.zoom=function(d){var c=this.internal;return d&&(c.isTimeSeries()&&(d=d.map(function(b){return c.parseDate(b)})),c.brush.extent(d),c.redraw({withUpdateXDomain:!0,withY:c.config.zoom_rescale}),c.config.zoom_onzoom.call(this,c.x.orgDomain())),c.brush.extent()},U.zoom.enable=function(d){var c=this.internal;c.config.zoom_enabled=d,c.updateAndRedraw()},U.unzoom=function(){var b=this.internal;b.brush.clear().update(),b.redraw({withUpdateXDomain:!0})},U.zoom.max=function(f){var e=this.internal,h=e.config,g=e.d3;return 0===f||f?void (h.zoom_x_max=g.max([e.orgXDomain[1],f])):h.zoom_x_max},U.zoom.min=function(f){var e=this.internal,h=e.config,g=e.d3;return 0===f||f?void (h.zoom_x_min=g.min([e.orgXDomain[0],f])):h.zoom_x_min},U.zoom.range=function(b){return arguments.length?(K(b.max)&&this.domain.max(b.max),void (K(b.min)&&this.domain.min(b.min))):{max:this.domain.max(),min:this.domain.min()}},U.load=function(e){var d=this.internal,f=d.config;return e.xs&&d.addXs(e.xs),"names" in e&&U.data.names.bind(this)(e.names),"classes" in e&&Object.keys(e.classes).forEach(function(a){f.data_classes[a]=e.classes[a]}),"categories" in e&&d.isCategorized()&&(f.axis_x_categories=e.categories),"axes" in e&&Object.keys(e.axes).forEach(function(a){f.data_axes[a]=e.axes[a]}),"colors" in e&&Object.keys(e.colors).forEach(function(a){f.data_colors[a]=e.colors[a]}),"cacheIds" in e&&d.hasCaches(e.cacheIds)?void d.load(d.getCaches(e.cacheIds),e.done):void ("unload" in e?d.unload(d.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){d.loadFromArgs(e)}):d.loadFromArgs(e))},U.unload=function(d){var c=this.internal;d=d||{},d instanceof Array?d={ids:d}:"string"==typeof d&&(d={ids:[d]}),c.unload(c.mapToTargetIds(d.ids),function(){c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),d.done&&d.done()})},U.flow=function(ac){var A,z,y,x,w,v,u,t,s=this.internal,r=[],q=s.getMaxDataCount(),p=0,m=0;if(ac.json){z=s.convertJsonToData(ac.json,ac.keys)}else{if(ac.rows){z=s.convertRowsToData(ac.rows)}else{if(!ac.columns){return}z=s.convertColumnsToData(ac.columns)}}A=s.convertDataToTargets(z,!0),s.data.targets.forEach(function(b){var h,g,f=!1;for(h=0;h<A.length;h++){if(b.id===A[h].id){for(f=!0,b.values[b.values.length-1]&&(m=b.values[b.values.length-1].index+1),p=A[h].values.length,g=0;p>g;g++){A[h].values[g].index=m+g,s.isTimeSeries()||(A[h].values[g].x=m+g)}b.values=b.values.concat(A[h].values),A.splice(h,1);break}}f||r.push(b.id)}),s.data.targets.forEach(function(e){var d,f;for(d=0;d<r.length;d++){if(e.id===r[d]){for(m=e.values[e.values.length-1].index+1,f=0;p>f;f++){e.values.push({id:e.id,index:m+f,x:s.isTimeSeries()?s.getOtherTargetX(m+f):m+f,value:null})}}}}),s.data.targets.length&&A.forEach(function(e){var d,f=[];for(d=s.data.targets[0].values[0].index;m>d;d++){f.push({id:e.id,index:d,x:s.isTimeSeries()?s.getOtherTargetX(d):d,value:null})}e.values.forEach(function(b){b.index+=m,s.isTimeSeries()||(b.x+=m)}),e.values=f.concat(e.values)}),s.data.targets=s.data.targets.concat(A),y=s.getMaxDataCount(),w=s.data.targets[0],v=w.values[0],K(ac.to)?(p=0,t=s.isTimeSeries()?s.parseDate(ac.to):ac.to,w.values.forEach(function(b){b.x<t&&p++})):K(ac.length)&&(p=ac.length),q?1===q&&s.isTimeSeries()&&(u=(w.values[w.values.length-1].x-v.x)/2,x=[new Date(+v.x-u),new Date(+v.x+u)],s.updateXDomain(null,!0,!0,!1,x)):(u=s.isTimeSeries()?w.values.length>1?w.values[w.values.length-1].x-v.x:v.x-s.getXDomain(s.data.targets)[0]:1,x=[v.x-u,v.x],s.updateXDomain(null,!0,!0,!1,x)),s.updateTargets(s.data.targets),s.redraw({flow:{index:v.index,length:p,duration:P(ac.duration)?ac.duration:s.config.transition_duration,done:ac.done,orgDataCount:q},withLegend:!0,withTransition:q>1,withTrimXDomain:!1,withUpdateXAxis:!0})},T.generateFlow=function(f){var e=this,h=e.config,g=e.d3;return function(){var aB,aA,az,ay=f.targets,ax=f.flow,aw=f.drawBar,av=f.drawLine,au=f.drawArea,at=f.cx,ar=f.cy,aq=f.xv,ao=f.xForText,am=f.yForText,ak=f.duration,ah=1,af=ax.index,ad=ax.length,t=e.getValueOnIndex(e.data.targets[0].values,af),d=e.getValueOnIndex(e.data.targets[0].values,af+ad),b=e.x.domain(),ap=ax.duration||ak,an=ax.done||function(){},al=e.generateWait(),aj=e.xgrid||g.selectAll([]),ai=e.xgridLines||g.selectAll([]),ag=e.mainRegion||g.selectAll([]),ae=e.mainText||g.selectAll([]),ac=e.mainBar||g.selectAll([]),l=e.mainLine||g.selectAll([]),c=e.mainArea||g.selectAll([]),a=e.mainCircle||g.selectAll([]);e.flowing=!0,e.data.targets.forEach(function(i){i.values.splice(0,ad)}),az=e.updateXDomain(ay,!0,!0),e.updateXGrid&&e.updateXGrid(!0),ax.orgDataCount?aB=1===ax.orgDataCount||(t&&t.x)===(d&&d.x)?e.x(b[0])-e.x(az[0]):e.isTimeSeries()?e.x(b[0])-e.x(az[0]):e.x(t.x)-e.x(d.x):1!==e.data.targets[0].values.length?aB=e.x(b[0])-e.x(az[0]):e.isTimeSeries()?(t=e.getValueOnIndex(e.data.targets[0].values,0),d=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),aB=e.x(t.x)-e.x(d.x)):aB=H(az)/2,ah=H(b)/H(az),aA="translate("+aB+",0) scale("+ah+",1)",e.hideXGridFocus(),g.transition().ease("linear").duration(ap).each(function(){al.add(e.axes.x.transition().call(e.xAxis)),al.add(ac.transition().attr("transform",aA)),al.add(l.transition().attr("transform",aA)),al.add(c.transition().attr("transform",aA)),al.add(a.transition().attr("transform",aA)),al.add(ae.transition().attr("transform",aA)),al.add(ag.filter(e.isRegionOnX).transition().attr("transform",aA)),al.add(aj.transition().attr("transform",aA)),al.add(ai.transition().attr("transform",aA))}).call(al,function(){var i,m=[],k=[],j=[];if(ad){for(i=0;ad>i;i++){m.push("."+Q.shape+"-"+(af+i)),k.push("."+Q.text+"-"+(af+i)),j.push("."+Q.eventRect+"-"+(af+i))}e.svg.selectAll("."+Q.shapes).selectAll(m).remove(),e.svg.selectAll("."+Q.texts).selectAll(k).remove(),e.svg.selectAll("."+Q.eventRects).selectAll(j).remove(),e.svg.select("."+Q.xgrid).remove()}aj.attr("transform",null).attr(e.xgridAttr),ai.attr("transform",null),ai.select("line").attr("x1",h.axis_rotated?0:aq).attr("x2",h.axis_rotated?e.width:aq),ai.select("text").attr("x",h.axis_rotated?e.width:0).attr("y",aq),ac.attr("transform",null).attr("d",aw),l.attr("transform",null).attr("d",av),c.attr("transform",null).attr("d",au),a.attr("transform",null).attr("cx",at).attr("cy",ar),ae.attr("transform",null).attr("x",ao).attr("y",am).style("fill-opacity",e.opacityForText.bind(e)),ag.attr("transform",null),ag.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),h.interaction_enabled&&e.redrawEventRect(),an(),e.flowing=!1})}},U.selected=function(e){var d=this.internal,f=d.d3;return f.merge(d.main.selectAll("."+Q.shapes+d.getTargetSelectorSuffix(e)).selectAll("."+Q.shape).filter(function(){return f.select(this).classed(Q.SELECTED)}).map(function(b){return b.map(function(g){var c=g.__data__;return c.data?c.data:c})}))},U.select=function(h,g,l){var k=this.internal,j=k.d3,i=k.config;i.data_selection_enabled&&k.main.selectAll("."+Q.shapes).selectAll("."+Q.shape).each(function(f,e){var d=j.select(this),c=f.data?f.data.id:f.id,b=k.getToggle(this,f).bind(k),a=i.data_selection_grouped||!h||h.indexOf(c)>=0,q=!g||g.indexOf(e)>=0,p=d.classed(Q.SELECTED);d.classed(Q.line)||d.classed(Q.area)||(a&&q?i.data_selection_isselectable(f)&&!p&&b(!0,d.classed(Q.SELECTED,!0),f,e):K(l)&&l&&p&&b(!1,d.classed(Q.SELECTED,!1),f,e))})},U.unselect=function(g,f){var j=this.internal,i=j.d3,h=j.config;h.data_selection_enabled&&j.main.selectAll("."+Q.shapes).selectAll("."+Q.shape).each(function(o,l){var e=i.select(this),d=o.data?o.data.id:o.id,c=j.getToggle(this,o).bind(j),b=h.data_selection_grouped||!g||g.indexOf(d)>=0,a=!f||f.indexOf(l)>=0,p=e.classed(Q.SELECTED);e.classed(Q.line)||e.classed(Q.area)||b&&a&&h.data_selection_isselectable(o)&&p&&c(!1,e.classed(Q.SELECTED,!1),o,l)})},U.transform=function(f,e){var h=this.internal,g=["pie","donut"].indexOf(f)>=0?{withTransform:!0}:null;h.transformTo(e,f,g)},T.transformTo=function(h,g,l){var k=this,j=!k.hasArcType(),i=l||{withTransitionForAxis:j};i.withTransitionForTransform=!1,k.transiting=!1,k.setTargetType(h,g),k.updateTargets(k.data.targets),k.updateAndRedraw(i)},U.groups=function(e){var d=this.internal,f=d.config;return M(e)?f.data_groups:(f.data_groups=e,d.redraw(),f.data_groups)},U.xgrids=function(e){var d=this.internal,f=d.config;return e?(f.grid_x_lines=e,d.redrawWithoutRescale(),f.grid_x_lines):f.grid_x_lines},U.xgrids.add=function(d){var c=this.internal;return this.xgrids(c.config.grid_x_lines.concat(d?d:[]))},U.xgrids.remove=function(d){var c=this.internal;c.removeGridLines(d,!0)},U.ygrids=function(e){var d=this.internal,f=d.config;return e?(f.grid_y_lines=e,d.redrawWithoutRescale(),f.grid_y_lines):f.grid_y_lines},U.ygrids.add=function(d){var c=this.internal;return this.ygrids(c.config.grid_y_lines.concat(d?d:[]))},U.ygrids.remove=function(d){var c=this.internal;c.removeGridLines(d,!1)},U.regions=function(e){var d=this.internal,f=d.config;return e?(f.regions=e,d.redrawWithoutRescale(),f.regions):f.regions},U.regions.add=function(e){var d=this.internal,f=d.config;return e?(f.regions=f.regions.concat(e),d.redrawWithoutRescale(),f.regions):f.regions},U.regions.remove=function(h){var g,l,k,j=this.internal,i=j.config;return h=h||{},g=j.getOption(h,"duration",i.transition_duration),l=j.getOption(h,"classes",[Q.region]),k=j.main.select("."+Q.regions).selectAll(l.map(function(b){return"."+b})),(g?k.transition().duration(g):k).style("opacity",0).remove(),i.regions=i.regions.filter(function(d){var c=!1;return d["class"]?(d["class"].split(" ").forEach(function(b){l.indexOf(b)>=0&&(c=!0)}),!c):!0}),i.regions},U.data=function(d){var c=this.internal.data.targets;return"undefined"==typeof d?c:c.filter(function(a){return[].concat(d).indexOf(a.id)>=0})},U.data.shown=function(b){return this.internal.filterTargetsToShow(this.data(b))},U.data.values=function(e){var d,f=null;return e&&(d=this.data(e),f=d[0]?d[0].values.map(function(b){return b.value}):null),f},U.data.names=function(b){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",b)},U.data.colors=function(b){return this.internal.updateDataAttributes("colors",b)},U.data.axes=function(b){return this.internal.updateDataAttributes("axes",b)},U.category=function(f,e){var h=this.internal,g=h.config;return arguments.length>1&&(g.axis_x_categories[f]=e,h.redraw()),g.axis_x_categories[f]},U.categories=function(e){var d=this.internal,f=d.config;return arguments.length?(f.axis_x_categories=e,d.redraw(),f.axis_x_categories):f.axis_x_categories},U.color=function(d){var c=this.internal;return c.color(d)},U.x=function(d){var c=this.internal;return arguments.length&&(c.updateTargetX(c.data.targets,d),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),c.data.xs},U.xs=function(d){var c=this.internal;return arguments.length&&(c.updateTargetXs(c.data.targets,d),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),c.data.xs},U.axis=function(){},U.axis.labels=function(d){var c=this.internal;arguments.length&&(Object.keys(d).forEach(function(a){c.axis.setLabelText(a,d[a])}),c.axis.updateLabels())},U.axis.max=function(e){var d=this.internal,f=d.config;return arguments.length?("object"==typeof e?(P(e.x)&&(f.axis_x_max=e.x),P(e.y)&&(f.axis_y_max=e.y),P(e.y2)&&(f.axis_y2_max=e.y2)):f.axis_y_max=f.axis_y2_max=e,void d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:f.axis_x_max,y:f.axis_y_max,y2:f.axis_y2_max}},U.axis.min=function(e){var d=this.internal,f=d.config;return arguments.length?("object"==typeof e?(P(e.x)&&(f.axis_x_min=e.x),P(e.y)&&(f.axis_y_min=e.y),P(e.y2)&&(f.axis_y2_min=e.y2)):f.axis_y_min=f.axis_y2_min=e,void d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:f.axis_x_min,y:f.axis_y_min,y2:f.axis_y2_min}},U.axis.range=function(b){return arguments.length?(K(b.max)&&this.axis.max(b.max),void (K(b.min)&&this.axis.min(b.min))):{max:this.axis.max(),min:this.axis.min()}},U.legend=function(){},U.legend.show=function(d){var c=this.internal;c.showLegend(c.mapToTargetIds(d)),c.updateAndRedraw({withLegend:!0})},U.legend.hide=function(d){var c=this.internal;c.hideLegend(c.mapToTargetIds(d)),c.updateAndRedraw({withLegend:!0})},U.resize=function(e){var d=this.internal,f=d.config;f.size_width=e?e.width:null,f.size_height=e?e.height:null,this.flush()},U.flush=function(){var b=this.internal;b.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},U.destroy=function(){var a=this.internal;if(ab.clearInterval(a.intervalForObserveInserted),void 0!==a.resizeTimeout&&ab.clearTimeout(a.resizeTimeout),ab.detachEvent){ab.detachEvent("onresize",a.resizeFunction)}else{if(ab.removeEventListener){ab.removeEventListener("resize",a.resizeFunction)}else{var d=ab.onresize;d&&d.add&&d.remove&&d.remove(a.resizeFunction)}}return a.selectChart.classed("c3",!1).html(""),Object.keys(a).forEach(function(b){a[b]=null}),null},U.tooltip=function(){},U.tooltip.show=function(f){var e,h,g=this.internal;f.mouse&&(h=f.mouse),f.data?g.isMultipleX()?(h=[g.x(f.data.x),g.getYScale(f.data.id)(f.data.value)],e=null):e=P(f.data.index)?f.data.index:g.getIndexByX(f.data.x):"undefined"!=typeof f.x?e=g.getIndexByX(f.x):"undefined"!=typeof f.index&&(e=f.index),g.dispatchEvent("mouseover",e,h),g.dispatchEvent("mousemove",e,h),g.config.tooltip_onshow.call(g,f.data)},U.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var L;T.isSafari=function(){var a=ab.navigator.userAgent;return a.indexOf("Safari")>=0&&a.indexOf("Chrome")<0},T.isChrome=function(){var a=ab.navigator.userAgent;return a.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(g){if("function"!=typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var f=Array.prototype.slice.call(arguments,1),j=this,i=function(){},h=function(){return j.apply(this instanceof i?this:g,f.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,h.prototype=new i,h}),function(){"SVGPathSeg" in ab||(ab.SVGPathSeg=function(e,d,f){this.pathSegType=e,this.pathSegTypeAsLetter=d,this._owningPathSegList=f},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},ab.SVGPathSegClosePath=function(b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",b)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},ab.SVGPathSegMovetoAbs=function(e,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",e),this._x=d,this._y=f},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegMovetoRel=function(e,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",e),this._x=d,this._y=f},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegLinetoAbs=function(e,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",e),this._x=d,this._y=f},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegLinetoRel=function(e,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",e),this._x=d,this._y=f},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegCurvetoCubicAbs=function(i,h,n,m,l,k,j){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",i),this._x=h,this._y=n,this._x1=m,this._y1=l,this._x2=k,this._y2=j},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(b){this._x1=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(b){this._y1=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(b){this._x2=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(b){this._y2=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegCurvetoCubicRel=function(i,h,n,m,l,k,j){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",i),this._x=h,this._y=n,this._x1=m,this._y1=l,this._x2=k,this._y2=j},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(b){this._x1=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(b){this._y1=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(b){this._x2=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(b){this._y2=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegCurvetoQuadraticAbs=function(g,f,j,i,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",g),this._x=f,this._y=j,this._x1=i,this._y1=h},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(b){this._x1=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(b){this._y1=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegCurvetoQuadraticRel=function(g,f,j,i,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",g),this._x=f,this._y=j,this._x1=i,this._y1=h},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(b){this._x1=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(b){this._y1=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegArcAbs=function(j,i,p,o,n,m,l,k){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",j),this._x=i,this._y=p,this._r1=o,this._r2=n,this._angle=m,this._largeArcFlag=l,this._sweepFlag=k},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(b){this._r1=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(b){this._r2=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(b){this._angle=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(b){this._largeArcFlag=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(b){this._sweepFlag=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegArcRel=function(j,i,p,o,n,m,l,k){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",j),this._x=i,this._y=p,this._r1=o,this._r2=n,this._angle=m,this._largeArcFlag=l,this._sweepFlag=k},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(b){this._r1=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(b){this._r2=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(b){this._angle=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(b){this._largeArcFlag=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(b){this._sweepFlag=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegLinetoHorizontalAbs=function(d,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",d),this._x=c},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegLinetoHorizontalRel=function(d,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",d),this._x=c},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegLinetoVerticalAbs=function(d,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",d),this._y=c},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegLinetoVerticalRel=function(d,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",d),this._y=c},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegCurvetoCubicSmoothAbs=function(g,f,j,i,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",g),this._x=f,this._y=j,this._x2=i,this._y2=h},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(b){this._x2=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(b){this._y2=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegCurvetoCubicSmoothRel=function(g,f,j,i,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",g),this._x=f,this._y=j,this._x2=i,this._y2=h},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(b){this._x2=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(b){this._y2=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegCurvetoQuadraticSmoothAbs=function(e,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",e),this._x=d,this._y=f},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),ab.SVGPathSegCurvetoQuadraticSmoothRel=function(e,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",e),this._x=d,this._y=f},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(b){this._x=b,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(b){this._y=b,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(d,c){return new SVGPathSegMovetoAbs(void 0,d,c)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(d,c){return new SVGPathSegMovetoRel(void 0,d,c)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(d,c){return new SVGPathSegLinetoAbs(void 0,d,c)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(d,c){return new SVGPathSegLinetoRel(void 0,d,c)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(h,g,l,k,j,i){return new SVGPathSegCurvetoCubicAbs(void 0,h,g,l,k,j,i)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(h,g,l,k,j,i){return new SVGPathSegCurvetoCubicRel(void 0,h,g,l,k,j,i)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(f,e,h,g){return new SVGPathSegCurvetoQuadraticAbs(void 0,f,e,h,g)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(f,e,h,g){return new SVGPathSegCurvetoQuadraticRel(void 0,f,e,h,g)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(i,h,n,m,l,k,j){return new SVGPathSegArcAbs(void 0,i,h,n,m,l,k,j)},SVGPathElement.prototype.createSVGPathSegArcRel=function(i,h,n,m,l,k,j){return new SVGPathSegArcRel(void 0,i,h,n,m,l,k,j)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(b){return new SVGPathSegLinetoHorizontalAbs(void 0,b)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(b){return new SVGPathSegLinetoHorizontalRel(void 0,b)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(b){return new SVGPathSegLinetoVerticalAbs(void 0,b)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(b){return new SVGPathSegLinetoVerticalRel(void 0,b)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(f,e,h,g){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,f,e,h,g)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(f,e,h,g){return new SVGPathSegCurvetoCubicSmoothRel(void 0,f,e,h,g)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(d,c){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,d,c)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(d,c){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,d,c)}),"SVGPathSegList" in ab||(ab.SVGPathSegList=function(b){this._pathElement=b,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(d){if(this._pathElement){var c=!1;d.forEach(function(b){"d"==b.attributeName&&(c=!0)}),c&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(b){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(b){b._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(b){return this._checkPathSynchronizedToList(),this._list=[b],b._owningPathSegList=this,this._writeListToPath(),b},SVGPathSegList.prototype._checkValidIndex=function(b){if(isNaN(b)||0>b||b>=this.numberOfItems){throw"INDEX_SIZE_ERR"}},SVGPathSegList.prototype.getItem=function(b){return this._checkPathSynchronizedToList(),this._checkValidIndex(b),this._list[b]},SVGPathSegList.prototype.insertItemBefore=function(d,c){return this._checkPathSynchronizedToList(),c>this.numberOfItems&&(c=this.numberOfItems),d._owningPathSegList&&(d=d.clone()),this._list.splice(c,0,d),d._owningPathSegList=this,this._writeListToPath(),d},SVGPathSegList.prototype.replaceItem=function(d,c){return this._checkPathSynchronizedToList(),d._owningPathSegList&&(d=d.clone()),this._checkValidIndex(c),this._list[c]=d,d._owningPathSegList=this,this._writeListToPath(),d},SVGPathSegList.prototype.removeItem=function(d){this._checkPathSynchronizedToList(),this._checkValidIndex(d);var c=this._list[d];return this._list.splice(d,1),this._writeListToPath(),c},SVGPathSegList.prototype.appendItem=function(b){return this._checkPathSynchronizedToList(),b._owningPathSegList&&(b=b.clone()),this._list.push(b),b._owningPathSegList=this,this._writeListToPath(),b},SVGPathSegList._pathSegArrayAsString=function(e){var d="",f=!0;return e.forEach(function(b){f?(f=!1,d+=b._asPathString()):d+=" "+b._asPathString()}),d},SVGPathSegList.prototype._parsePath=function(i){if(!i||0==i.length){return[]}var h=this,n=function(){this.pathSegList=[]};n.prototype.appendSegment=function(b){this.pathSegList.push(b)};var m=function(b){this._string=b,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};m.prototype._isCurrentSpace=function(){var b=this._string[this._currentIndex];return" ">=b&&(" "==b||"\n"==b||"	"==b||"\r"==b||"\f"==b)},m.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();){this._currentIndex++}return this._currentIndex<this._endIndex},m.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex)?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},m.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},m.prototype.peekSegmentType=function(){var b=this._string[this._currentIndex];return this._pathSegTypeFromChar(b)},m.prototype._pathSegTypeFromChar=function(b){switch(b){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},m.prototype._nextCommandHelper=function(d,c){return("+"==d||"-"==d||"."==d||d>="0"&&"9">=d)&&c!=SVGPathSeg.PATHSEG_CLOSEPATH?c==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:c==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:c:SVGPathSeg.PATHSEG_UNKNOWN},m.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData()){return !0}var b=this.peekSegmentType();return b==SVGPathSeg.PATHSEG_MOVETO_ABS||b==SVGPathSeg.PATHSEG_MOVETO_REL},m.prototype._parseNumber=function(){var y=0,x=0,w=1,v=0,u=1,t=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,u=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var r=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";){this._currentIndex++}if(this._currentIndex!=r){for(var q=this._currentIndex-1,p=1;q>=r;){x+=p*(this._string.charAt(q--)-"0"),p*=10}}if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9"){return}for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";){v+=(this._string.charAt(this._currentIndex++)-"0")*(w*=0.1)}}if(this._currentIndex!=s&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,t=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9"){return}for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";){y*=10,y+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}}var o=x+v;if(o*=u,y&&(o*=Math.pow(10,t*y)),s!=this._currentIndex){return this._skipOptionalSpacesOrDelimiter(),o}}},m.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var d=!1,c=this._string.charAt(this._currentIndex++);if("0"==c){d=!1}else{if("1"!=c){return}d=!0}return this._skipOptionalSpacesOrDelimiter(),d}},m.prototype.parseSegment=function(){var b=this._string[this._currentIndex],f=this._pathSegTypeFromChar(b);if(f==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN){return null}if(f=this._nextCommandHelper(b,this._previousCommand),f==SVGPathSeg.PATHSEG_UNKNOWN){return null}}else{this._currentIndex++}switch(this._previousCommand=f,f){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(h,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(h,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(h,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(h,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(h,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(h,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(h,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(h,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(h);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var e={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(h,e.x,e.y,e.x1,e.y1,e.x2,e.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var e={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(h,e.x,e.y,e.x1,e.y1,e.x2,e.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var e={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(h,e.x,e.y,e.x2,e.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var e={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(h,e.x,e.y,e.x2,e.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var e={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(h,e.x,e.y,e.x1,e.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var e={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(h,e.x,e.y,e.x1,e.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(h,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(h,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var e={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(h,e.x,e.y,e.x1,e.y1,e.arcAngle,e.arcLarge,e.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:var e={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(h,e.x,e.y,e.x1,e.y1,e.arcAngle,e.arcLarge,e.arcSweep);default:throw"Unknown path seg type."}};var l=new n,k=new m(i);if(!k.initialCommandIsMoveTo()){return[]}for(;k.hasMoreData();){var j=k.parseSegment();if(!j){return[]}l.appendSegment(j)}return l.pathSegList})}(),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return R}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=R:ab.c3=R}(window);
(function(e,d,f){(function(b){typeof define=="function"&&define.amd?define(["jquery"],b):jQuery&&!jQuery.fn.sparkline&&b(jQuery)})(function(ar){var aq={},ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ad,ab,Z,X,V,T,R,P,N,c,ae,ac,aa,Y,W,U,S,Q,O,M,b,a=0;ap=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:f,normalRangeMax:f,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:f,chartRangeMax:f,chartRangeMinX:f,chartRangeMaxX:f,tooltipFormat:new an('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:f,nullColor:f,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:f,chartRangeMin:f,chartRangeClip:!1,colorMap:f,tooltipFormat:new an('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new an('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:f,thresholdValue:0,chartRangeMax:f,chartRangeMin:f,chartRangeClip:!1,tooltipFormat:new an("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:f,tooltipFormat:new an("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new an('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:f,targetColor:"#4a2",chartRangeMax:f,chartRangeMin:f,tooltipFormat:new an("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},W='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',ao=function(){var h,g;return h=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(h.prototype=ar.extend(new arguments[0],arguments[arguments.length-1]),h._super=arguments[0].prototype):h.prototype=arguments[arguments.length-1],arguments.length>2&&(g=Array.prototype.slice.call(arguments,1,-1),g.unshift(h.prototype),ar.extend.apply(ar,g))):h.prototype=arguments[0],h.prototype.cls=h,h},ar.SPFormatClass=an=ao({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(h,g){this.format=h,this.fclass=g},render:function(u,t,s){var r=this,q=u,p,o,n,m,l;return this.format.replace(this.fre,function(){var g;return o=arguments[1],n=arguments[3],p=r.precre.exec(o),p?(l=p[2],o=p[1]):l=!1,m=q[o],m===f?"":n&&t&&t[n]?(g=t[n],g.get?t[n].get(m)||m:t[n][m]||m):(ah(m)&&(s.get("numberFormatter")?m=s.get("numberFormatter")(m):m=Z(m,l,s.get("numberDigitGroupCount"),s.get("numberDigitGroupSep"),s.get("numberDecimalMark"))),m)})}}),ar.spformat=function(h,g){return new an(h,g)},am=function(h,g,i){return h<g?g:h>i?i:h},al=function(g,i){var h;return i===2?(h=d.floor(g.length/2),g.length%2?g[h]:(g[h-1]+g[h])/2):g.length%2?(h=(g.length*i+i)/4,h%1?(g[d.floor(h)]+g[d.floor(h)-1])/2:g[h-1]):(h=(g.length*i+2)/4,h%1?(g[d.floor(h)]+g[d.floor(h)-1])/2:g[h-1])},ak=function(h){var g;switch(h){case"undefined":h=f;break;case"null":h=null;break;case"true":h=!0;break;case"false":h=!1;break;default:g=parseFloat(h),h==g&&(h=g)}return h},aj=function(h){var g,i=[];for(g=h.length;g--;){i[g]=ak(h[g])}return i},ai=function(h,g){var k,j,i=[];for(k=0,j=h.length;k<j;k++){h[k]!==g&&i.push(h[k])}return i},ah=function(g){return !isNaN(parseFloat(g))&&isFinite(g)},Z=function(j,i,o,n,m){var l,k;j=(i===!1?parseFloat(j).toString():j.toFixed(i)).split(""),l=(l=ar.inArray(".",j))<0?j.length:l,l<j.length&&(j[l]=m);for(k=l-o;k>0;k-=o){j.splice(k,0,n)}return j.join("")},ag=function(h,g,j){var i;for(i=g.length;i--;){if(j&&g[i]===null){continue}if(g[i]!==h){return !1}}return !0},af=function(h){var g=0,i;for(i=h.length;i--;){g+=typeof h[i]=="number"?h[i]:0}return g},ab=function(g){return ar.isArray(g)?g:[g]},ad=function(g){var h;e.createStyleSheet?e.createStyleSheet().cssText=g:(h=e.createElement("style"),h.type="text/css",e.getElementsByTagName("head")[0].appendChild(h),h[typeof e.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=g)},ar.fn.simpledraw=function(k,q,p,o){var n,m;if(p&&(n=this.data("_jqs_vcanvas"))){return n}if(ar.fn.sparkline.canvas===!1){return !1}if(ar.fn.sparkline.canvas===f){var l=e.createElement("canvas");if(!l.getContext||!l.getContext("2d")){if(!e.namespaces||!!e.namespaces.v){return ar.fn.sparkline.canvas=!1,!1}e.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),ar.fn.sparkline.canvas=function(h,g,j,i){return new M(h,g,j)}}else{ar.fn.sparkline.canvas=function(h,g,j,i){return new O(h,g,j,i)}}}return k===f&&(k=ar(this).innerWidth()),q===f&&(q=ar(this).innerHeight()),n=ar.fn.sparkline.canvas(k,q,this,o),m=ar(this).data("_jqs_mhandler"),m&&m.registerCanvas(n),n},ar.fn.cleardraw=function(){var g=this.data("_jqs_vcanvas");g&&g.reset()},ar.RangeMapClass=X=ao({init:function(h){var g,j,i=[];for(g in h){h.hasOwnProperty(g)&&typeof g=="string"&&g.indexOf(":")>-1&&(j=g.split(":"),j[0]=j[0].length===0?-Infinity:parseFloat(j[0]),j[1]=j[1].length===0?Infinity:parseFloat(j[1]),j[2]=h[g],i.push(j))}this.map=h,this.rangelist=i||!1},get:function(h){var g=this.rangelist,k,j,i;if((i=this.map[h])!==f){return i}if(g){for(k=g.length;k--;){j=g[k];if(j[0]<=h&&j[1]>=h){return j[2]}}}return f}}),ar.range_map=function(g){return new X(g)},V=ao({init:function(h,g){var i=ar(h);this.$el=i,this.options=g,this.currentPageX=0,this.currentPageY=0,this.el=h,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!g.get("disableTooltips"),this.highlightEnabled=!g.get("disableHighlight")},registerSparkline:function(g){this.splist.push(g),this.over&&this.updateDisplay()},registerCanvas:function(h){var g=ar(h.canvas);this.canvas=h,this.$canvas=g,g.mouseenter(ar.proxy(this.mouseenter,this)),g.mouseleave(ar.proxy(this.mouseleave,this)),g.click(ar.proxy(this.mouseclick,this))},reset:function(g){this.splist=[],this.tooltip&&g&&(this.tooltip.remove(),this.tooltip=f)},mouseclick:function(h){var g=ar.Event("sparklineClick");g.originalEvent=h,g.sparklines=this.splist,this.$el.trigger(g)},mouseenter:function(g){ar(e.body).unbind("mousemove.jqs"),ar(e.body).bind("mousemove.jqs",ar.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=g.pageX,this.currentPageY=g.pageY,this.currentEl=g.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new T(this.options),this.tooltip.updatePosition(g.pageX,g.pageY)),this.updateDisplay()},mouseleave:function(){ar(e.body).unbind("mousemove.jqs");var h=this.splist,l=h.length,k=!1,j,i;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(i=0;i<l;i++){j=h[i],j.clearRegionHighlight()&&(k=!0)}k&&this.canvas.render()},mousemove:function(g){this.currentPageX=g.pageX,this.currentPageY=g.pageY,this.currentEl=g.target,this.tooltip&&this.tooltip.updatePosition(g.pageX,g.pageY),this.updateDisplay()},updateDisplay:function(){var w=this.splist,v=w.length,u=!1,t=this.$canvas.offset(),s=this.currentPageX-t.left,r=this.currentPageY-t.top,q,p,o,n,m;if(!this.over){return}for(o=0;o<v;o++){p=w[o],n=p.setRegionHighlight(this.currentEl,s,r),n&&(u=!0)}if(u){m=ar.Event("sparklineRegionChange"),m.sparklines=this.splist,this.$el.trigger(m);if(this.tooltip){q="";for(o=0;o<v;o++){p=w[o],q+=p.getCurrentRegionTooltip()}this.tooltip.setContent(q)}this.disableHighlight||this.canvas.render()}n===null&&this.mouseleave()}}),T=ao({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(g){var j=g.get("tooltipClassname","jqstooltip"),i=this.sizeStyle,h;this.container=g.get("tooltipContainer")||e.body,this.tooltipOffsetX=g.get("tooltipOffsetX",10),this.tooltipOffsetY=g.get("tooltipOffsetY",12),ar("#jqssizetip").remove(),ar("#jqstooltip").remove(),this.sizetip=ar("<div/>",{id:"jqssizetip",style:i,"class":j}),this.tooltip=ar("<div/>",{id:"jqstooltip","class":j}).appendTo(this.container),h=this.tooltip.offset(),this.offsetLeft=h.left,this.offsetTop=h.top,this.hidden=!0,ar(window).unbind("resize.jqs scroll.jqs"),ar(window).bind("resize.jqs scroll.jqs",ar.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=ar(window).scrollTop(),this.scrollLeft=ar(window).scrollLeft(),this.scrollRight=this.scrollLeft+ar(window).width(),this.updatePosition()},getSize:function(g){this.sizetip.html(g).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(g){if(!g){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(g),this.tooltip.html(g).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(h,g){if(h===f){if(this.mousex===f){return}h=this.mousex-this.offsetLeft,g=this.mousey-this.offsetTop}else{this.mousex=h-=this.offsetLeft,this.mousey=g-=this.offsetTop}if(!this.height||!this.width||this.hidden){return}g-=this.height+this.tooltipOffsetY,h+=this.tooltipOffsetX,g<this.scrollTop&&(g=this.scrollTop),h<this.scrollLeft?h=this.scrollLeft:h+this.width>this.scrollRight&&(h=this.scrollRight-this.width),this.tooltip.css({left:h,top:g})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=f,ar(window).unbind("resize.jqs scroll.jqs")}}),U=function(){ad(W)},ar(U),b=[],ar.fn.sparkline=function(g,h){return this.each(function(){var m=new ar.fn.sparkline.options(this,h),l=ar(this),k,j;k=function(){var t,s,r,q,p,o,n;if(g==="html"||g===f){n=this.getAttribute(m.get("tagValuesAttribute"));if(n===f||n===null){n=l.html()}t=n.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else{t=g}s=m.get("width")==="auto"?t.length*m.get("defaultPixelsPerValue"):m.get("width");if(m.get("height")==="auto"){if(!m.get("composite")||!ar.data(this,"_jqs_vcanvas")){q=e.createElement("span"),q.innerHTML="a",l.html(q),r=ar(q).innerHeight()||ar(q).height(),ar(q).remove(),q=null}}else{r=m.get("height")}m.get("disableInteraction")?p=!1:(p=ar.data(this,"_jqs_mhandler"),p?m.get("composite")||p.reset():(p=new V(this,m),ar.data(this,"_jqs_mhandler",p)));if(m.get("composite")&&!ar.data(this,"_jqs_vcanvas")){ar.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),ar.data(this,"_jqs_errnotify",!0));return}o=new (ar.fn.sparkline[m.get("type")])(this,t,m,s,r),o.render(),p&&p.registerSparkline(o)};if(ar(this).html()&&!m.get("disableHiddenCheck")&&ar(this).is(":hidden")||!ar(this).parents("body").length){if(!m.get("composite")&&ar.data(this,"_jqs_pending")){for(j=b.length;j;j--){b[j-1][0]==this&&b.splice(j-1,1)}}b.push([this,k]),ar.data(this,"_jqs_pending",!0)}else{k.call(this)}})},ar.fn.sparkline.defaults=ap(),ar.sparkline_display_visible=function(){var h,g,j,i=[];for(g=0,j=b.length;g<j;g++){h=b[g][0],ar(h).is(":visible")&&!ar(h).parents().is(":hidden")?(b[g][1].call(h),ar.data(b[g][0],"_jqs_pending",!1),i.push(g)):!ar(h).closest("html").length&&!ar.data(h,"_jqs_pending")&&(ar.data(b[g][0],"_jqs_pending",!1),i.push(g))}for(g=i.length;g;g--){b.splice(i[g-1],1)}},ar.fn.sparkline.options=ao({init:function(j,i){var n,m,l,k;this.userOptions=i=i||{},this.tag=j,this.tagValCache={},m=ar.fn.sparkline.defaults,l=m.common,this.tagOptionsPrefix=i.enableTagOptions&&(i.tagOptionsPrefix||l.tagOptionsPrefix),k=this.getTagSetting("type"),k===aq?n=m[i.type||l.type]:n=m[k],this.mergedOptions=ar.extend({},l,n,i)},getTagSetting:function(j){var i=this.tagOptionsPrefix,n,m,l,k;if(i===!1||i===f){return aq}if(this.tagValCache.hasOwnProperty(j)){n=this.tagValCache.key}else{n=this.tag.getAttribute(i+j);if(n===f||n===null){n=aq}else{if(n.substr(0,1)==="["){n=n.substr(1,n.length-2).split(",");for(m=n.length;m--;){n[m]=ak(n[m].replace(/(^\s*)|(\s*$)/g,""))}}else{if(n.substr(0,1)==="{"){l=n.substr(1,n.length-2).split(","),n={};for(m=l.length;m--;){k=l[m].split(":",2),n[k[0].replace(/(^\s*)|(\s*$)/g,"")]=ak(k[1].replace(/(^\s*)|(\s*$)/g,""))}}else{n=ak(n)}}}this.tagValCache.key=n}return n},get:function(h,g){var j=this.getTagSetting(h),i;return j!==aq?j:(i=this.mergedOptions[h])===f?g:i}}),ar.fn.sparkline._base=ao({disabled:!1,init:function(i,h,l,k,j){this.el=i,this.$el=ar(i),this.values=h,this.options=l,this.width=k,this.height=j,this.currentRegion=f},initTarget:function(){var g=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),g))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(h,g){},setRegionHighlight:function(i,h,m){var l=this.currentRegion,k=!this.options.get("disableHighlight"),j;return h>this.canvasWidth||m>this.canvasHeight||h<0||m<0?null:(j=this.getRegion(i,h,m),l!==j?(l!==f&&k&&this.removeHighlight(),this.currentRegion=j,j!==f&&k&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==f?(this.removeHighlight(),this.currentRegion=f,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(g){},getCurrentRegionTooltip:function(){var H=this.options,G="",F=[],E,D,C,B,A,z,y,x,w,v,u,h,J,I;if(this.currentRegion===f){return""}E=this.getCurrentRegionFields(),u=H.get("tooltipFormatter");if(u){return u(this,H,E)}H.get("tooltipChartTitle")&&(G+='<div class="jqs jqstitle">'+H.get("tooltipChartTitle")+"</div>\n"),D=this.options.get("tooltipFormat");if(!D){return""}ar.isArray(D)||(D=[D]),ar.isArray(E)||(E=[E]),y=this.options.get("tooltipFormatFieldlist"),x=this.options.get("tooltipFormatFieldlistKey");if(y&&x){w=[];for(z=E.length;z--;){v=E[z][x],(I=ar.inArray(v,y))!=-1&&(w[I]=E[z])}E=w}C=D.length,J=E.length;for(z=0;z<C;z++){h=D[z],typeof h=="string"&&(h=new an(h)),B=h.fclass||"jqsfield";for(I=0;I<J;I++){if(!E[I].isNull||!H.get("tooltipSkipNull")){ar.extend(E[I],{prefix:H.get("tooltipPrefix"),suffix:H.get("tooltipSuffix")}),A=h.render(E[I],H.get("tooltipValueLookups"),H),F.push('<div class="'+B+'">'+A+"</div>")}}}return F.length?G+F.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(i,q){var p=q.get("highlightColor"),o=q.get("highlightLighten"),n,m,l,k;if(p){return p}if(o){n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(i)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(i);if(n){l=[],m=i.length===4?16:1;for(k=0;k<3;k++){l[k]=am(d.round(parseInt(n[k+1],16)*m*o),0,255)}return"rgb("+l.join(",")+")"}}return i}}),R={changeHighlight:function(h){var g=this.currentRegion,k=this.target,j=this.regionShapes[g],i;j&&(i=this.renderRegion(g,h),ar.isArray(i)||ar.isArray(j)?(k.replaceWithShapes(j,i),this.regionShapes[g]=ar.map(i,function(l){return l.id})):(k.replaceWithShape(j,i),this.regionShapes[g]=i.id))},render:function(){var j=this.values,i=this.target,o=this.regionShapes,n,m,l,k;if(!this.cls._super.render.call(this)){return}for(l=j.length;l--;){n=this.renderRegion(l);if(n){if(ar.isArray(n)){m=[];for(k=n.length;k--;){n[k].append(),m.push(n[k].id)}o[l]=m}else{n.append(),o[l]=n.id}}else{o[l]=null}}i.render()}},ar.fn.sparkline.line=P=ao(ar.fn.sparkline._base,{type:"line",init:function(h,g,k,j,i){P._super.init.call(this,h,g,k,j,i),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(h,g,k){var j,i=this.regionMap;for(j=i.length;j--;){if(i[j]!==null&&g>=i[j][0]&&g<=i[j][1]){return i[j][2]}}return f},getCurrentRegionFields:function(){var g=this.currentRegion;return{isNull:this.yvalues[g]===null,x:this.xvalues[g],y:this.yvalues[g],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:g}},renderHighlight:function(){var s=this.currentRegion,r=this.target,q=this.vertices[s],p=this.options,o=p.get("spotRadius"),n=p.get("highlightSpotColor"),m=p.get("highlightLineColor"),l,k;if(!q){return}o&&n&&(l=r.drawCircle(q[0],q[1],o,f,n),this.highlightSpotId=l.id,r.insertAfterShape(this.lastShapeId,l)),m&&(k=r.drawLine(q[0],this.canvasTop,q[0],this.canvasTop+this.canvasHeight,m),this.highlightLineId=k.id,r.insertAfterShape(this.lastShapeId,k))},removeHighlight:function(){var g=this.target;this.highlightSpotId&&(g.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(g.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var u=this.values,t=u.length,s=this.xvalues,r=this.yvalues,q=this.yminmax,p,o,n,m,l;for(p=0;p<t;p++){o=u[p],n=typeof u[p]=="string",m=typeof u[p]=="object"&&u[p] instanceof Array,l=n&&u[p].split(":"),n&&l.length===2?(s.push(Number(l[0])),r.push(Number(l[1])),q.push(Number(l[1]))):m?(s.push(o[0]),r.push(o[1]),q.push(o[1])):(s.push(p),u[p]===null||u[p]==="null"?r.push(null):(r.push(Number(o)),q.push(Number(o))))}this.options.get("xvalues")&&(s=this.options.get("xvalues")),this.maxy=this.maxyorg=d.max.apply(d,q),this.miny=this.minyorg=d.min.apply(d,q),this.maxx=d.max.apply(d,s),this.minx=d.min.apply(d,s),this.xvalues=s,this.yvalues=r,this.yminmax=q},processRangeOptions:function(){var h=this.options,g=h.get("normalRangeMin"),i=h.get("normalRangeMax");g!==f&&(g<this.miny&&(this.miny=g),i>this.maxy&&(this.maxy=i)),h.get("chartRangeMin")!==f&&(h.get("chartRangeClip")||h.get("chartRangeMin")<this.miny)&&(this.miny=h.get("chartRangeMin")),h.get("chartRangeMax")!==f&&(h.get("chartRangeClip")||h.get("chartRangeMax")>this.maxy)&&(this.maxy=h.get("chartRangeMax")),h.get("chartRangeMinX")!==f&&(h.get("chartRangeClipX")||h.get("chartRangeMinX")<this.minx)&&(this.minx=h.get("chartRangeMinX")),h.get("chartRangeMaxX")!==f&&(h.get("chartRangeClipX")||h.get("chartRangeMaxX")>this.maxx)&&(this.maxx=h.get("chartRangeMaxX"))},drawNormalRange:function(t,s,r,q,p){var o=this.options.get("normalRangeMin"),n=this.options.get("normalRangeMax"),m=s+d.round(r-r*((n-this.miny)/p)),l=d.round(r*(n-o)/p);this.target.drawRect(t,m,q,l,f,this.options.get("normalRangeColor")).append()},render:function(){var aV=this.options,aU=this.target,aT=this.canvasWidth,aS=this.canvasHeight,aR=this.vertices,aQ=aV.get("spotRadius"),aP=this.regionMap,aO,aN,aM,aL,aK,aJ,aH,aF,aD,aA,ay,aw,at,x,aI,aG,aE,aC,aB,az,ax,av,au,L,t;if(!P._super.render.call(this)){return}this.scanValues(),this.processRangeOptions(),au=this.xvalues,L=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2){return}aL=aK=0,aO=this.maxx-this.minx===0?1:this.maxx-this.minx,aN=this.maxy-this.miny===0?1:this.maxy-this.miny,aM=this.yvalues.length-1,aQ&&(aT<aQ*4||aS<aQ*4)&&(aQ=0);if(aQ){ax=aV.get("highlightSpotColor")&&!aV.get("disableInteraction");if(ax||aV.get("minSpotColor")||aV.get("spotColor")&&L[aM]===this.miny){aS-=d.ceil(aQ)}if(ax||aV.get("maxSpotColor")||aV.get("spotColor")&&L[aM]===this.maxy){aS-=d.ceil(aQ),aL+=d.ceil(aQ)}if(ax||(aV.get("minSpotColor")||aV.get("maxSpotColor"))&&(L[0]===this.miny||L[0]===this.maxy)){aK+=d.ceil(aQ),aT-=d.ceil(aQ)}if(ax||aV.get("spotColor")||aV.get("minSpotColor")||aV.get("maxSpotColor")&&(L[aM]===this.miny||L[aM]===this.maxy)){aT-=d.ceil(aQ)}}aS--,aV.get("normalRangeMin")!==f&&!aV.get("drawNormalOnTop")&&this.drawNormalRange(aK,aL,aS,aT,aN),aH=[],aF=[aH],x=aI=null,aG=L.length;for(t=0;t<aG;t++){aD=au[t],ay=au[t+1],aA=L[t],aw=aK+d.round((aD-this.minx)*(aT/aO)),at=t<aG-1?aK+d.round((ay-this.minx)*(aT/aO)):aT,aI=aw+(at-aw)/2,aP[t]=[x||0,aI,t],x=aI,aA===null?t&&(L[t-1]!==null&&(aH=[],aF.push(aH)),aR.push(null)):(aA<this.miny&&(aA=this.miny),aA>this.maxy&&(aA=this.maxy),aH.length||aH.push([aw,aL+aS]),aJ=[aw,aL+d.round(aS-aS*((aA-this.miny)/aN))],aH.push(aJ),aR.push(aJ))}aE=[],aC=[],aB=aF.length;for(t=0;t<aB;t++){aH=aF[t],aH.length&&(aV.get("fillColor")&&(aH.push([aH[aH.length-1][0],aL+aS]),aC.push(aH.slice(0)),aH.pop()),aH.length>2&&(aH[0]=[aH[0][0],aH[1][1]]),aE.push(aH))}aB=aC.length;for(t=0;t<aB;t++){aU.drawShape(aC[t],aV.get("fillColor"),aV.get("fillColor")).append()}aV.get("normalRangeMin")!==f&&aV.get("drawNormalOnTop")&&this.drawNormalRange(aK,aL,aS,aT,aN),aB=aE.length;for(t=0;t<aB;t++){aU.drawShape(aE[t],aV.get("lineColor"),f,aV.get("lineWidth")).append()}if(aQ&&aV.get("valueSpots")){az=aV.get("valueSpots"),az.get===f&&(az=new X(az));for(t=0;t<aG;t++){av=az.get(L[t]),av&&aU.drawCircle(aK+d.round((au[t]-this.minx)*(aT/aO)),aL+d.round(aS-aS*((L[t]-this.miny)/aN)),aQ,f,av).append()}}aQ&&aV.get("spotColor")&&L[aM]!==null&&aU.drawCircle(aK+d.round((au[au.length-1]-this.minx)*(aT/aO)),aL+d.round(aS-aS*((L[aM]-this.miny)/aN)),aQ,f,aV.get("spotColor")).append(),this.maxy!==this.minyorg&&(aQ&&aV.get("minSpotColor")&&(aD=au[ar.inArray(this.minyorg,L)],aU.drawCircle(aK+d.round((aD-this.minx)*(aT/aO)),aL+d.round(aS-aS*((this.minyorg-this.miny)/aN)),aQ,f,aV.get("minSpotColor")).append()),aQ&&aV.get("maxSpotColor")&&(aD=au[ar.inArray(this.maxyorg,L)],aU.drawCircle(aK+d.round((aD-this.minx)*(aT/aO)),aL+d.round(aS-aS*((this.maxyorg-this.miny)/aN)),aQ,f,aV.get("maxSpotColor")).append())),this.lastShapeId=aU.getLastShapeId(),this.canvasTop=aL,aU.render()}}),ar.fn.sparkline.bar=N=ao(ar.fn.sparkline._base,R,{type:"bar",init:function(aX,aW,aV,aU,aT){var aS=parseInt(aV.get("barWidth"),10),aR=parseInt(aV.get("barSpacing"),10),aQ=aV.get("chartRangeMin"),aP=aV.get("chartRangeMax"),aO=aV.get("chartRangeClip"),aN=Infinity,aM=-Infinity,aL,aK,aJ,aI,aH,aG,aF,aE,aD,aC,aB,aA,az,ay,ax,aw,av,au,at,y,t,m,l;N._super.init.call(this,aX,aW,aV,aU,aT);for(aG=0,aF=aW.length;aG<aF;aG++){y=aW[aG],aL=typeof y=="string"&&y.indexOf(":")>-1;if(aL||ar.isArray(y)){ax=!0,aL&&(y=aW[aG]=aj(y.split(":"))),y=ai(y,null),aK=d.min.apply(d,y),aJ=d.max.apply(d,y),aK<aN&&(aN=aK),aJ>aM&&(aM=aJ)}}this.stacked=ax,this.regionShapes={},this.barWidth=aS,this.barSpacing=aR,this.totalBarWidth=aS+aR,this.width=aU=aW.length*aS+(aW.length-1)*aR,this.initTarget(),aO&&(az=aQ===f?-Infinity:aQ,ay=aP===f?Infinity:aP),aH=[],aI=ax?[]:aH;var k=[],i=[];for(aG=0,aF=aW.length;aG<aF;aG++){if(ax){aw=aW[aG],aW[aG]=at=[],k[aG]=0,aI[aG]=i[aG]=0;for(av=0,au=aw.length;av<au;av++){y=at[av]=aO?am(aw[av],az,ay):aw[av],y!==null&&(y>0&&(k[aG]+=y),aN<0&&aM>0?y<0?i[aG]+=d.abs(y):aI[aG]+=y:aI[aG]+=d.abs(y-(y<0?aM:aN)),aH.push(y))}}else{y=aO?am(aW[aG],az,ay):aW[aG],y=aW[aG]=ak(y),y!==null&&aH.push(y)}}this.max=aA=d.max.apply(d,aH),this.min=aB=d.min.apply(d,aH),this.stackMax=aM=ax?d.max.apply(d,k):aA,this.stackMin=aN=ax?d.min.apply(d,aH):aB,aV.get("chartRangeMin")!==f&&(aV.get("chartRangeClip")||aV.get("chartRangeMin")<aB)&&(aB=aV.get("chartRangeMin")),aV.get("chartRangeMax")!==f&&(aV.get("chartRangeClip")||aV.get("chartRangeMax")>aA)&&(aA=aV.get("chartRangeMax")),this.zeroAxis=aD=aV.get("zeroAxis",!0),aB<=0&&aA>=0&&aD?aC=0:aD==0?aC=aB:aB>0?aC=aB:aC=aA,this.xaxisOffset=aC,aE=ax?d.max.apply(d,aI)+d.max.apply(d,i):aA-aB,this.canvasHeightEf=aD&&aB<0?this.canvasHeight-2:this.canvasHeight-1,aB<aC?(m=ax&&aA>=0?aM:aA,t=(m-aC)/aE*this.canvasHeight,t!==d.ceil(t)&&(this.canvasHeightEf-=2,t=d.ceil(t))):t=this.canvasHeight,this.yoffset=t,ar.isArray(aV.get("colorMap"))?(this.colorMapByIndex=aV.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=aV.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===f&&(this.colorMapByValue=new X(this.colorMapByValue))),this.range=aE},getRegion:function(g,j,i){var h=d.floor(j/this.totalBarWidth);return h<0||h>=this.values.length?f:h},getCurrentRegionFields:function(){var h=this.currentRegion,g=ab(this.values[h]),k=[],j,i;for(i=g.length;i--;){j=g[i],k.push({isNull:j===null,value:j,color:this.calcColor(i,j,h),offset:h})}return k},calcColor:function(l,k,r){var q=this.colorMapByIndex,p=this.colorMapByValue,o=this.options,n,m;return this.stacked?n=o.get("stackedBarColor"):n=k<0?o.get("negBarColor"):o.get("barColor"),k===0&&o.get("zeroColor")!==f&&(n=o.get("zeroColor")),p&&(m=p.get(k))?n=m:q&&q.length>r&&(n=q[r]),ar.isArray(n)?n[l%n.length]:n},renderRegion:function(aB,aA){var az=this.values[aB],ay=this.options,ax=this.xaxisOffset,aw=[],av=this.range,au=this.stacked,at=this.target,L=aB*this.totalBarWidth,K=this.canvasHeightEf,J=this.yoffset,I,H,G,F,E,D,C,B,A,o;az=ar.isArray(az)?az:[az],C=az.length,B=az[0],F=ag(null,az),o=ag(ax,az,!0);if(F){return ay.get("nullColor")?(G=aA?ay.get("nullColor"):this.calcHighlightColor(ay.get("nullColor"),ay),I=J>0?J-1:J,at.drawRect(L,I,this.barWidth-1,0,G,G)):f}E=J;for(D=0;D<C;D++){B=az[D];if(au&&B===ax){if(!o||A){continue}A=!0}av>0?H=d.floor(K*(d.abs(B-ax)/av))+1:H=1,B<ax||B===ax&&J===0?(I=E,E+=H):(I=J-H,J-=H),G=this.calcColor(D,B,aB),aA&&(G=this.calcHighlightColor(G,ay)),aw.push(at.drawRect(L,I,this.barWidth-1,H-1,G,G))}return aw.length===1?aw[0]:aw}}),ar.fn.sparkline.tristate=c=ao(ar.fn.sparkline._base,R,{type:"tristate",init:function(k,j,p,o,n){var m=parseInt(p.get("barWidth"),10),l=parseInt(p.get("barSpacing"),10);c._super.init.call(this,k,j,p,o,n),this.regionShapes={},this.barWidth=m,this.barSpacing=l,this.totalBarWidth=m+l,this.values=ar.map(j,Number),this.width=o=j.length*m+(j.length-1)*l,ar.isArray(p.get("colorMap"))?(this.colorMapByIndex=p.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=p.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===f&&(this.colorMapByValue=new X(this.colorMapByValue))),this.initTarget()},getRegion:function(g,i,h){return d.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var g=this.currentRegion;return{isNull:this.values[g]===f,value:this.values[g],color:this.calcColor(this.values[g],g),offset:g}},calcColor:function(j,i){var p=this.values,o=this.options,n=this.colorMapByIndex,m=this.colorMapByValue,l,k;return m&&(k=m.get(j))?l=k:n&&n.length>i?l=n[i]:p[i]<0?l=o.get("negBarColor"):p[i]>0?l=o.get("posBarColor"):l=o.get("zeroBarColor"),l},renderRegion:function(w,v){var u=this.values,t=this.options,s=this.target,r,q,p,o,n,m;r=s.pixelHeight,p=d.round(r/2),o=w*this.totalBarWidth,u[w]<0?(n=p,q=p-1):u[w]>0?(n=0,q=p-1):(n=p-1,q=2),m=this.calcColor(u[w],w);if(m===null){return}return v&&(m=this.calcHighlightColor(m,t)),s.drawRect(o,n,this.barWidth-1,q-1,m,m)}}),ar.fn.sparkline.discrete=ae=ao(ar.fn.sparkline._base,R,{type:"discrete",init:function(i,m,l,k,j){ae._super.init.call(this,i,m,l,k,j),this.regionShapes={},this.values=m=ar.map(m,Number),this.min=d.min.apply(d,m),this.max=d.max.apply(d,m),this.range=this.max-this.min,this.width=k=l.get("width")==="auto"?m.length*2:this.width,this.interval=d.floor(k/m.length),this.itemWidth=k/m.length,l.get("chartRangeMin")!==f&&(l.get("chartRangeClip")||l.get("chartRangeMin")<this.min)&&(this.min=l.get("chartRangeMin")),l.get("chartRangeMax")!==f&&(l.get("chartRangeClip")||l.get("chartRangeMax")>this.max)&&(this.max=l.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=l.get("lineHeight")==="auto"?d.round(this.canvasHeight*0.3):l.get("lineHeight"))},getRegion:function(g,i,h){return d.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var g=this.currentRegion;return{isNull:this.values[g]===f,value:this.values[g],offset:g}},renderRegion:function(G,F){var E=this.values,D=this.options,C=this.min,B=this.max,A=this.range,z=this.interval,y=this.target,x=this.canvasHeight,w=this.lineHeight,v=x-w,u,t,s,i;return t=am(E[G],C,B),i=G*z,u=d.round(v-v*((t-C)/A)),s=D.get("thresholdColor")&&t<D.get("thresholdValue")?D.get("thresholdColor"):D.get("lineColor"),F&&(s=this.calcHighlightColor(s,D)),y.drawLine(i,u,i,u+w,s)}}),ar.fn.sparkline.bullet=ac=ao(ar.fn.sparkline._base,{type:"bullet",init:function(k,r,q,p,o){var n,m,l;ac._super.init.call(this,k,r,q,p,o),this.values=r=aj(r),l=r.slice(),l[0]=l[0]===null?l[2]:l[0],l[1]=r[1]===null?l[2]:l[1],n=d.min.apply(d,r),m=d.max.apply(d,r),q.get("base")===f?n=n<0?n:0:n=q.get("base"),this.min=n,this.max=m,this.range=m-n,this.shapes={},this.valueShapes={},this.regiondata={},this.width=p=q.get("width")==="auto"?"4.0em":p,this.target=this.$el.simpledraw(p,o,q.get("composite")),r.length||(this.disabled=!0),this.initTarget()},getRegion:function(h,g,j){var i=this.target.getShapeAt(h,g,j);return i!==f&&this.shapes[i]!==f?this.shapes[i]:f},getCurrentRegionFields:function(){var g=this.currentRegion;return{fieldkey:g.substr(0,1),value:this.values[g.substr(1)],region:g}},changeHighlight:function(h){var g=this.currentRegion,j=this.valueShapes[g],i;delete this.shapes[j];switch(g.substr(0,1)){case"r":i=this.renderRange(g.substr(1),h);break;case"p":i=this.renderPerformance(h);break;case"t":i=this.renderTarget(h)}this.valueShapes[g]=i.id,this.shapes[i.id]=g,this.target.replaceWithShape(j,i)},renderRange:function(g,k){var j=this.values[g],i=d.round(this.canvasWidth*((j-this.min)/this.range)),h=this.options.get("rangeColors")[g-2];return k&&(h=this.calcHighlightColor(h,this.options)),this.target.drawRect(0,0,i-1,this.canvasHeight-1,h,h)},renderPerformance:function(g){var j=this.values[1],i=d.round(this.canvasWidth*((j-this.min)/this.range)),h=this.options.get("performanceColor");return g&&(h=this.calcHighlightColor(h,this.options)),this.target.drawRect(0,d.round(this.canvasHeight*0.3),i-1,d.round(this.canvasHeight*0.4)-1,h,h)},renderTarget:function(h){var m=this.values[0],l=d.round(this.canvasWidth*((m-this.min)/this.range)-this.options.get("targetWidth")/2),k=d.round(this.canvasHeight*0.1),j=this.canvasHeight-k*2,i=this.options.get("targetColor");return h&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(l,k,this.options.get("targetWidth")-1,j-1,i,i)},render:function(){var h=this.values.length,g=this.target,j,i;if(!ac._super.render.call(this)){return}for(j=2;j<h;j++){i=this.renderRange(j).append(),this.shapes[i.id]="r"+j,this.valueShapes["r"+j]=i.id}this.values[1]!==null&&(i=this.renderPerformance().append(),this.shapes[i.id]="p1",this.valueShapes.p1=i.id),this.values[0]!==null&&(i=this.renderTarget().append(),this.shapes[i.id]="t0",this.valueShapes.t0=i.id),g.render()}}),ar.fn.sparkline.pie=aa=ao(ar.fn.sparkline._base,{type:"pie",init:function(j,p,o,n,m){var l=0,k;aa._super.init.call(this,j,p,o,n,m),this.shapes={},this.valueShapes={},this.values=p=ar.map(p,Number),o.get("width")==="auto"&&(this.width=this.height);if(p.length>0){for(k=p.length;k--;){l+=p[k]}}this.total=l,this.initTarget(),this.radius=d.floor(d.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(h,g,j){var i=this.target.getShapeAt(h,g,j);return i!==f&&this.shapes[i]!==f?this.shapes[i]:f},getCurrentRegionFields:function(){var g=this.currentRegion;return{isNull:this.values[g]===f,value:this.values[g],percent:this.values[g]/this.total*100,color:this.options.get("sliceColors")[g%this.options.get("sliceColors").length],offset:g}},changeHighlight:function(h){var g=this.currentRegion,j=this.renderSlice(g,h),i=this.valueShapes[g];delete this.shapes[i],this.target.replaceWithShape(i,j),this.valueShapes[g]=j.id,this.shapes[j.id]=g},renderSlice:function(H,G){var F=this.target,E=this.options,D=this.radius,C=E.get("borderWidth"),B=E.get("offset"),A=2*d.PI,z=this.values,y=this.total,x=B?2*d.PI*(B/360):0,w,v,u,t,s;t=z.length;for(u=0;u<t;u++){w=x,v=x,y>0&&(v=x+A*(z[u]/y));if(H===u){return s=E.get("sliceColors")[u%E.get("sliceColors").length],G&&(s=this.calcHighlightColor(s,E)),F.drawPieSlice(D,D,D-C,w,v,f,s)}x=v}},render:function(){var j=this.target,p=this.values,o=this.options,n=this.radius,m=o.get("borderWidth"),l,k;if(!aa._super.render.call(this)){return}m&&j.drawCircle(n,n,d.floor(n-m/2),o.get("borderColor"),f,m).append();for(k=p.length;k--;){p[k]&&(l=this.renderSlice(k).append(),this.valueShapes[k]=l.id,this.shapes[l.id]=k)}j.render()}}),ar.fn.sparkline.box=Y=ao(ar.fn.sparkline._base,{type:"box",init:function(h,g,k,j,i){Y._super.init.call(this,h,g,k,j,i),this.values=ar.map(g,Number),this.width=k.get("width")==="auto"?"4.0em":j,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var g=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==f&&g.push({field:"lo",value:this.loutlier}),this.routlier!==f&&g.push({field:"ro",value:this.routlier}),this.lwhisker!==f&&g.push({field:"lw",value:this.lwhisker}),this.rwhisker!==f&&g.push({field:"rw",value:this.rwhisker}),g},render:function(){var aw=this.target,av=this.values,au=av.length,at=this.options,L=this.canvasWidth,K=this.canvasHeight,J=at.get("chartRangeMin")===f?d.min.apply(d,av):at.get("chartRangeMin"),I=at.get("chartRangeMax")===f?d.max.apply(d,av):at.get("chartRangeMax"),H=0,G,F,E,D,C,B,A,z,y,x,j;if(!Y._super.render.call(this)){return}if(at.get("raw")){at.get("showOutliers")&&av.length>5?(F=av[0],G=av[1],D=av[2],C=av[3],B=av[4],A=av[5],z=av[6]):(G=av[0],D=av[1],C=av[2],B=av[3],A=av[4])}else{av.sort(function(h,g){return h-g}),D=al(av,1),C=al(av,2),B=al(av,3),E=B-D;if(at.get("showOutliers")){G=A=f;for(y=0;y<au;y++){G===f&&av[y]>D-E*at.get("outlierIQR")&&(G=av[y]),av[y]<B+E*at.get("outlierIQR")&&(A=av[y])}F=av[0],z=av[au-1]}else{G=av[0],A=av[au-1]}}this.quartiles=[D,C,B],this.lwhisker=G,this.rwhisker=A,this.loutlier=F,this.routlier=z,j=L/(I-J+1),at.get("showOutliers")&&(H=d.ceil(at.get("spotRadius")),L-=2*d.ceil(at.get("spotRadius")),j=L/(I-J+1),F<G&&aw.drawCircle((F-J)*j+H,K/2,at.get("spotRadius"),at.get("outlierLineColor"),at.get("outlierFillColor")).append(),z>A&&aw.drawCircle((z-J)*j+H,K/2,at.get("spotRadius"),at.get("outlierLineColor"),at.get("outlierFillColor")).append()),aw.drawRect(d.round((D-J)*j+H),d.round(K*0.1),d.round((B-D)*j),d.round(K*0.8),at.get("boxLineColor"),at.get("boxFillColor")).append(),aw.drawLine(d.round((G-J)*j+H),d.round(K/2),d.round((D-J)*j+H),d.round(K/2),at.get("lineColor")).append(),aw.drawLine(d.round((G-J)*j+H),d.round(K/4),d.round((G-J)*j+H),d.round(K-K/4),at.get("whiskerColor")).append(),aw.drawLine(d.round((A-J)*j+H),d.round(K/2),d.round((B-J)*j+H),d.round(K/2),at.get("lineColor")).append(),aw.drawLine(d.round((A-J)*j+H),d.round(K/4),d.round((A-J)*j+H),d.round(K-K/4),at.get("whiskerColor")).append(),aw.drawLine(d.round((C-J)*j+H),d.round(K*0.1),d.round((C-J)*j+H),d.round(K*0.9),at.get("medianColor")).append(),at.get("target")&&(x=d.ceil(at.get("spotRadius")),aw.drawLine(d.round((at.get("target")-J)*j+H),d.round(K/2-x),d.round((at.get("target")-J)*j+H),d.round(K/2+x),at.get("targetColor")).append(),aw.drawLine(d.round((at.get("target")-J)*j+H-x),d.round(K/2),d.round((at.get("target")-J)*j+H+x),d.round(K/2),at.get("targetColor")).append()),aw.render()}}),S=ao({init:function(h,g,j,i){this.target=h,this.id=g,this.type=j,this.args=i},append:function(){return this.target.appendShape(this),this}}),Q=ao({_pxregex:/(\d+)(px)?\s*$/i,init:function(h,g,i){if(!h){return}this.width=h,this.height=g,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),ar.data(i,"_jqs_vcanvas",this)},drawLine:function(h,g,l,k,j,i){return this.drawShape([[h,g],[l,k]],j,i)},drawShape:function(h,g,j,i){return this._genShape("Shape",[h,g,j,i])},drawCircle:function(h,g,l,k,j,i){return this._genShape("Circle",[h,g,l,k,j,i])},drawPieSlice:function(i,h,n,m,l,k,j){return this._genShape("PieSlice",[i,h,n,m,l,k,j])},drawRect:function(h,g,l,k,j,i){return this._genShape("Rect",[h,g,l,k,j,i])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(h,g){ar(g).html(h)},_calculatePixelDims:function(h,g,j){var i;i=this._pxregex.exec(g),i?this.pixelHeight=i[1]:this.pixelHeight=ar(j).height(),i=this._pxregex.exec(h),i?this.pixelWidth=i[1]:this.pixelWidth=ar(j).width()},_genShape:function(h,g){var i=a++;return g.unshift(i),new S(this,i,h,g)},appendShape:function(g){alert("appendShape not implemented")},replaceWithShape:function(h,g){alert("replaceWithShape not implemented")},insertAfterShape:function(h,g){alert("insertAfterShape not implemented")},removeShapeId:function(g){alert("removeShapeId not implemented")},getShapeAt:function(h,g,i){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),O=ao(Q,{init:function(h,k,j,i){O._super.init.call(this,h,k,j),this.canvas=e.createElement("canvas"),j[0]&&(j=j[0]),ar.data(j,"_jqs_vcanvas",this),ar(this.canvas).css({display:"inline-block",width:h,height:k,verticalAlign:"top"}),this._insert(this.canvas,j),this._calculatePixelDims(h,k,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=i,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=f,ar(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(h,g,j){var i=this.canvas.getContext("2d");return h!==f&&(i.strokeStyle=h),i.lineWidth=j===f?1:j,g!==f&&(i.fillStyle=g),i},reset:function(){var g=this._getContext();g.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=f},_drawShape:function(k,j,q,p,o){var n=this._getContext(q,p,o),m,l;n.beginPath(),n.moveTo(j[0][0]+0.5,j[0][1]+0.5);for(m=1,l=j.length;m<l;m++){n.lineTo(j[m][0]+0.5,j[m][1]+0.5)}q!==f&&n.stroke(),p!==f&&n.fill(),this.targetX!==f&&this.targetY!==f&&n.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=k)},_drawCircle:function(k,r,q,p,o,n,m){var l=this._getContext(o,n,m);l.beginPath(),l.arc(r,q,p,0,2*d.PI,!1),this.targetX!==f&&this.targetY!==f&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=k),o!==f&&l.stroke(),n!==f&&l.fill()},_drawPieSlice:function(s,r,q,p,o,n,m,l){var k=this._getContext(m,l);k.beginPath(),k.moveTo(r,q),k.arc(r,q,p,o,n,!1),k.lineTo(r,q),k.closePath(),m!==f&&k.stroke(),l&&k.fill(),this.targetX!==f&&this.targetY!==f&&k.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=s)},_drawRect:function(i,h,n,m,l,k,j){return this._drawShape(i,[[h,n],[h+m,n],[h+m,n+l],[h,n+l],[h,n]],k,j)},appendShape:function(g){return this.shapes[g.id]=g,this.shapeseq.push(g.id),this.lastShapeId=g.id,g.id},replaceWithShape:function(h,g){var j=this.shapeseq,i;this.shapes[g.id]=g;for(i=j.length;i--;){j[i]==h&&(j[i]=g.id)}delete this.shapes[h]},replaceWithShapes:function(i,h){var n=this.shapeseq,m={},l,k,j;for(k=i.length;k--;){m[i[k]]=!0}for(k=n.length;k--;){l=n[k],m[l]&&(n.splice(k,1),delete this.shapes[l],j=k)}for(k=h.length;k--;){n.splice(j,0,h[k].id),this.shapes[h[k].id]=h[k]}},insertAfterShape:function(h,g){var j=this.shapeseq,i;for(i=j.length;i--;){if(j[i]===h){j.splice(i+1,0,g.id),this.shapes[g.id]=g;return}}},removeShapeId:function(h){var g=this.shapeseq,i;for(i=g.length;i--;){if(g[i]===h){g.splice(i,1);break}}delete this.shapes[h]},getShapeAt:function(h,g,i){return this.targetX=g,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var i=this.shapeseq,h=this.shapes,n=i.length,m=this._getContext(),l,k,j;m.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(j=0;j<n;j++){l=i[j],k=h[l],this["_draw"+k.type].apply(this,k.args)}this.interact||(this.shapes={},this.shapeseq=[])}}),M=ao(Q,{init:function(g,j,i){var h;M._super.init.call(this,g,j,i),i[0]&&(i=i[0]),ar.data(i,"_jqs_vcanvas",this),this.canvas=e.createElement("span"),ar(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:g,height:j,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(g,j,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,h='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",h),this.group=ar(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(A,z,y,x,w){var v=[],u,t,s,r,q,p,o;for(o=0,p=z.length;o<p;o++){v[o]=""+z[o][0]+","+z[o][1]}return u=v.splice(0,1),w=w===f?1:w,t=y===f?' stroked="false" ':' strokeWeight="'+w+'px" strokeColor="'+y+'" ',s=x===f?' filled="false"':' fillColor="'+x+'" filled="true" ',r=v[0]===v[v.length-1]?"x ":"",q='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+A+'" '+t+s+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+u+" l "+v.join(", ")+" "+r+'e"> </v:shape>',q},_drawCircle:function(u,t,s,r,q,p,o){var n,m,l;return t-=r,s-=r,n=q===f?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+q+'" ',m=p===f?' filled="false"':' fillColor="'+p+'" filled="true" ',l='<v:oval  id="jqsshape'+u+'" '+n+m+' style="position:absolute;top:'+s+"px; left:"+t+"px; width:"+r*2+"px; height:"+r*2+'px"></v:oval>',l},_drawPieSlice:function(H,G,F,E,D,C,B,A){var z,y,x,w,v,u,t,s;if(D===C){return""}C-D===2*d.PI&&(D=0,C=2*d.PI),y=G+d.round(d.cos(D)*E),x=F+d.round(d.sin(D)*E),w=G+d.round(d.cos(C)*E),v=F+d.round(d.sin(C)*E);if(y===w&&x===v){if(C-D<d.PI){return""}y=w=G+E,x=v=F}return y===w&&x===v&&C-D<d.PI?"":(z=[G-E,F-E,G+E,F+E,y,x,w,v],u=B===f?' stroked="false" ':' strokeWeight="1px" strokeColor="'+B+'" ',t=A===f?' filled="false"':' fillColor="'+A+'" filled="true" ',s='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+H+'" '+u+t+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+G+","+F+" wa "+z.join(", ")+' x e"> </v:shape>',s)},_drawRect:function(i,h,n,m,l,k,j){return this._drawShape(i,[[h,n],[h,n+l],[h+m,n+l],[h+m,n],[h,n]],k,j)},reset:function(){this.group.innerHTML=""},appendShape:function(h){var g=this["_draw"+h.type].apply(this,h.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",g):this.prerender+=g,this.lastShapeId=h.id,h.id},replaceWithShape:function(h,g){var j=ar("#jqsshape"+h),i=this["_draw"+g.type].apply(this,g.args);j[0].outerHTML=i},replaceWithShapes:function(i,h){var m=ar("#jqsshape"+i[0]),l="",k=h.length,j;for(j=0;j<k;j++){l+=this["_draw"+h[j].type].apply(this,h[j].args)}m[0].outerHTML=l;for(j=1;j<i.length;j++){ar("#jqsshape"+i[j]).remove()}},insertAfterShape:function(h,g){var j=ar("#jqsshape"+h),i=this["_draw"+g.type].apply(this,g.args);j[0].insertAdjacentHTML("afterEnd",i)},removeShapeId:function(h){var g=ar("#jqsshape"+h);this.group.removeChild(g[0])},getShapeAt:function(h,g,j){var i=h.id.substr(8);return i},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})})(document,Math);